// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/libs/sortablejs/Sortable":function(){(function(J,D){"object"===typeof exports&&"undefined"!==typeof module?module.exports=D():"function"===typeof define&&define.amd?define(D):(J=J||self,J.Sortable=D())})(this,function(){function J(a){J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return J(a)}function D(){D=Object.assign||
function(a){for(var d=1;d<arguments.length;d++){var f=arguments[d],h;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h])}return a};return D.apply(this,arguments)}function I(a){for(var d=1;d<arguments.length;d++){var f=null!=arguments[d]?arguments[d]:{},h=Object.keys(f);"function"===typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable})));h.forEach(function(d){var h=f[d];d in a?Object.defineProperty(a,
d,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[d]=h})}return a}function e(a,d){if(null==a)return{};var f;if(null==a)f={};else{f={};var h=Object.keys(a),z,b;for(b=0;b<h.length;b++)z=h[b],0<=d.indexOf(z)||(f[z]=a[z])}if(Object.getOwnPropertySymbols)for(b=Object.getOwnPropertySymbols(a),z=0;z<b.length;z++)h=b[z],0<=d.indexOf(h)||Object.prototype.propertyIsEnumerable.call(a,h)&&(f[h]=a[h]);return f}function K(a){var d;if(Array.isArray(a)){d=0;for(var f=Array(a.length);d<a.length;d++)f[d]=a[d];
d=f}else d=void 0;d||(d=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=d))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function t(a){return!!navigator.userAgent.match(a)}function g(a,d,f){a.addEventListener(d,f,!P&&ob)}function n(a,d,f){a.removeEventListener(d,f,!P&&ob)}function F(a,d){if(d){"\x3e"===d[0]&&(d=d.substring(1));if(a)try{if(a.matches)return a.matches(d);if(a.msMatchesSelector)return a.msMatchesSelector(d);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(d)}catch(f){}return!1}}function O(a,d,f,h){if(a){f=f||document;do{if(null!=d&&("\x3e"===d[0]?a.parentNode===f&&F(a,d):F(a,d))||h&&a===f)return a;if(a===f)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function w(a,d,f){if(a&&d)if(a.classList)a.classList[f?"add":"remove"](d);else{var h=(" "+a.className+" ").replace(pb," ").replace(" "+d+" "," ");a.className=(h+(f?" "+d:"")).replace(pb," ")}}function k(a,
d,f){var h=a&&a.style;if(h){if(void 0===f)return document.defaultView&&document.defaultView.getComputedStyle?f=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(f=a.currentStyle),void 0===d?f:f[d];d in h||-1!==d.indexOf("webkit")||(d="-webkit-"+d);h[d]=f+("string"===typeof f?"":"px")}}function S(a,d){var f="";if("string"===typeof a)f=a;else{do{var h=k(a,"transform");h&&"none"!==h&&(f=h+" "+f)}while(!d&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix)&&
new a(f)}function c(a,d,f){if(a){a=a.getElementsByTagName(d);d=0;var h=a.length;if(f)for(;d<h;d++)f(a[d],d);return a}return[]}function C(){return P?document.documentElement:document.scrollingElement}function A(a,d,f,h,z){if(a.getBoundingClientRect||a===window){var b,m,l,q,c,e,p;a!==window&&a!==C()?(b=a.getBoundingClientRect(),m=b.top,l=b.left,q=b.bottom,c=b.right,e=b.height,p=b.width):(l=m=0,q=window.innerHeight,c=window.innerWidth,e=window.innerHeight,p=window.innerWidth);if((d||f)&&a!==window&&
(z=z||a.parentNode,!P)){do if(z&&z.getBoundingClientRect&&("none"!==k(z,"transform")||f&&"static"!==k(z,"position"))){q=z.getBoundingClientRect();m-=q.top+parseInt(k(z,"border-top-width"));l-=q.left+parseInt(k(z,"border-left-width"));q=m+b.height;c=l+b.width;break}while(z=z.parentNode)}h&&a!==window&&(h=(a=S(z||a))&&a.a,z=a&&a.d,a&&(m/=z,l/=h,p/=h,e/=z,q=m+e,c=l+p));return{top:m,left:l,bottom:q,right:c,width:p,height:e}}}function ea(a,d,f){var h=r(a,!0);for(a=A(a)[d];h;){d=A(h)[f];var b=void 0,b=
"top"===f||"left"===f?a>=d:a<=d;if(!b)return h;if(h===C())break;h=r(h,!1)}return!1}function ja(a,d,f){for(var h=0,b=0,m=a.children;b<m.length;){if("none"!==m[b].style.display&&m[b]!==x.ghost&&m[b]!==x.dragged&&O(m[b],f.draggable,a,!1)){if(h===d)return m[b];h++}b++}return null}function v(a,d){for(a=a.lastElementChild;a&&(a===x.ghost||"none"===k(a,"display")||d&&!F(a,d));)a=a.previousElementSibling;return a||null}function H(a,d){var f=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===
a.nodeName.toUpperCase()||a===x.clone||d&&!F(a,d)||f++;return f}function ma(a){var d=0,f=0,h=C();if(a){do var b=S(a),m=b.d,d=d+a.scrollLeft*b.a,f=f+a.scrollTop*m;while(a!==h&&(a=a.parentNode))}return[d,f]}function Da(a,d){for(var f in a)if(a.hasOwnProperty(f))for(var h in d)if(d.hasOwnProperty(h)&&d[h]===a[f][h])return Number(f);return-1}function r(a,d){if(!a||!a.getBoundingClientRect)return C();var f=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var h=k(a);if(a.clientWidth<
a.scrollWidth&&("auto"==h.overflowX||"scroll"==h.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==h.overflowY||"scroll"==h.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(f||d)return a;f=!0}}while(a=a.parentNode);return C()}function G(a,d){return Math.round(a.top)===Math.round(d.top)&&Math.round(a.left)===Math.round(d.left)&&Math.round(a.height)===Math.round(d.height)&&Math.round(a.width)===Math.round(d.width)}function E(a,d){return function(){if(!Ea){var f=arguments;1===f.length?
a.call(this,f[0]):a.apply(this,f);Ea=setTimeout(function(){Ea=void 0},d)}}}function b(a,d,f){a.scrollLeft+=d;a.scrollTop+=f}function l(a){var d=window.Polymer,f=window.jQuery||window.Zepto;return d&&d.dom?d.dom(a).cloneNode(!0):f?f(a).clone(!0)[0]:a.cloneNode(!0)}function L(a,d){k(a,"position","absolute");k(a,"top",d.top);k(a,"left",d.left);k(a,"width",d.width);k(a,"height",d.height)}function aa(a){k(a,"position","");k(a,"top","");k(a,"left","");k(a,"width","");k(a,"height","")}function fa(){var a=
[],d;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(d){if("none"!==k(d,"display")&&d!==x.ghost){a.push({target:d,rect:A(d)});var f=I({},a[a.length-1].rect);if(d.thisAnimationDuration){var b=S(d,!0);b&&(f.top-=b.f,f.left-=b.e)}d.fromRect=f}})},addAnimationState:function(d){a.push(d)},removeAnimationState:function(d){a.splice(Da(a,{target:d}),1)},animateAll:function(f){var h=this;if(this.options.animation){var b=!1,m=0;a.forEach(function(a){var d=
0,f=a.target,z=f.fromRect,l=A(f),q=f.prevFromRect,Ca=f.prevToRect;a=a.rect;var c=S(f,!0);c&&(l.top-=c.f,l.left-=c.e);f.toRect=l;f.thisAnimationDuration&&G(q,l)&&!G(z,l)&&(a.top-l.top)/(a.left-l.left)===(z.top-l.top)/(z.left-l.left)&&(d=Math.sqrt(Math.pow(q.top-a.top,2)+Math.pow(q.left-a.left,2))/Math.sqrt(Math.pow(q.top-Ca.top,2)+Math.pow(q.left-Ca.left,2))*h.options.animation);G(l,z)||(f.prevFromRect=z,f.prevToRect=l,d||(d=h.options.animation),h.animate(f,a,l,d));d&&(b=!0,m=Math.max(m,d),clearTimeout(f.animationResetTimer),
f.animationResetTimer=setTimeout(function(){f.animationTime=0;f.prevFromRect=null;f.fromRect=null;f.prevToRect=null;f.thisAnimationDuration=null},d),f.thisAnimationDuration=d)});clearTimeout(d);b?d=setTimeout(function(){"function"===typeof f&&f()},m):"function"===typeof f&&f();a=[]}else clearTimeout(d),"function"===typeof f&&f()},animate:function(a,d,b,m){if(m){k(a,"transition","");k(a,"transform","");var f=S(this.el),h=(d.left-b.left)/(f&&f.a||1);d=(d.top-b.top)/(f&&f.d||1);a.animatingX=!!h;a.animatingY=
!!d;k(a,"transform","translate3d("+h+"px,"+d+"px,0)");k(a,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:""));k(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){k(a,"transition","");k(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},m)}}}}function qa(a){var d=a.sortable,f=a.rootEl,h=a.name,b=a.targetEl,m=a.cloneEl,l=a.toEl,q=a.fromEl,c=a.oldIndex,e=a.newIndex,C=a.oldDraggableIndex,
p=a.newDraggableIndex,k=a.originalEvent,E=a.putSortable,L=a.extraEventProperties;if(d=d||f&&f[W]){var G=d.options,u="on"+h.charAt(0).toUpperCase()+h.substr(1);!window.CustomEvent||P||Y?(a=document.createEvent("Event"),a.initEvent(h,!0,!0)):a=new CustomEvent(h,{bubbles:!0,cancelable:!0});a.to=l||f;a.from=q||f;a.item=b||f;a.clone=m;a.oldIndex=c;a.newIndex=e;a.oldDraggableIndex=C;a.newDraggableIndex=p;a.originalEvent=k;a.pullMode=E?E.lastPutMode:void 0;var h=I({},L,Fa.getEventProperties(h,d)),A;for(A in h)a[A]=
h[A];f&&f.dispatchEvent(a);G[u]&&G[u].call(d,a)}}function M(a){qa(I({putSortable:V,cloneEl:R,targetEl:u,rootEl:Q,oldIndex:va,oldDraggableIndex:Ga,newIndex:ba,newDraggableIndex:na},a))}function x(a,d){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=d=D({},d);a[W]=this;var f={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,
invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,d){a.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==x.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Fa.initializePlugins(this,a,f);for(var h in f)h in d||(d[h]=f[h]);rb(d);for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this));if(this.nativeDraggable=d.forceFallback?!1:Ab)this.options.touchStartThreshold=1;d.supportPointer?g(a,"pointerdown",this._onTapStart):(g(a,"mousedown",this._onTapStart),g(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));Sa.push(this.el);d.store&&d.store.get&&this.sort(d.store.get(this)||[]);D(this,fa())}function Ha(a,d,f,h,b,m,l,q){var z,c=a[W],Ca=c.options.onMove,e;!window.CustomEvent||P||Y?(z=document.createEvent("Event"),z.initEvent("move",!0,!0)):z=new CustomEvent("move",{bubbles:!0,cancelable:!0});z.to=d;z.from=a;z.dragged=f;z.draggedRect=h;z.related=b||d;z.relatedRect=m||A(d);z.willInsertAfter=q;z.originalEvent=l;a.dispatchEvent(z);
Ca&&(e=Ca.call(c,z,l));return e}function wa(a){a.draggable=!1}function Ia(){bb=!1}function oa(a,d,f){f=A(v(f.el,f.options.draggable));return d?a.clientX>f.right+10||a.clientX<=f.right&&a.clientY>f.bottom&&a.clientX>=f.left:a.clientX>f.right&&a.clientY>f.top||a.clientX<=f.right&&a.clientY>f.bottom+10}function xa(a,d,f,h,b,m,l,q){a=h?a.clientY:a.clientX;var z=h?f.height:f.width,c=h?f.top:f.left;f=h?f.bottom:f.right;h=!1;if(!l)if(q&&Ta<z*b)if(!Ja&&(1===Ka?a>c+z*m/2:a<f-z*m/2)&&(Ja=!0),Ja)h=!0;else{if(1===
Ka?a<c+Ta:a>f-Ta)return-Ka}else if(a>c+z*(1-b)/2&&a<f-z*(1-b)/2)return d=H(u)<H(d)?1:-1,d;if(h||l)if(a<c+z*m/2||a>f-z*m/2)return a>c+z/2?1:-1;return 0}function ya(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var d=a.length,f=0;d--;)f+=a.charCodeAt(d);return f.toString(36)}function cb(a){Ua.length=0;a=a.getElementsByTagName("input");for(var d=a.length;d--;){var f=a[d];f.checked&&Ua.push(f)}}function ga(a){return setTimeout(a,0)}function Va(){T.forEach(function(a){clearInterval(a.pid)});
T=[]}function p(){}function db(){}function m(a,d){y.forEach(function(f,h){(h=d.children[f.sortableIndex+(a?Number(h):0)])?d.insertBefore(f,h):d.appendChild(f)})}function q(a,d){ca.forEach(function(f,h){(h=d.children[f.sortableIndex+(a?Number(h):0)])?d.insertBefore(f,h):d.appendChild(f)})}function ha(){y.forEach(function(a){a!==N&&a.parentNode&&a.parentNode.removeChild(a)})}var P=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Y=t(/Edge/i),sb=t(/firefox/i),eb=t(/safari/i)&&!t(/chrome/i)&&
!t(/android/i),La=t(/iP(ad|od|hone)/i),Bb=t(/chrome/i)&&t(/android/i),ob={capture:!1,passive:!1},pb=/\s+/g,Ea,W="Sortable"+(new Date).getTime(),Ma=[],fb={initializeByDefault:!0},Fa={mount:function(a){for(var d in fb)!fb.hasOwnProperty(d)||d in a||(a[d]=fb[d]);Ma.push(a)},pluginEvent:function(a,d,f){var h=this;this.eventCanceled=!1;f.cancel=function(){h.eventCanceled=!0};var b=a+"Global";Ma.forEach(function(h){if(d[h.pluginName]){if(d[h.pluginName][b])d[h.pluginName][b](I({sortable:d},f));if(d.options[h.pluginName]&&
d[h.pluginName][a])d[h.pluginName][a](I({sortable:d},f))}})},initializePlugins:function(a,d,f,h){Ma.forEach(function(h){var b=h.pluginName;if(a.options[b]||h.initializeByDefault)h=new h(a,d,a.options),h.sortable=a,h.options=a.options,a[b]=h,D(f,h.defaults)});for(var b in a.options)a.options.hasOwnProperty(b)&&(h=this.modifyOption(a,b,a.options[b]),"undefined"!==typeof h&&(a.options[b]=h))},getEventProperties:function(a,d){var f={};Ma.forEach(function(h){"function"===typeof h.eventProperties&&D(f,
h.eventProperties.call(d[h.pluginName],a))});return f},modifyOption:function(a,d,f){var h;Ma.forEach(function(b){a[b.pluginName]&&b.optionListeners&&"function"===typeof b.optionListeners[d]&&(h=b.optionListeners[d].call(a[b.pluginName],f))});return h}},Z=function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},h=f.evt,f=e(f,["evt"]);Fa.pluginEvent.bind(x)(a,d,I({dragEl:u,parentEl:U,ghostEl:B,rootEl:Q,nextEl:ra,lastDownEl:Wa,cloneEl:R,cloneHidden:pa,dragStarted:Na,putSortable:V,
activeSortable:x.active,originalEvent:h,oldIndex:va,oldDraggableIndex:Ga,newIndex:ba,newDraggableIndex:na,hideGhostForTarget:tb,unhideGhostForTarget:ub,cloneNowHidden:function(){pa=!0},cloneNowShown:function(){pa=!1},dispatchSortableEvent:function(a){M({sortable:d,name:a,originalEvent:h})}},f))};if("undefined"===typeof window||!window.document)throw Error("Sortable.js requires a window with a document");var u,U,B,Q,ra,Wa,R,pa,va,ba,Ga,na,Xa,V,za=!1,Ya=!1,Sa=[],sa,ka,gb,hb,vb,wb,Na,Aa,Ka,Ja=!1,Za=
!1,Ta,X,ib=[],bb=!1,Ua=[],xb=Y||P?"cssFloat":"float",Ab=!Bb&&!La&&"draggable"in document.createElement("div"),yb=function(){if(P)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),qb=function(a,d){var f=k(a),h=parseInt(f.width)-parseInt(f.paddingLeft)-parseInt(f.paddingRight)-parseInt(f.borderLeftWidth)-parseInt(f.borderRightWidth),b=ja(a,0,d);a=ja(a,1,d);var m=b&&k(b);d=a&&k(a);var l=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+
A(b).width,q=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+A(a).width;return"flex"===f.display?"column"===f.flexDirection||"column-reverse"===f.flexDirection?"vertical":"horizontal":"grid"===f.display?1>=f.gridTemplateColumns.split(" ").length?"vertical":"horizontal":b&&m["float"]&&"none"!==m["float"]?(f="left"===m["float"]?"left":"right",!a||"both"!==d.clear&&d.clear!==f?"horizontal":"vertical"):b&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===m.display||l>=h&&"none"===
f[xb]||a&&"none"===f[xb]&&l+q>h)?"vertical":"horizontal"},Cb=function(a,d,f){var h=f?a.left:a.top,b=f?a.right:a.bottom;a=f?a.width:a.height;var m=f?d.left:d.top,l=f?d.right:d.bottom;d=f?d.width:d.height;return h===m||b===l||h+a/2===m+d/2},Db=function(a,d){var f;Sa.some(function(h){if(!v(h)){var b=A(h),m=h[W].options.emptyInsertThreshold,l=a>=b.left-m&&a<=b.right+m,b=d>=b.top-m&&d<=b.bottom+m;if(m&&l&&b)return f=h}});return f},rb=function(a){function d(a,f){return function(h,b,m,l){var z=h.options.group.name&&
b.options.group.name&&h.options.group.name===b.options.group.name;if(null==a&&(f||z))return!0;if(null==a||!1===a)return!1;if(f&&"clone"===a)return a;if("function"===typeof a)return d(a(h,b,m,l),f)(h,b,m,l);h=(f?h:b).options.group.name;return!0===a||"string"===typeof a&&a===h||a.join&&-1<a.indexOf(h)}}var f={},h=a.group;h&&"object"==J(h)||(h={name:h});f.name=h.name;f.checkPull=d(h.pull,!0);f.checkPut=d(h.put);f.revertClone=h.revertClone;a.group=f},tb=function(){!yb&&B&&k(B,"display","none")},ub=function(){!yb&&
B&&k(B,"display","")};document.addEventListener("click",function(a){if(Ya)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ya=!1},!0);var ta=function(a){if(u){a=a.touches?a.touches[0]:a;var d=Db(a.clientX,a.clientY);if(d){var f={},h;for(h in a)a.hasOwnProperty(h)&&(f[h]=a[h]);f.target=f.rootEl=d;f.preventDefault=void 0;f.stopPropagation=void 0;d[W]._onDragOver(f)}}},Eb=function(a){u&&u.parentNode[W]._isOutsideThisEl(a.target)};
x.prototype={constructor:x,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Aa=null)},_getDirection:function(a,d){return"function"===typeof this.options.direction?this.options.direction.call(this,a,d,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var d=this,f=this.el,h=this.options,b=h.preventOnFilter,m=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,q=(l||a).target,c=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||
q,e=h.filter;cb(f);if(!(u||/mousedown|pointerdown/.test(m)&&0!==a.button||h.disabled||c.isContentEditable||(q=O(q,h.draggable,f,!1),q&&q.animated||Wa===q))){va=H(q);Ga=H(q,h.draggable);if("function"===typeof e){if(e.call(this,a,q,this)){M({sortable:d,rootEl:c,name:"filter",targetEl:q,toEl:f,fromEl:f});Z("filter",d,{evt:a});b&&a.cancelable&&a.preventDefault();return}}else if(e&&(e=e.split(",").some(function(h){if(h=O(c,h.trim(),f,!1))return M({sortable:d,rootEl:h,name:"filter",targetEl:q,fromEl:f,
toEl:f}),Z("filter",d,{evt:a}),!0}))){b&&a.cancelable&&a.preventDefault();return}h.handle&&!O(c,h.handle,f,!1)||this._prepareDragStart(a,l,q)}}},_prepareDragStart:function(a,d,f){var h=this,b=h.el,m=h.options,l=b.ownerDocument;if(f&&!u&&f.parentNode===b){var q=A(f);Q=b;u=f;U=u.parentNode;ra=u.nextSibling;Wa=f;Xa=m.group;x.dragged=u;sa={target:u,clientX:(d||a).clientX,clientY:(d||a).clientY};vb=sa.clientX-q.left;wb=sa.clientY-q.top;this._lastX=(d||a).clientX;this._lastY=(d||a).clientY;u.style["will-change"]=
"all";f=function(){Z("delayEnded",h,{evt:a});x.eventCanceled?h._onDrop():(h._disableDelayedDragEvents(),!sb&&h.nativeDraggable&&(u.draggable=!0),h._triggerDragStart(a,d),M({sortable:h,name:"choose",originalEvent:a}),w(u,m.chosenClass,!0))};m.ignore.split(",").forEach(function(a){c(u,a.trim(),wa)});g(l,"dragover",ta);g(l,"mousemove",ta);g(l,"touchmove",ta);g(l,"mouseup",h._onDrop);g(l,"touchend",h._onDrop);g(l,"touchcancel",h._onDrop);sb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=
!0);Z("delayStart",this,{evt:a});!m.delay||m.delayOnTouchOnly&&!d||this.nativeDraggable&&(Y||P)?f():x.eventCanceled?this._onDrop():(g(l,"mouseup",h._disableDelayedDrag),g(l,"touchend",h._disableDelayedDrag),g(l,"touchcancel",h._disableDelayedDrag),g(l,"mousemove",h._delayedDragTouchMoveHandler),g(l,"touchmove",h._delayedDragTouchMoveHandler),m.supportPointer&&g(l,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=setTimeout(f,m.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?
a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&wa(u);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._disableDelayedDrag);n(a,"touchend",this._disableDelayedDrag);n(a,"touchcancel",this._disableDelayedDrag);
n(a,"mousemove",this._delayedDragTouchMoveHandler);n(a,"touchmove",this._delayedDragTouchMoveHandler);n(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,d){d=d||"touch"==a.pointerType&&a;!this.nativeDraggable||d?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):d?g(document,"touchmove",this._onTouchMove):g(document,"mousemove",this._onTouchMove):(g(u,"dragend",this),g(Q,"dragstart",this._onDragStart));try{document.selection?ga(function(){document.selection.empty()}):
window.getSelection().removeAllRanges()}catch(f){}},_dragStarted:function(a,d){za=!1;if(Q&&u){Z("dragStarted",this,{evt:d});this.nativeDraggable&&g(document,"dragover",Eb);var f=this.options;!a&&w(u,f.dragClass,!1);w(u,f.ghostClass,!0);x.active=this;a&&this._appendGhost();M({sortable:this,name:"start",originalEvent:d})}else this._nulling()},_emulateDragOver:function(){if(ka){this._lastX=ka.clientX;this._lastY=ka.clientY;tb();for(var a=document.elementFromPoint(ka.clientX,ka.clientY),d=a;a&&a.shadowRoot;){a=
a.shadowRoot.elementFromPoint(ka.clientX,ka.clientY);if(a===d)break;d=a}u.parentNode[W]._isOutsideThisEl(a);if(d){do{if(d[W]){var f=void 0;if((f=d[W]._onDragOver({clientX:ka.clientX,clientY:ka.clientY,target:a,rootEl:d}))&&!this.options.dragoverBubble)break}a=d}while(d=d.parentNode)}ub()}},_onTouchMove:function(a){if(sa){var d=this.options,f=d.fallbackTolerance,h=d.fallbackOffset,d=a.touches?a.touches[0]:a,b=B&&S(B),m=B&&b&&b.a,l=B&&b&&b.d,q=La&&X&&ma(X),m=(d.clientX-sa.clientX+h.x)/(m||1)+(q?q[0]-
ib[0]:0)/(m||1),h=(d.clientY-sa.clientY+h.y)/(l||1)+(q?q[1]-ib[1]:0)/(l||1);if(!x.active&&!za){if(f&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<f)return;this._onDragStart(a,!0)}B&&(b?(b.e+=m-(gb||0),b.f+=h-(hb||0)):b={a:1,b:0,c:0,d:1,e:m,f:h},f="matrix(".concat(b.a,",").concat(b.b,",").concat(b.c,",").concat(b.d,",").concat(b.e,",").concat(b.f,")"),k(B,"webkitTransform",f),k(B,"mozTransform",f),k(B,"msTransform",f),k(B,"transform",f),gb=m,hb=h,ka=d);a.cancelable&&a.preventDefault()}},
_appendGhost:function(){if(!B){var a=this.options.fallbackOnBody?document.body:Q,d=A(u,!0,La,!0,a),f=this.options;if(La){for(X=a;"static"===k(X,"position")&&"none"===k(X,"transform")&&X!==document;)X=X.parentNode;X!==document.body&&X!==document.documentElement?(X===document&&(X=C()),d.top+=X.scrollTop,d.left+=X.scrollLeft):X=C();ib=ma(X)}B=u.cloneNode(!0);w(B,f.ghostClass,!1);w(B,f.fallbackClass,!0);w(B,f.dragClass,!0);k(B,"transition","");k(B,"transform","");k(B,"box-sizing","border-box");k(B,"margin",
0);k(B,"top",d.top);k(B,"left",d.left);k(B,"width",d.width);k(B,"height",d.height);k(B,"opacity","0.8");k(B,"position",La?"absolute":"fixed");k(B,"zIndex","100000");k(B,"pointerEvents","none");x.ghost=B;a.appendChild(B);k(B,"transform-origin",vb/parseInt(B.style.width)*100+"% "+wb/parseInt(B.style.height)*100+"%")}},_onDragStart:function(a,d){var f=this,b=a.dataTransfer,m=f.options;Z("dragStart",this,{evt:a});x.eventCanceled?this._onDrop():(Z("setupClone",this),x.eventCanceled||(R=l(u),R.draggable=
!1,R.style["will-change"]="",this._hideClone(),w(R,this.options.chosenClass,!1),x.clone=R),f.cloneId=ga(function(){Z("clone",f);x.eventCanceled||(f.options.removeCloneOnHide||Q.insertBefore(R,u),f._hideClone(),M({sortable:f,name:"clone"}))}),!d&&w(u,m.dragClass,!0),d?(Ya=!0,f._loopId=setInterval(f._emulateDragOver,50)):(n(document,"mouseup",f._onDrop),n(document,"touchend",f._onDrop),n(document,"touchcancel",f._onDrop),b&&(b.effectAllowed="move",m.setData&&m.setData.call(f,b,u)),g(document,"drop",
f),k(u,"transform","translateZ(0)")),za=!0,f._dragStartId=ga(f._dragStarted.bind(f,d,a)),g(document,"selectstart",f),Na=!0,eb&&k(document.body,"user-select","none"))},_onDragOver:function(a){function d(d,f){Z(d,g,I({evt:a,isOwner:L,axis:fa?"vertical":"horizontal",revert:C,dragRect:c,targetRect:e,canSort:P,fromSortable:n,target:q,completed:h,onMove:function(d,f){return Ha(Q,l,u,c,d,A(d),a,f)},changed:m},f))}function f(){d("dragOverAnimationCapture");g.captureAnimationState();g!==n&&n.captureAnimationState()}
function h(f){d("dragOverCompleted",{insertion:f});f&&(L?G._hideClone():G._showClone(g),g!==n&&(w(u,V?V.options.ghostClass:G.options.ghostClass,!1),w(u,p.ghostClass,!0)),V!==g&&g!==x.active?V=g:g===x.active&&V&&(V=null),n===g&&(g._ignoreWhileAnimating=q),g.animateAll(function(){d("dragOverAnimationComplete");g._ignoreWhileAnimating=null}),g!==n&&(n.animateAll(),n._ignoreWhileAnimating=null));if(q===u&&!u.animated||q===l&&!q.animated)Aa=null;p.dragoverBubble||a.rootEl||q===document||(u.parentNode[W]._isOutsideThisEl(a.target),
!f&&ta(a));!p.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return aa=!0}function m(){ba=H(u);na=H(u,p.draggable);M({sortable:g,name:"change",toEl:l,newIndex:ba,newDraggableIndex:na,originalEvent:a})}var l=this.el,q=a.target,c,e,C,p=this.options,E=p.group,G=x.active,L=Xa===E,P=p.sort,n=V||G,fa,g=this,aa=!1;if(!bb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();q=O(q,p.draggable,l,!0);d("dragOver");if(x.eventCanceled)return aa;if(u.contains(a.target)||q.animated&&q.animatingX&&
q.animatingY||g._ignoreWhileAnimating===q)return h(!1);Ya=!1;if(G&&!p.disabled&&(L?P||(C=!Q.contains(u)):V===this||(this.lastPutMode=Xa.checkPull(this,G,u,a))&&E.checkPut(this,G,u,a))){fa="vertical"===this._getDirection(a,q);c=A(u);d("dragOverValid");if(x.eventCanceled)return aa;if(C)return U=Q,f(),this._hideClone(),d("revert"),x.eventCanceled||(ra?Q.insertBefore(u,ra):Q.appendChild(u)),h(!0);E=v(l,p.draggable);if(!E||oa(a,fa,this)&&!E.animated){if(E===u)return h(!1);E&&l===a.target&&(q=E);q&&(e=
A(q));if(!1!==Ha(Q,l,u,c,q,e,a,!!q))return f(),l.appendChild(u),U=l,m(),h(!0)}else if(q.parentNode===l){e=A(q);var r=0,ha,r=u.parentNode!==l,t=!Cb(u.animated&&u.toRect||c,q.animated&&q.toRect||e,fa),E=fa?"top":"left",Y=ea(q,"top","top")||ea(u,"top","top"),S=Y?Y.scrollTop:void 0;Aa!==q&&(ha=e[E],Ja=!1,Za=!t&&p.invertSwap||r);var r=xa(a,q,e,fa,t?1:p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,Za,Aa===q),y;if(0!==r){t=H(u);do t-=r,y=U.children[t];while(y&&("none"===
k(y,"display")||y===B))}if(0===r||y===q)return h(!1);Aa=q;Ka=r;y=q.nextElementSibling;t=!1;t=1===r;r=Ha(Q,l,u,c,q,e,a,t);if(!1!==r){if(1===r||-1===r)t=1===r;bb=!0;setTimeout(Ia,30);f();t&&!y?l.appendChild(u):q.parentNode.insertBefore(u,t?y:q);Y&&b(Y,0,S-Y.scrollTop);U=u.parentNode;void 0===ha||Za||(Ta=Math.abs(ha-A(q)[E]));m();return h(!0)}}if(l.contains(u))return h(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){n(document,"mousemove",this._onTouchMove);n(document,"touchmove",
this._onTouchMove);n(document,"pointermove",this._onTouchMove);n(document,"dragover",ta);n(document,"mousemove",ta);n(document,"touchmove",ta)},_offUpEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._onDrop);n(a,"touchend",this._onDrop);n(a,"pointerup",this._onDrop);n(a,"touchcancel",this._onDrop);n(document,"selectstart",this)},_onDrop:function(a){var d=this.el,f=this.options;ba=H(u);na=H(u,f.draggable);Z("drop",this,{evt:a});U=u&&u.parentNode;ba=H(u);na=H(u,f.draggable);if(!x.eventCanceled&&
(Ja=Za=za=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(n(document,"drop",this),n(d,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),eb&&k(document.body,"user-select",""),a&&(Na&&(a.cancelable&&a.preventDefault(),!f.dropBubble&&a.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(Q===U||V&&"clone"!==V.lastPutMode)&&R&&R.parentNode&&R.parentNode.removeChild(R),
u&&(this.nativeDraggable&&n(u,"dragend",this),wa(u),u.style["will-change"]="",Na&&!za&&w(u,V?V.options.ghostClass:this.options.ghostClass,!1),w(u,this.options.chosenClass,!1),M({sortable:this,name:"unchoose",toEl:U,newIndex:null,newDraggableIndex:null,originalEvent:a}),Q!==U?(0<=ba&&(M({rootEl:U,name:"add",toEl:U,fromEl:Q,originalEvent:a}),M({sortable:this,name:"remove",toEl:U,originalEvent:a}),M({rootEl:U,name:"sort",toEl:U,fromEl:Q,originalEvent:a}),M({sortable:this,name:"sort",toEl:U,originalEvent:a})),
V&&V.save()):ba!==va&&0<=ba&&(M({sortable:this,name:"update",toEl:U,originalEvent:a}),M({sortable:this,name:"sort",toEl:U,originalEvent:a})),x.active)))){if(null==ba||-1===ba)ba=va,na=Ga;M({sortable:this,name:"end",toEl:U,originalEvent:a});this.save()}this._nulling()},_nulling:function(){Z("nulling",this);Q=u=U=B=ra=R=Wa=pa=sa=ka=Na=ba=na=va=Ga=Aa=Ka=V=Xa=x.dragged=x.ghost=x.clone=x.active=null;Ua.forEach(function(a){a.checked=!0});Ua.length=gb=hb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":u&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],d,f=this.el.children,b=0,m=f.length,l=this.options;b<m;b++)d=f[b],O(d,l.draggable,this.el,!1)&&a.push(d.getAttribute(l.dataIdAttr)||ya(d));return a},sort:function(a){var d={},f=this.el;this.toArray().forEach(function(a,b){b=f.children[b];O(b,this.options.draggable,f,!1)&&(d[a]=
b)},this);a.forEach(function(a){d[a]&&(f.removeChild(d[a]),f.appendChild(d[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,d){return O(a,d||this.options.draggable,this.el,!1)},option:function(a,d){var f=this.options;if(void 0===d)return f[a];var b=Fa.modifyOption(this,a,d);f[a]="undefined"!==typeof b?b:d;"group"===a&&rb(f)},destroy:function(){Z("destroy",this);var a=this.el;a[W]=null;n(a,"mousedown",this._onTapStart);n(a,"touchstart",this._onTapStart);n(a,
"pointerdown",this._onTapStart);this.nativeDraggable&&(n(a,"dragover",this),n(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();Sa.splice(Sa.indexOf(this.el),1);this.el=a=null},_hideClone:function(){pa||(Z("hideClone",this),x.eventCanceled||(k(R,"display","none"),this.options.removeCloneOnHide&&R.parentNode&&R.parentNode.removeChild(R),pa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():
pa&&(Z("showClone",this),x.eventCanceled||(Q.contains(u)&&!this.options.group.revertClone?Q.insertBefore(R,u):ra?Q.insertBefore(R,ra):Q.appendChild(R),this.options.group.revertClone&&this.animate(u,R),k(R,"display",""),pa=!1))}};g(document,"touchmove",function(a){(x.active||za)&&a.cancelable&&a.preventDefault()});x.utils={on:g,off:n,css:k,find:c,is:function(a,d){return!!O(a,d,a,!1)},extend:function(a,d){if(a&&d)for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);return a},throttle:E,closest:O,toggleClass:w,
clone:l,index:H,nextTick:ga,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:qb,getChild:ja};x.get=function(a){return a[W]};x.mount=function(){for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];d[0].constructor===Array&&(d=d[0]);d.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(x.utils=I({},x.utils,a.utils));Fa.mount(a)})};x.create=function(a,
d){return new x(a,d)};x.version="1.10.0";var T=[],Oa,jb,kb=!1,lb,mb,$a,Ba,nb=E(function(a,d,f,h){if(d.scroll){var m=(a.touches?a.touches[0]:a).clientX,l=(a.touches?a.touches[0]:a).clientY,q=d.scrollSensitivity,c=d.scrollSpeed,e=C(),p=!1,E;jb!==f&&(jb=f,Va(),Oa=d.scroll,E=d.scrollFn,!0===Oa&&(Oa=r(f,!0)));f=0;var G=Oa;do{var L=G,g=A(L),P=g.top,n=g.bottom,u=g.left,fa=g.right,t=g.width,g=g.height,aa=void 0,v=void 0,ha=L.scrollWidth,Y=L.scrollHeight,v=k(L),y=L.scrollLeft,w=L.scrollTop;L===e?(aa=t<ha&&
("auto"===v.overflowX||"scroll"===v.overflowX||"visible"===v.overflowX),v=g<Y&&("auto"===v.overflowY||"scroll"===v.overflowY||"visible"===v.overflowY)):(aa=t<ha&&("auto"===v.overflowX||"scroll"===v.overflowX),v=g<Y&&("auto"===v.overflowY||"scroll"===v.overflowY));u=aa&&(Math.abs(fa-m)<=q&&y+t<ha)-(Math.abs(u-m)<=q&&!!y);P=v&&(Math.abs(n-l)<=q&&w+g<Y)-(Math.abs(P-l)<=q&&!!w);if(!T[f])for(n=0;n<=f;n++)T[n]||(T[n]={});if(T[f].vx!=u||T[f].vy!=P||T[f].el!==L)if(T[f].el=L,T[f].vx=u,T[f].vy=P,clearInterval(T[f].pid),
0!=u||0!=P)p=!0,T[f].pid=setInterval(function(){h&&0===this.layer&&x.active._onTouchMove($a);var d=T[this.layer].vy?T[this.layer].vy*c:0,f=T[this.layer].vx?T[this.layer].vx*c:0;"function"===typeof E&&"continue"!==E.call(x.dragged.parentNode[W],f,d,a,$a,T[this.layer].el)||b(T[this.layer].el,f,d)}.bind({layer:f}),24);f++}while(d.bubbleScroll&&G!==e&&(G=r(G,!1)));kb=p}},30),zb=function(a){var d=a.originalEvent,f=a.putSortable,b=a.dragEl,m=a.activeSortable,l=a.dispatchSortableEvent,q=a.hideGhostForTarget;
a=a.unhideGhostForTarget;m=f||m;q();d=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:d;d=document.elementFromPoint(d.clientX,d.clientY);a();m&&!m.el.contains(d)&&(l("spill"),this.onSpill({dragEl:b,putSortable:f}))};p.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var d=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var f=ja(this.sortable.el,this.startIndex,this.options);f?this.sortable.el.insertBefore(d,
f):this.sortable.el.appendChild(d);this.sortable.animateAll();a&&a.animateAll()},drop:zb};D(p,{pluginName:"revertOnSpill"});db.prototype={onSpill:function(a){var d=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();d.parentNode&&d.parentNode.removeChild(d);a.animateAll()},drop:zb};D(db,{pluginName:"removeOnSpill"});var ia,y=[],ca=[],Pa,la,Qa=!1,da=!1,Ra=!1,N,ua,ab;x.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===
a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):a.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},
drop:function(){this.sortable.nativeDraggable?n(document,"dragover",this._handleAutoScroll):(n(document,"pointermove",this._handleFallbackAutoScroll),n(document,"touchmove",this._handleFallbackAutoScroll),n(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Ba);Va();clearTimeout(Ea);Ea=void 0},nulling:function(){$a=jb=Oa=kb=Ba=lb=mb=null;T.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,f){var d=this,b=(a.touches?a.touches[0]:
a).clientX,m=(a.touches?a.touches[0]:a).clientY,l=document.elementFromPoint(b,m);$a=a;if(f||Y||P||eb){nb(a,this.options,l,f);var q=r(l,!0);!kb||Ba&&b===lb&&m===mb||(Ba&&clearInterval(Ba),Ba=setInterval(function(){var h=r(document.elementFromPoint(b,m),!0);h!==q&&(q=h,Va());nb(a,d.options,h,f)},10),lb=b,mb=m)}else this.options.bubbleScroll&&r(l,!0)!==C()?nb(a,this.options,r(l,!1),!1):Va()}};return D(a,{pluginName:"scroll",initializeByDefault:!0})});x.mount(db,p);x.mount(new function(){function a(){this.defaults=
{swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(a){ia=a.dragEl},dragOverValid:function(a){var d=a.completed,b=a.target,m=a.onMove,l=a.changed,q=a.cancel;if(a.activeSortable.options.swap){var c=this.sortable.el;a=this.options;b&&b!==c&&(c=ia,!1!==m(b)?(w(b,a.swapClass,!0),ia=b):ia=null,c&&c!==ia&&w(c,a.swapClass,!1));l();d(!0);q()}},drop:function(a){var d=a.activeSortable,b=a.putSortable;a=a.dragEl;var m=b||this.sortable,l=this.options;ia&&w(ia,l.swapClass,!1);if(ia&&(l.swap||
b&&b.options.swap)&&a!==ia){m.captureAnimationState();m!==d&&d.captureAnimationState();var b=ia,l=a.parentNode,q=b.parentNode,c,e;l&&q&&!l.isEqualNode(b)&&!q.isEqualNode(a)&&(c=H(a),e=H(b),l.isEqualNode(q)&&c<e&&e++,l.insertBefore(b,l.children[c]),q.insertBefore(a,q.children[e]));m.animateAll();m!==d&&d.animateAll()}},nulling:function(){ia=null}};return D(a,{pluginName:"swap",eventProperties:function(){return{swapItem:ia}}})});x.mount(new function(){function a(a){for(var d in this)"_"===d.charAt(0)&&
"function"===typeof this[d]&&(this[d]=this[d].bind(this));a.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag));g(document,"keydown",this._checkKeyDown);g(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(d,f){var b="";y.length&&la===a?y.forEach(function(a,d){b+=(d?", ":"")+a.textContent}):b=f.textContent;d.setData("Text",
b)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){N=a.dragEl},delayEnded:function(){this.isMultiDrag=~y.indexOf(N)},setupClone:function(a){var d=a.sortable;a=a.cancel;if(this.isMultiDrag){for(var b=0;b<y.length;b++)ca.push(l(y[b])),ca[b].sortableIndex=y[b].sortableIndex,ca[b].draggable=!1,ca[b].style["will-change"]="",w(ca[b],this.options.selectedClass,!1),y[b]===N&&w(ca[b],this.options.chosenClass,!1);d._hideClone();a()}},clone:function(a){var d=a.sortable,b=a.rootEl,
m=a.dispatchSortableEvent;a=a.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&y.length&&la===d&&(q(!0,b),m("clone"),a())},showClone:function(a){var d=a.cloneNowShown,b=a.cancel;this.isMultiDrag&&(q(!1,a.rootEl),ca.forEach(function(a){k(a,"display","")}),d(),ab=!1,b())},hideClone:function(a){var d=this,b=a.cloneNowHidden;a=a.cancel;this.isMultiDrag&&(ca.forEach(function(a){k(a,"display","none");d.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),b(),ab=!0,a())},dragStartGlobal:function(a){!this.isMultiDrag&&
la&&la.multiDrag._deselectMultiDrag();y.forEach(function(a){a.sortableIndex=H(a)});y=y.sort(function(a,d){return a.sortableIndex-d.sortableIndex});Ra=!0},dragStarted:function(a){var d=this;a=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){y.forEach(function(a){a!==N&&k(a,"position","absolute")});var b=A(N,!1,!0,!0);y.forEach(function(a){a!==N&&L(a,b)});Qa=da=!0}a.animateAll(function(){Qa=da=!1;d.options.animation&&y.forEach(function(a){aa(a)});
d.options.sort&&ha()})}},dragOver:function(a){var d=a.target,b=a.completed;a=a.cancel;da&&~y.indexOf(d)&&(b(!1),a())},revert:function(a){var d=a.fromSortable,b=a.rootEl,l=a.sortable,q=a.dragRect;1<y.length&&(y.forEach(function(a){l.addAnimationState({target:a,rect:da?A(a):q});aa(a);a.fromRect=q;d.removeAnimationState(a)}),da=!1,m(!this.options.removeCloneOnHide,b))},dragOverCompleted:function(a){var d=a.sortable,b=a.isOwner,m=a.activeSortable,l=a.parentEl,q=a.putSortable,c=this.options;if(a.insertion){b&&
m._hideClone();Qa=!1;if(c.animation&&1<y.length&&(da||!b&&!m.options.sort&&!q)){var e=A(N,!1,!0,!0);y.forEach(function(a){a!==N&&(L(a,e),l.appendChild(a))});da=!0}b||(da||ha(),1<y.length?(a=ab,m._showClone(d),m.options.animation&&!ab&&a&&ca.forEach(function(a){m.addAnimationState({target:a,rect:ua});a.fromRect=ua;a.thisAnimationDuration=null})):m._showClone(d))}},dragOverAnimationCapture:function(a){var d=a.dragRect,b=a.isOwner;a=a.activeSortable;y.forEach(function(a){a.thisAnimationDuration=null});
a.options.animation&&!b&&a.multiDrag.isMultiDrag&&(ua=D({},d),d=S(N,!0),ua.top-=d.f,ua.left-=d.e)},dragOverAnimationComplete:function(){da&&(da=!1,ha())},drop:function(a){var d=a.originalEvent,b=a.rootEl,m=a.parentEl,l=a.sortable,q=a.dispatchSortableEvent,c=a.oldIndex,e=(a=a.putSortable)||this.sortable;if(d){var p=this.options,C=m.children;if(!Ra)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),w(N,p.selectedClass,!~y.indexOf(N)),~y.indexOf(N))y.splice(y.indexOf(N),1),Pa=null,
qa({sortable:l,rootEl:b,name:"deselect",targetEl:N,originalEvt:d});else{y.push(N);qa({sortable:l,rootEl:b,name:"select",targetEl:N,originalEvt:d});if(d.shiftKey&&Pa&&l.el.contains(Pa)){var E=H(Pa),L=H(N);if(~E&&~L&&E!==L){var G;L>E?(G=E,E=L):(G=L,E+=1);for(;G<E;G++)~y.indexOf(C[G])||(w(C[G],p.selectedClass,!0),y.push(C[G]),qa({sortable:l,rootEl:b,name:"select",targetEl:C[G],originalEvt:d}))}}else Pa=N;la=e}if(Ra&&this.isMultiDrag){if((m[W].options.sort||m!==b)&&1<y.length){var g=A(N),k=H(N,":not(."+
this.options.selectedClass+")");!Qa&&p.animation&&(N.thisAnimationDuration=null);e.captureAnimationState();if(!Qa&&(p.animation&&(N.fromRect=g,y.forEach(function(a){a.thisAnimationDuration=null;if(a!==N){var d=da?A(a):g;a.fromRect=d;e.addAnimationState({target:a,rect:d})}})),ha(),y.forEach(function(a){C[k]?m.insertBefore(a,C[k]):m.appendChild(a);k++}),c===H(N))){var n=!1;y.forEach(function(a){a.sortableIndex!==H(a)&&(n=!0)});n&&q("update")}y.forEach(function(a){aa(a)});e.animateAll()}la=e}(b===m||
a&&"clone"!==a.lastPutMode)&&ca.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})}},nullingGlobal:function(){this.isMultiDrag=Ra=!1;ca.length=0},destroyGlobal:function(){this._deselectMultiDrag();n(document,"pointerup",this._deselectMultiDrag);n(document,"mouseup",this._deselectMultiDrag);n(document,"touchend",this._deselectMultiDrag);n(document,"keydown",this._checkKeyDown);n(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(Ra||la!==this.sortable||a&&O(a.target,
this.options.draggable,this.sortable.el,!1)||a&&0!==a.button))for(;y.length;){var d=y[0];w(d,this.options.selectedClass,!1);y.shift();qa({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:d,originalEvt:a})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return D(a,{pluginName:"multiDrag",utils:{select:function(a){var d=a.parentNode[W];d&&d.options.multiDrag&&
!~y.indexOf(a)&&(la&&la!==d&&(la.multiDrag._deselectMultiDrag(),la=d),w(a,d.options.selectedClass,!0),y.push(a))},deselect:function(a){var d=a.parentNode[W],b=y.indexOf(a);d&&d.options.multiDrag&&~b&&(w(a,d.options.selectedClass,!1),y.splice(b,1))}},eventProperties:function(){var a=this,b=[],m=[];y.forEach(function(d){b.push({multiDragElement:d,index:d.sortableIndex});var f;f=da&&d!==N?-1:da?H(d,":not(."+a.options.selectedClass+")"):H(d);m.push({multiDragElement:d,index:f})});return{items:K(y),clones:[].concat(ca),
oldIndicies:b,newIndicies:m}},optionListeners:{multiDragKey:function(a){a=a.toLowerCase();"ctrl"===a?a="Control":1<a.length&&(a=a.charAt(0).toUpperCase()+a.substr(1));return a}}})});return x})},"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./ListItem ./support/layerListUtils".split(" "),
function(J,D,I,e,K,t,g,n,F,O,w){var k=K.ofType(O);return function(t){function c(c){c=t.call(this,c)||this;c._handles=new g;c.listItemCreatedFunction=null;c.operationalItems=new k;c.view=null;return c}I(c,t);c.prototype.initialize=function(){var c=this;this._handles.add(n.init(this,["view","view.ready"],function(){return c._viewHandles()}),"view")};c.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};Object.defineProperty(c.prototype,
"state",{get:function(){var c=this.get("view");return this.get("view.ready")?"ready":c?"loading":"disabled"},enumerable:!0,configurable:!0});c.prototype.triggerAction=function(c,e){c&&this.emit("trigger-action",{action:c,item:e})};c.prototype._createLayerViewHandles=function(c){var e=this,C=this._handles;C.remove("layer-views");this._compileList();c&&C.add(c.on("change",function(){return e._compileList()}),"layer-views")};c.prototype._createMapLayerHandles=function(c){var e=this,C=this._handles;C.remove("map-layers");
this._compileList();c&&C.add(c.on("change",function(){return e._compileList()}),"map-layers")};c.prototype._watchItemProperties=function(c){var e=this;this._handles.add([c.children.on("change",function(){e._modifyListItemChildren(c.children)})],"children-change-"+c.uid)};c.prototype._modifyListItemChildren=function(c){var e=this;c.forEach(function(c){return e._modifyListItem(c)})};c.prototype._modifyListItem=function(c){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:c});this._modifyListItemChildren(c.children)};c.prototype._createListItem=function(c){c=new O({layer:c,view:this.view});this._watchItemProperties(c);return c};c.prototype._removeAllItems=function(){var c=this._handles,e=this.operationalItems;e.forEach(function(e){c.remove("children-change-"+e.uid)});e.removeAll()};c.prototype._getViewableLayers=function(c){if(c)return c.filter(function(c){return"hide"!==w.findLayerListMode(c)})};c.prototype._watchLayersListMode=function(c){var e=this,g=this._handles;
g.remove("layer-list-mode");c&&c.forEach(function(c){g.add(n.watch(c,"listMode",function(){return e._compileList()}),"layer-list-mode")})};c.prototype._compileList=function(){var c=this.get("view.map.layers");this._watchLayersListMode(c);(c=this._getViewableLayers(c))&&c.length?(this._createNewItems(c),this._modifyOrRemoveItems(c),this._sortItems(c)):this._removeAllItems()};c.prototype._createNewItems=function(c){var e=this,g=this.operationalItems;c.forEach(function(c){g.find(function(e){return e.layer===
c})||g.add(e._createListItem(c))})};c.prototype._modifyOrRemoveItems=function(c){var e=this,g=this._handles,k=this.operationalItems;k.forEach(function(n){n&&(c.find(function(c){return n.layer===c})?e._modifyListItem(n):(g.remove("children-change-"+n.uid),k.remove(n)))})};c.prototype._sortItems=function(c){this.operationalItems.sort(function(e,g){e=c.indexOf(e.layer);g=c.indexOf(g.layer);return e>g?-1:e<g?1:0})};c.prototype._viewHandles=function(){var c=this,e=this._handles,g=this.view;e.remove(["map-layers",
"layer-views","view-layers"]);this._compileList();g&&g.ready&&e.add([n.init(this,"view.map.layers",function(e){return c._createMapLayerHandles(e)}),n.init(this,"view.layerViews",function(e){return c._createLayerViewHandles(e)}),n.init(this,"listItemCreatedFunction",function(){return c._compileList()})],"view-layers")};e([F.property()],c.prototype,"listItemCreatedFunction",void 0);e([F.property({type:k})],c.prototype,"operationalItems",void 0);e([F.property({dependsOn:["view.ready"],readOnly:!0})],
c.prototype,"state",null);e([F.property()],c.prototype,"view",void 0);return c=e([F.subclass("esri.widgets.LayerList.LayerListViewModel")],c)}(F.declared(t.EventedAccessor))})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/Sublayer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(J,D,I,e,K,t,g,n,F,O,w,k,S,c,C,A,ea,ja,v){J=n.ofType({key:"type",defaultKeyValue:"button",base:c,typeMap:{button:C,toggle:ea,slider:A}});var H=n.ofType(J);return function(c){function g(e){e=c.call(this,e)||this;e._handles=new F;e.actionsSections=new H;e.actionsOpen=!1;e.children=new (n.ofType(r));e.error=null;e.layer=null;e.layerView=null;e.open=!1;e.panel=null;e.parent=null;e.view=null;e.visible=null;return e}I(g,c);r=g;g.prototype.initialize=function(){var c=this;this._handles.add([w.init(this,
"layer",function(e){return c._watchLayerProperties(e)}),w.init(this,"view",function(e){return c._updateChildren(e)}),w.init(this,"panel",function(e){return c._setListItemOnPanel(e)}),w.init(this,["layer","view"],function(){return c._getLayerView()})])};g.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};g.prototype.castPanel=function(c){this.get("panel.open")&&!c.hasOwnProperty("open")&&(c.open=!0);return c?new ja(c):null};Object.defineProperty(g.prototype,"title",
{get:function(){var c=this.get("layer.layer");return(!c||c&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(c){void 0===c?this._clearOverride("title"):this._override("title",c)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){var c=this.layerView;return c?c.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visibleAtCurrentScale",{get:function(){return!v.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visibilityMode",{get:function(){return v.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};g.prototype._setListItemOnPanel=function(c){c&&
(c.listItem=this)};g.prototype._updateChildren=function(c){var e=this.children;e&&e.forEach(function(b){return b.view=c})};g.prototype._addChildren=function(c){var e=this;this.children.removeAll();if(c){this._handles.remove("child-list-mode");c.forEach(function(b){e._handles.add(w.watch(b,"listMode",function(){return e._addChildren(c)}),"child-list-mode")});var b=[];c.filter(function(b){return"hide"!==v.findLayerListMode(b)}).forEach(function(c){v.canDisplayLayer(c)&&(c=new r({layer:c,parent:e,view:e.view}),
b.unshift(c))});this.children.addMany(b)}};g.prototype._watchSublayerChanges=function(c){var e=this;c&&this._handles.add(c.on("change",function(){e._addChildren(c)}),"layer")};g.prototype._initializeChildLayers=function(c){this._addChildren(c);this._watchSublayerChanges(c)};g.prototype._watchLayerProperties=function(c){var e=this;if(this._handles&&(this._handles.remove("layer"),c))if(this._handles.add(w.watch(c,"listMode",function(){return e._watchLayerProperties(c)}),"layer"),"hide-children"===v.findLayerListMode(c))this.children.removeAll();
else{var b=v.getNormalizedChildLayerProperty(c);b&&this._handles.add(w.init(c,b,function(){c.hasOwnProperty(b)&&e._initializeChildLayers(c[b])}),"layer")}};g.prototype._getLayerView=function(){return t(this,void 0,void 0,function(){var c,e,b,l;return K(this,function(g){switch(g.label){case 0:c=this;e=c.layer;b=c.view;if(!e||!b)return[2];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,b.whenLayerView(e)];case 2:l=g.sent();if(l.layer!==this.layer)return[2];this._set("layerView",l);return[3,4];case 3:return g.sent(),
[3,4];case 4:return[2]}})})};g.prototype._isLayerUpdating=function(c){return c instanceof S?!1:c&&"loading"===c.loadStatus};var r;e([k.property({type:H})],g.prototype,"actionsSections",void 0);e([k.property()],g.prototype,"actionsOpen",void 0);e([k.property({type:n})],g.prototype,"children",void 0);e([k.aliasOf("layer.loadError?")],g.prototype,"error",void 0);e([k.property()],g.prototype,"layer",void 0);e([k.property({readOnly:!0})],g.prototype,"layerView",void 0);e([k.property()],g.prototype,"open",
void 0);e([k.property({type:ja})],g.prototype,"panel",void 0);e([k.cast("panel")],g.prototype,"castPanel",null);e([k.property()],g.prototype,"parent",void 0);e([k.property({dependsOn:["layer.layer?.loaded","layer.title"]})],g.prototype,"title",null);e([k.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],g.prototype,"updating",null);e([k.property({value:null})],g.prototype,"view",void 0);e([k.aliasOf("layer.visible")],g.prototype,"visible",void 0);e([k.property({dependsOn:["layer.minScale?",
"layer.maxScale?","view.scale"],readOnly:!0})],g.prototype,"visibleAtCurrentScale",null);e([k.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],g.prototype,"visibilityMode",null);return g=r=e([k.subclass("esri.widgets.LayerList.ListItem")],g)}(k.declared(O.IdentifiableMixin(g)))})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/assignHelper ../../geometry ../../PopupTemplate ../../renderers ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/lang ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/utils ./commonProperties ./FeatureType ./Field ./FieldsIndex ./fieldUtils ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../support/popupUtils ../../tasks/support/Query".split(" "),
function(J,D,I,e,K,t,g,n,F,O,w,k,S,c,C,A,ea,ja,v,H,ma,Da,r,G,E,b,l,L,aa,fa,qa,M,x,Ha,wa){function Ia(b){return b&&"esriSMS"===b.type}function oa(b,c,l){return{ignoreOrigin:!0,enabled:l&&l.writeSublayerStructure||!1}}function xa(b,c,l){return{enabled:l&&l.writeSublayerStructure||!1}}var ya=v.getLogger("esri.layers.support.Sublayer"),cb=0,ga=new Set;ga.add("layer");ga.add("parent");ga.add("loaded");ga.add("loadStatus");ga.add("loadError");ga.add("loadWarnings");return function(v){function p(b){b=v.call(this,
b)||this;b.fields=null;b.fullExtent=null;b.globalIdField=null;b.legendEnabled=!0;b.objectIdField=null;b.popupEnabled=!0;b.popupTemplate=null;b.title=null;b.typeIdField=null;b.types=null;return b}I(p,v);A=p;p.prototype.load=function(b){return g(this,void 0,void 0,function(){var c=this;return t(this,function(m){this.addResolvingPromise(function(){return g(c,void 0,void 0,function(){var c,m;return t(this,function(l){switch(l.label){case 0:if(!this.layer)throw new C("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",
{sublayer:this});c=null;return 2<this.originIdOf("url")||M.isDataLayerSource(this.source)?[4,k(this.url,n({responseType:"json",query:{f:"json"}},b))]:[3,2];case 1:return m=l.sent(),c=m.data,[3,4];case 2:return[4,this.layer.fetchSublayerInfo(this.id,b)];case 3:c=l.sent(),l.label=4;case 4:return c&&this.read({layerDefinition:c},{origin:"service"}),[2]}})})}());return[2,this]})})};Object.defineProperty(p.prototype,"definitionExpression",{set:function(b){this._setAndNotifyLayer("definitionExpression",
b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"fieldsIndex",{get:function(){return new aa(this.fields||[])},enumerable:!0,configurable:!0});p.prototype.readGlobalIdFieldFromService=function(b,c){c=c.layerDefinition||c;if(c.globalIdField)return c.globalIdField;if(c.fields)for(b=0,c=c.fields;b<c.length;b++){var m=c[b];if("esriFieldTypeGlobalID"===m.type)return m.name}};Object.defineProperty(p.prototype,"id",{get:function(){var b=this._get("id");return null==b?cb++:b},set:function(b){this._get("id")!==
b&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",b))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"labelingInfo",{set:function(b){this._setAndNotifyLayer("labelingInfo",b)},enumerable:!0,configurable:!0});p.prototype.writeLabelingInfo=function(b,c,l,e){b&&b.length&&(c.layerDefinition={drawingInfo:{labelingInfo:b.map(function(b){return b.write({},
e)})}})};Object.defineProperty(p.prototype,"labelsVisible",{set:function(b){this._setAndNotifyLayer("labelsVisible",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"layer",{set:function(b){this._set("layer",b);this.sublayers&&this.sublayers.forEach(function(c){return c.layer=b})},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"listMode",{set:function(b){this._set("listMode",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"minScale",{set:function(b){this._setAndNotifyLayer("minScale",
b)},enumerable:!0,configurable:!0});p.prototype.readMinScale=function(b,c){return c.minScale||c.layerDefinition&&c.layerDefinition.minScale||0};Object.defineProperty(p.prototype,"maxScale",{set:function(b){this._setAndNotifyLayer("maxScale",b)},enumerable:!0,configurable:!0});p.prototype.readMaxScale=function(b,c){return c.maxScale||c.layerDefinition&&c.layerDefinition.maxScale||0};p.prototype.readObjectIdFieldFromService=function(b,c){c=c.layerDefinition||c;if(c.objectIdField)return c.objectIdField;
if(c.fields)for(b=0,c=c.fields;b<c.length;b++){var l=c[b];if("esriFieldTypeOID"===l.type)return l.name}};Object.defineProperty(p.prototype,"opacity",{set:function(b){this._setAndNotifyLayer("opacity",b)},enumerable:!0,configurable:!0});p.prototype.readOpacity=function(b,c){b=c.layerDefinition;return 1-.01*(null!=b.transparency?b.transparency:b.drawingInfo.transparency)};p.prototype.writeOpacity=function(b,c,l,e){c.layerDefinition={drawingInfo:{transparency:100-100*b}}};p.prototype.writeParent=function(b,
c){c.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1};Object.defineProperty(p.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"renderer",{set:function(b){if(b)for(var c=0,l=b.getSymbols();c<l.length;c++)if(S.isSymbol3D(l[c])){ya.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",b)},enumerable:!0,configurable:!0});p.prototype.readRenderer=
function(b,c,l){if(b=c.layerDefinition.drawingInfo.renderer||void 0)(b=x.read(b,c,l)||void 0)||ya.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:l});return b};p.prototype.writeRenderer=function(b,c,l,e){c.layerDefinition={drawingInfo:{renderer:b.write({},e)}}};p.prototype.writeWebSceneRenderer=function(b,c,l,e){c.layerDefinition={drawingInfo:{renderer:b.write({},e)}}};Object.defineProperty(p.prototype,"source",{get:function(){return this._get("source")||
{mapLayerId:this.id,type:M.MAPLAYER}},set:function(b){this._setAndNotifyLayer("source",b)},enumerable:!0,configurable:!0});p.prototype.writeSource=function(b,c){c.layerDefinition={source:M.sourceToJSON(b)}};Object.defineProperty(p.prototype,"sublayers",{set:function(b){this._handleSublayersChange(b,this._get("sublayers"));this._set("sublayers",b)},enumerable:!0,configurable:!0});p.prototype.castSublayers=function(b){return G.default(c.ofType(A),b)};p.prototype.writeSublayers=function(b,c,l){this.get("sublayers.length")&&
(c[l]=this.sublayers.map(function(b){return b.id}).toArray().reverse())};p.prototype.readTypeIdField=function(b,c){c=c.layerDefinition||c;if(b=c.typeIdField)if(c=fa.getField(c.fields,b))return c.name;return null};Object.defineProperty(p.prototype,"url",{get:function(){var b=this.layer,c=this.source;if(!b)return null;if(M.isMapLayerSource(c))return b.parsedUrl.path+"/"+c.mapLayerId;c={layer:JSON.stringify({source:M.sourceToJSON(this.source)})};return b.parsedUrl.path+"/dynamicLayer?"+Da.objectToQuery(c)},
set:function(b){b?this._override("url",b):this._clearOverride("url")},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"visible",{set:function(b){this._setAndNotifyLayer("visible",b)},enumerable:!0,configurable:!0});p.prototype.writeVisible=function(b,c,l,e){c[l]=this.getAtOrigin("defaultVisibility","service")||b};p.prototype.clone=function(){var b=E.getProperties(this).store,c=new A;E.getProperties(c).store=b.clone(ga);return c};p.prototype.createPopupTemplate=function(b){return Ha.createPopupTemplate(this,
b)};p.prototype.createQuery=function(){return new wa({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};p.prototype.createFeatureLayer=function(){return g(this,void 0,void 0,function(){var b,c,l,e,g;return t(this,function(m){switch(m.label){case 0:if(this.hasOwnProperty("sublayers"))return[2,null];b=this.layer&&this.layer.parsedUrl;c=this.source;l=null;b&&(l=M.isMapLayerSource(c)?b.path+"/"+c.mapLayerId:b.path+"/dynamicLayer");return[4,ma.create(function(b){return J(["../FeatureLayer"],
b)})];case 1:return e=m.sent(),g=new e({url:l}),this.definitionExpression&&(g.definitionExpression=this.definitionExpression),2<this.originIdOf("labelingInfo")&&(g.labelingInfo=ea.clone(this.labelingInfo)),0<this.originIdOf("labelsVisible")&&(g.labelsVisible=this.labelsVisible),0<this.originIdOf("legendEnabled")&&(g.legendEnabled=this.legendEnabled),0<this.originIdOf("visible")&&(g.visible=this.visible),0<this.originIdOf("minScale")&&(g.minScale=this.minScale),0<this.originIdOf("maxScale")&&(g.maxScale=
this.maxScale),0<this.originIdOf("opacity")&&(g.opacity=this.opacity),0<this.originIdOf("popupTemplate")&&(g.popupTemplate=ea.clone(this.popupTemplate)),2<this.originIdOf("renderer")&&(g.renderer=ea.clone(this.renderer)),M.isDataLayerSource(this.source)&&(g.dynamicDataSource=ea.clone(this.source)),0<this.originIdOf("title")&&(g.title=this.title),[2,g]}})})};p.prototype.getFeatureType=function(b){var c=this.typeIdField;if(!c||!b)return null;var l=b.attributes?b.attributes[c]:void 0;if(null==l)return null;
var e=null;this.types.some(function(b){var c=b.id;if(null==c)return!1;c.toString()===l.toString()&&(e=b);return!!e});return e};p.prototype.getFieldDomain=function(b,c){return(c=this.getFeatureType(c&&c.feature))&&(c=c.domains&&c.domains[b])&&"inherited"!==c.type?c:this._getLayerDomain(b)};p.prototype.queryFeatures=function(b,c){var l=this;void 0===b&&(b=this.createQuery());return ma.all([ma.create(function(b){return J(["../../tasks/operations/query"],b)}),ma.create(function(b){return J(["../../tasks/support/FeatureSet"],
b)})]).then(function(e){var m=e[0].executeQuery,g=e[1];return m(l.url,wa.from(b),c).then(function(b){return g.fromJSON(b.data)})}).then(function(b){b&&b.features&&b.features.forEach(function(b){b.sourceLayer=l});return b})};p.prototype.toExportImageJSON=function(){var b=this,c={id:this.id,source:M.sourceToJSON(this.source)};this.definitionExpression&&(c.definitionExpression=this.definitionExpression);var l=["renderer","labelingInfo","opacity","labelsVisible"].reduce(function(c,l){c[l]=b.originIdOf(l);
return c},{});if(Object.keys(l).some(function(b){return 2<=l[b]})){var e=c.drawingInfo={};2<=l.renderer&&(e.renderer=this.renderer?this.renderer.toJSON():null);2<=l.labelsVisible&&(e.showLabels=this.labelsVisible);this.labelsVisible&&2<=l.labelingInfo&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map(function(b){return b.write({},{origin:"service"})}):null,e.showLabels=!0);2<=l.opacity&&(e.transparency=100-100*this.opacity);this._assignDefaultSymbolColors(e.renderer)}return c};p.prototype._assignDefaultSymbolColors=
function(b){this._forEachSimpleMarkerSymbols(b,function(b){b.color||"esriSMSX"!==b.style&&"esriSMSCross"!==b.style||(b.color=b.outline&&b.outline.color?b.outline.color:[0,0,0,0])})};p.prototype._forEachSimpleMarkerSymbols=function(b,c){if(b){var l=0,e="uniqueValueInfos"in b?b.uniqueValueInfos:"classBreakInfos"in b?b.classBreakInfos:[];for(;l<e.length;l++){var g=e[l];Ia(g.symbol)&&c(g.symbol)}"symbol"in b&&Ia(b.symbol)&&c(b.symbol);"defaultSymbol"in b&&Ia(b.defaultSymbol)&&c(b.defaultSymbol)}};p.prototype._setAndNotifyLayer=
function(b,c){var l=this.layer,e=this._get(b),g;switch(b){case "definitionExpression":g="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":g="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":g="supportsDynamicLayers"}g&&!1===this.get("layer.capabilities.exportMap."+g)?this._logLockedError(b,"capability not available 'layer.capabilities.exportMap."+g+"'"):"source"===b&&"not-loaded"!==this.loadStatus?
this._logLockedError(b,"'source' can't be changed after calling sublayer.load()"):(this._set(b,c),e!==c&&l&&l.emit&&l.emit("sublayer-update",{propertyName:b}))};p.prototype._handleSublayersChange=function(b,c){var l=this;c&&(c.forEach(function(b){b.parent=null;b.layer=null}),this.handles.removeAll());b&&(b.forEach(function(b){b.parent=l;b.layer=l.layer}),this.handles.add([b.on("after-add",function(b){b=b.item;b.parent=l;b.layer=l.layer}),b.on("after-remove",function(b){b=b.item;b.parent=null;b.layer=
null}),b.on("before-changes",function(b){var c=l.get("layer.capabilities.exportMap.supportsSublayersChanges");null==c||c||(ya.error(new C("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:l,layer:l.layer})),b.preventDefault())})]))};p.prototype._logLockedError=function(b,c){ya.error(new C("sublayer:locked","Property '"+b+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{reason:c,sublayer:this,layer:this.layer}))};
p.prototype._getLayerDomain=function(b){return(b=this.fieldsIndex.get(b))?b.domain:null};var A;e([r.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],p.prototype,"definitionExpression",null);e([r.property({type:[L],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],p.prototype,"fields",void 0);e([r.property({readOnly:!0,dependsOn:["fields"]})],p.prototype,"fieldsIndex",null);e([r.property({type:F.Extent,
json:{read:{source:"layerDefinition.extent"}}})],p.prototype,"fullExtent",void 0);e([r.property({type:String})],p.prototype,"globalIdField",void 0);e([r.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],p.prototype,"readGlobalIdFieldFromService",null);e([r.property({type:Number,json:{write:{ignoreOrigin:!0}}})],p.prototype,"id",null);e([r.property({value:null,type:[qa],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",
overridePolicy:xa}}})],p.prototype,"labelingInfo",null);e([r.writer("labelingInfo")],p.prototype,"writeLabelingInfo",null);e([r.property({type:Boolean,value:!0,json:{read:{source:"showLabels"},write:{target:"showLabels",overridePolicy:xa}}})],p.prototype,"labelsVisible",null);e([r.property({value:null})],p.prototype,"layer",null);e([r.property(b.legendEnabled)],p.prototype,"legendEnabled",void 0);e([r.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,
write:!0}}}})],p.prototype,"listMode",null);e([r.property({type:Number,value:0,json:{write:{enabled:!1,overridePolicy:oa}}})],p.prototype,"minScale",null);e([r.reader("minScale",["minScale","layerDefinition.minScale"])],p.prototype,"readMinScale",null);e([r.property({type:Number,value:0,json:{write:{enabled:!1,overridePolicy:oa}}})],p.prototype,"maxScale",null);e([r.reader("maxScale",["maxScale","layerDefinition.maxScale"])],p.prototype,"readMaxScale",null);e([r.property({type:String})],p.prototype,
"objectIdField",void 0);e([r.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],p.prototype,"readObjectIdFieldFromService",null);e([r.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:xa}}})],p.prototype,"opacity",null);e([r.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],p.prototype,"readOpacity",null);e([r.writer("opacity")],p.prototype,"writeOpacity",
null);e([r.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0,overridePolicy:oa}}})],p.prototype,"parent",void 0);e([r.writer("parent")],p.prototype,"writeParent",null);e([r.property(b.popupEnabled)],p.prototype,"popupEnabled",void 0);e([r.property({type:O,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",void 0);e([r.property({readOnly:!0,dependsOn:["fields","title"]})],p.prototype,"defaultPopupTemplate",null);e([r.property({types:w.rendererTypes,
value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:xa}}})],p.prototype,"renderer",null);e([r.reader("renderer",["layerDefinition.drawingInfo.renderer"])],p.prototype,"readRenderer",null);e([r.writer("renderer")],p.prototype,"writeRenderer",null);e([r.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:w.webSceneRendererTypes}})],p.prototype,"writeWebSceneRenderer",null);e([r.property({cast:M.castSource,json:{read:{source:"layerDefinition.source",
reader:M.sourceFromJSON},write:{target:"layerDefinition.source",overridePolicy:oa}}})],p.prototype,"source",null);e([r.writer("source")],p.prototype,"writeSource",null);e([r.property({value:null,json:{type:[G.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:oa}}})],p.prototype,"sublayers",null);e([r.cast("sublayers")],p.prototype,"castSublayers",null);e([r.writer("sublayers")],p.prototype,"writeSublayers",null);e([r.property({type:String,json:{read:{source:"name"},write:{target:"name",
allowNull:!0}}})],p.prototype,"title",void 0);e([r.property({type:String})],p.prototype,"typeIdField",void 0);e([r.reader("typeIdField",["layerDefinition.typeIdField"])],p.prototype,"readTypeIdField",null);e([r.property({type:[l],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],p.prototype,"types",void 0);e([r.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],
p.prototype,"url",null);e([r.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:oa}}})],p.prototype,"visible",null);e([r.writer("visible")],p.prototype,"writeVisible",null);return p=A=e([r.subclass("esri.layers.support.Sublayer")],p)}(r.declared(A.HandleOwnerMixin(H.MultiOriginJSONMixin(ja))))})},"esri/support/actions/ActionSlider":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(J,D,I,e,K,t){return function(g){function n(e){e=g.call(this,e)||this;e.displayValueEnabled=!1;e.max=1;e.min=0;e.step=.1;e.type="slider";e.value=null;return e}I(n,g);t=n;n.prototype.clone=function(){return new t({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};var t;e([K.property()],n.prototype,
"displayValueEnabled",void 0);e([K.property()],n.prototype,"max",void 0);e([K.property()],n.prototype,"min",void 0);e([K.property()],n.prototype,"step",void 0);e([K.property()],n.prototype,"value",void 0);return n=t=e([K.subclass("esri.support.Action.ActionSlider")],n)}(K.declared(t))})},"esri/widgets/LayerList/ListItemPanel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Handles ../../core/Identifiable ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(J,D,I,e,K,t,g,n,F,O,w){return function(k){function t(c){c=k.call(this,c)||this;c._legend=null;c._handles=new K;c.content=null;c.image=null;c.listItem=null;c.open=!1;c.visible=!0;return c}I(t,k);t.prototype.postInitialize=function(){var c=this;this.own([n.init(this,"content",function(e){return c._createLegend(e)})])};t.prototype.destroy=function(){var c=this._legend;c&&c.destroy();this._legend=null};Object.defineProperty(t.prototype,"className",{get:function(){var c=this.image,e=this._getFirstWidget();
return this._get("className")||!c&&e?e.iconClass:""},set:function(c){void 0===c?this._clearOverride("className"):this._override("className",c)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"title",{get:function(){var c=this._getFirstWidget();return this._get("title")||c?c.label:""},set:function(c){void 0===c?this._clearOverride("title"):this._override("title",c)},enumerable:!0,configurable:!0});t.prototype.render=function(){return w.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
t.prototype._renderContent=function(c){var e=this._legend,g=this.listItem;return c?"legend"===c?g&&g.view&&g.layer&&e?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:e},e.render()):null:"string"===typeof c?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:c,innerHTML:c}):w.isWidget(c)?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:c},c.render()):c instanceof HTMLElement?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:c,bind:c,afterCreate:this._attachToNode}):null:null};t.prototype._renderContents=function(){var c=this,e=this.content;return Array.isArray(e)?e.map(function(e){return c._renderContent(e)}):this._renderContent(e)};t.prototype._getLegendOptions=function(c){if(c){var e=c.layer;c=c.view;if(e&&c)return{view:c,layerInfos:[{layer:e,title:""}]}}};
t.prototype._createLegend=function(c){var e=this;this._hasLegend(c)&&!this._legend&&g.create(function(c){J(["../Legend"],c)}).then(function(c){var g=e._handles,t=new c(e._getLegendOptions(e.listItem));e._legend=t;e.notifyChange("className");e.notifyChange("title");c=n.init(e,["listItem.view","listItem.layer"],function(){return e._updateLegend(t)});g.add(c,"legends");e.scheduleRender()})};t.prototype._hasLegend=function(c){return"legend"===c?!0:Array.isArray(c)?c.some(function(c){return"legend"===
c}):!1};t.prototype._attachToNode=function(c){c.appendChild(this)};t.prototype._updateLegend=function(c){var e=this.listItem;if(e){var g=e.layer;c.view=e.view;c.layerInfos=[{layer:g,title:null}];this.scheduleRender()}};t.prototype._getWidget=function(c){return"legend"===c?this._legend:w.isWidget(c)?c:null};t.prototype._getFirstWidget=function(){var c=this,e=this.content;if(Array.isArray(e)){var g=null;e.some(function(e){(e=c._getWidget(e))&&(g=e);return!!e});return g}return this._getWidget(e)};e([F.property({dependsOn:["content",
"image"]})],t.prototype,"className",null);e([F.property(),w.renderable()],t.prototype,"content",void 0);e([F.property()],t.prototype,"image",void 0);e([F.property()],t.prototype,"listItem",void 0);e([F.property({dependsOn:["content"]})],t.prototype,"title",null);e([F.property(),w.renderable()],t.prototype,"open",void 0);e([F.property()],t.prototype,"visible",void 0);return t=e([F.subclass("esri.widgets.LayerList.ListItemPanel")],t)}(F.declared(t.IdentifiableMixin(O)))})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require",
"exports"],function(J,D){function I(e){if(e)return null!=e.listMode?e.listMode:void 0}function e(e){if(e)return null!=e.minScale?e.minScale:void 0}function K(e){if(e)return null!=e.maxScale?e.maxScale:void 0}Object.defineProperty(D,"__esModule",{value:!0});D.findLayerListMode=I;D.findLayerMinScale=e;D.findLayerMaxScale=K;D.findLayerVisibilityMode=function(e){if(!e)return"inherited";var g=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof g)return g?"independent":
"inherited";g=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof g?g?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"};D.getNormalizedChildLayerProperty=function(e){if(e&&"hide-children"!==e.listMode&&"wmts"!==e.type)return"group"===e.type?"layers":"sublayers"};D.canDisplayLayer=function(e){return"hide"!==I(e)};D.isLayerOutsideScaleRange=function(t,g){if(!t||isNaN(g))return!1;var n=e(t);t=K(t);n=!isNaN(n)&&0<n&&g>=n;g=!isNaN(t)&&0<t&&
g<=t;return n||g}})},"*now":function(J){J(['dojo/i18n!*preload*esri/widgets/nls/LayerList*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/Collection ../core/deprecate ../core/events ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ../libs/sortablejs/Sortable ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./support/widget".split(" "),function(J,D,I,e,K,t,g,n,F,O,w,k,S,c,C,A,ea,ja,v){function H(c){var e=
c.children;c.actionsOpen&&(c.actionsOpen=!1);e.forEach(function(b){return H(b)})}var ma=n.ofType(ja),Da=k.getLogger("esri.widgets.LayerList"),r={statusIndicators:!0};return function(n){function k(b){b=n.call(this,b)||this;b._handles=new w;b._sortable=null;b._sortableNode=null;b._focusSortUid=null;b.iconClass="esri-icon-layers";b.label=g.widgetLabel;b.listItemCreatedFunction=null;b.multipleSelectionEnabled=!1;b.operationalItems=null;b.selectionEnabled=!1;b.selectedItems=new ma;b.view=null;b.viewModel=
new ea;b.visibleElements=K({},r);return b}I(k,n);k.prototype.postInitialize=function(){var b=this,c=this.operationalItems;this.own(S.on(this,"operationalItems","change",function(){return b._itemsChanged(c)}),S.init(this,"selectionEnabled",function(){return b._toggleSorting()}))};k.prototype.destroy=function(){var b=this._sortable;b&&b.destroy();this._handles.destroy();this._handles=null};Object.defineProperty(k.prototype,"statusIndicatorsVisible",{set:function(b){F.deprecatedProperty(Da,"statusIndicatorsVisible",
{replacement:"visibleElements.statusIndicators",version:"4.15"});this.visibleElements=K({},this.visibleElements,{statusIndicators:b})},enumerable:!0,configurable:!0});k.prototype.castVisibleElements=function(b){return K({},r,b)};k.prototype.triggerAction=function(b,c){this.viewModel.triggerAction(b,c)};k.prototype.render=function(){var b=this,c,e=this._getItems(),k=this.get("viewModel.state"),e=0===e.length?v.tsx("div",{class:"esri-layer-list__no-items"},g.noItemsToDisplay):v.tsx("ul",{"aria-label":g.widgetLabel,
role:this.selectionEnabled?"listbox":void 0,afterCreate:this._sortNodeCreated,"data-node-ref":"_sortableNode",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},e.map(function(c){return b._renderItem(c,null)})),k=(c={},c["esri-hidden"]="loading"===k,c["esri-disabled"]="disabled"===k,c);return v.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",k)},e)};k.prototype._toggleSorting=function(){var b=this,
c=this._sortable,e=this._sortableNode,g=this.selectionEnabled;if(e)if(c)c.option("disabled",!g);else{var k=C.create(e,{dataIdAttr:"data-layer-uid",group:"root-layers",disabled:!g,onSort:function(){return b._sortLayersToItems(k.toArray())}});this._sortable=k}};k.prototype._sortNodeCreated=function(b){this._sortableNode=b;this._toggleSorting()};k.prototype._sortLayersToItems=function(b){var c=this.get("view.map.layers");c&&c.sort(function(c,e){c=b.indexOf(c.uid);e=b.indexOf(e.uid);return c>e?-1:c<e?
1:0})};k.prototype._getItems=function(){var b=this;return this.operationalItems.toArray().filter(function(c){return b.errorsVisible||!c.error})};k.prototype._getSingleActionButton=function(b){return b.actionsSections.reduce(function(b){return b}).filter(function(b){return b&&"button"===b.type}).getItemAt(0)};k.prototype._renderItem=function(b,c){var e=this,l,k,n,r,x,w,A=this.id+"_"+b.uid,C=A+"_actions",E=A+"__list",A=A+"__title",D=!!b.error,G=!!b.children.length&&!D,H=D?g.layerError:"",F=b.visibilityMode,
I=b.children&&b.children.toArray(),p=(l={},l["esri-layer-list__list--exclusive"]="exclusive"===F,l["esri-layer-list__list--inherited"]="inherited"===F,l["esri-layer-list__list--independent"]="inherited"!==F&&"exclusive"!==F,l);l=(k={},k["esri-layer-list__item--has-children"]=G,k["esri-layer-list__item--error"]=!!D,k["esri-layer-list__item--updating"]=b.updating&&!c&&this.visibleElements.statusIndicators,k["esri-layer-list__item--invisible-at-scale"]=!b.visibleAtCurrentScale,k["esri-layer-list__item--selectable"]=
this.selectionEnabled,k);var J=this._countActions(b.actionsSections),m=b.panel;k=m&&m.open?m.render():null;var m=m&&m.visible?this._renderPanelButton(m):null,q=(n={},n["esri-layer-list__item-actions-menu-item--active"]=b.actionsOpen,n),O=b.actionsOpen?t.close:t.open,P=1===J&&this._getSingleActionButton(b);n=P?this._renderAction({item:b,action:P,singleAction:!0}):null;n=(q=!P&&J?v.tsx("div",{key:"actions-menu-toggle","data-item":b,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,
class:this.classes("esri-layer-list__item-actions-menu-item",q),tabindex:"0",role:"button","aria-controls":C,"aria-label":O,title:O},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null)||m||n?v.tsx("div",{key:"esri-layer-list__actions-menu",class:"esri-layer-list__item-actions-menu"},m,n,q):null;C=J?this._renderActionsSections(b,b.actionsSections,C):null;F=G?v.tsx("ul",{key:"esri-layer-list__list-items",id:E,class:this.classes("esri-layer-list__list",p),"aria-expanded":b.open?
"true":"false",role:"exclusive"===F?"radiogroup":"group",hidden:b.open?null:!0},I.map(function(c){return e._renderItem(c,b)})):null;I=(r={},r["esri-layer-list__child-toggle--open"]=b.open,r);r=b.open?t.collapse:t.expand;E=G?v.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":b,key:"esri-layer-list__toggle-children",class:this.classes("esri-layer-list__child-toggle",I),tabindex:"0",role:"button","aria-controls":E,"aria-label":r,title:r},v.tsx("span",{"aria-hidden":"true",
class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null;r=this._createLabelNode(b,c,A);D=D?v.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},
v.tsx("span",null,H)):null;H=-1<this.selectedItems.indexOf(b);c=c?null:b.get("layer.uid");c=this.selectionEnabled?(x={bind:this,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":b,tabIndex:0,"aria-selected":H?"true":"false",role:"option","aria-labelledby":A},x["data-layer-uid"]=c,x):(w={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,tabIndex:void 0,"aria-selected":void 0,role:void 0,"aria-labelledby":void 0},w["data-layer-uid"]=void 0,w);return v.tsx("li",
K({key:b,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",l),"aria-labelledby":A},c),v.tsx("div",{key:"esri-layer-list__list-item-container",class:"esri-layer-list__item-container"},E,r,n),D,C,k,F)};k.prototype._focusListItem=function(b){var c=this._focusSortUid;b&&c&&b.dataset.layerUid===c&&(b.focus(),this._focusSortUid=null)};k.prototype._createLabelNode=function(b,c,e){var l,k=this.selectionEnabled;c=c&&c.visibilityMode;var n=
(l={},l["esri-icon-radio-checked"]="exclusive"===c&&b.visible,l["esri-icon-radio-unchecked"]="exclusive"===c&&!b.visible,l["esri-icon-visible"]="exclusive"!==c&&b.visible,l["esri-icon-non-visible"]="exclusive"!==c&&!b.visible,l),r="exclusive"===c?"radio":"switch";l=b.title||g.untitledLayer;var t=b.visibleAtCurrentScale?l:l+" ("+g.layerInvisibleAtScale+")";l=v.tsx("span",{key:"layer-title-container",id:e,title:t,"aria-label":t,class:"esri-layer-list__item-title"},l);n=v.tsx("span",{class:this.classes("esri-layer-list__item-toggle-icon",
n),"aria-hidden":"true"});e={bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":b,"data-parent-visibility":c,tabIndex:0,"aria-checked":b.visible?"true":"false",role:r,"aria-labelledby":e};r={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,"data-parent-visibility":void 0,tabIndex:void 0,"aria-checked":void 0,role:void 0,"aria-labelledby":void 0};t=k?e:r;k=v.tsx("div",K({key:b,class:"esri-layer-list__item-label"},k?r:e),v.tsx("span",K({class:"esri-layer-list__item-toggle"},
t),n),l);n=(e=!!b.error)?v.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null;return"inherited"===c||e?v.tsx("div",{key:b,class:"esri-layer-list__item-label"},n,l):k};k.prototype._renderPanelButton=function(b){var c,e,g=b.className,k=b.open,n=b.title,g=b.image||g?g:"esri-icon-default-action",r=this._getIconImageStyles(b),k=(c={},c["esri-layer-list__item-actions-menu-item--active"]=k,c);c=(e={},e["esri-layer-list__item-action-image"]=!!r["background-image"],
e);g&&(c[g]=!!g);return v.tsx("div",{key:b,bind:this,"data-panel":b,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",k),role:"button",tabindex:"0",title:n,"aria-label":n},v.tsx("span",{class:this.classes(c),styles:r}))};k.prototype._watchActionSectionChanges=function(b,c){var e=this,l="action-section"+c;this._handles.add(b.on("change",this.scheduleRender.bind(this)),l);b.forEach(function(b){return e._renderOnActionChanges(b,c)})};
k.prototype._renderOnActionChanges=function(b,c){var e=this;c="actions"+c;"toggle"===b.type?this._handles.add([S.init(b,"className image id title visible value".split(" "),function(){return e.scheduleRender()})],c):"slider"===b.type?this._handles.add([S.init(b,"className id title visible value displayValueEnabled max min step".split(" "),function(){return e.scheduleRender()})],c):this._handles.add([S.init(b,["className","image","id","title","visible"],function(){return e.scheduleRender()})],c)};k.prototype._renderOnItemChanges=
function(b){var c=this,e=b.uid,g="items"+e;this._handles.add([S.init(b,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className".split(" "),function(){return c.scheduleRender()}),b.actionsSections.on("change",function(){return c.scheduleRender()}),b.children.on("change",function(){return c.scheduleRender()})],g);b.children.forEach(function(b){return c._renderOnItemChanges(b)});b.actionsSections.forEach(function(b){return c._watchActionSectionChanges(b,
e)})};k.prototype._itemsChanged=function(b){var c=this;this._handles.removeAll();b.forEach(function(b){return c._renderOnItemChanges(b)});this.scheduleRender()};k.prototype._renderActionsSections=function(b,c,e){var l=this;c=c.toArray().map(function(c){return v.tsx("ul",{key:c,class:"esri-layer-list__item-actions-list"},l._renderActionSection(b,c))});return v.tsx("div",{role:"group","aria-expanded":b.actionsOpen?"true":"false",key:"esri-layer-list__actions-section",id:e,class:"esri-layer-list__item-actions",
hidden:b.actionsOpen?null:!0},c)};k.prototype._renderActionSection=function(b,c){var e=this;return(c&&c.toArray()).map(function(c){return e._renderAction({item:b,action:c})})};k.prototype._renderAction=function(b){var c,e,g=b.item,k=b.action;b=b.singleAction;var n=this._getIconImageStyles(k),r=k.active,t=k.className,w=k.disabled,A=k.title,t="button"!==k.type||k.image||t?t:"esri-icon-default-action",w=(c={},c["esri-layer-list__item-actions-menu-item"]=b&&"button"===k.type,c["esri-layer-list__item-action"]=
!b&&"toggle"!==k.type,c["esri-layer-list__action-toggle"]="toggle"===k.type,c["esri-layer-list__action-toggle--on"]="toggle"===k.type&&k.value,c["esri-disabled-element"]=w,c);c=(e={},e["esri-layer-list__item-action-image"]=!r&&!!n["background-image"],e["esri-icon-loading-indicator"]=r,e["esri-rotating"]=r,e);t&&(c[t]=!0);e=v.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",c),styles:n});c=b?null:v.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},
A);e=[e,c];return b?v.tsx("div",{bind:this,"data-item":g,"data-action":k,role:"button",key:k,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:w,tabindex:"0",title:A,"aria-label":A},e):v.tsx("li",{bind:this,"data-item":g,"data-action":k,key:k,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:w,tabindex:"0",role:"button",title:A,"aria-label":A},e)};k.prototype._countActions=function(b){return b.reduce(function(b,c){return b+c.length},0)};k.prototype._getIconImageStyles=
function(b){b="esri.widgets.LayerList.ListItemPanel"===b.declaredClass||"esri.support.Action.ActionButton"===b.declaredClass||"esri.support.Action.ActionToggle"===b.declaredClass?b.image:null;return{"background-image":b?'url("'+b+'")':null}};k.prototype._selectionKeydown=function(b){var c=O.eventKey(b);if(-1===["ArrowDown","ArrowUp"].indexOf(c))this._toggleSelection(b);else{b.stopPropagation();var e=this._sortable,g=-1<this.selectedItems.indexOf(b.currentTarget["data-item"]),k=e.toArray();b=k.indexOf(b.target.dataset.layerUid);
if(-1!==b){if("ArrowDown"===c){var n=b+1;if(n>=k.length)return;g?(k.splice(n,0,k.splice(b,1)[0]),e.sort(k),this._sortLayersToItems(e.toArray()),this._focusSortUid=k[n]):(this._focusSortUid=k[n],this.scheduleRender())}"ArrowUp"===c&&(n=b-1,-1>=n||(g?(k.splice(n,0,k.splice(b,1)[0]),e.sort(k),this._sortLayersToItems(e.toArray()),this._focusSortUid=k[n]):(this._focusSortUid=k[n],this.scheduleRender())))}}};k.prototype._toggleActionsOpen=function(b){var c=b.currentTarget["data-item"],e=!c.actionsOpen;
e&&this.operationalItems.forEach(function(b){return H(b)});c.actionsOpen=e;b.stopPropagation()};k.prototype._triggerPanel=function(b){var c=b.currentTarget["data-panel"];c&&(c.open=!c.open);b.stopPropagation()};k.prototype._triggerAction=function(b){var c=b.currentTarget,e=c["data-action"],c=c["data-item"];"toggle"===e.type&&(e.value=!e.value);this.triggerAction(e,c);b.stopPropagation()};k.prototype._toggleVisibility=function(b){var c=b.currentTarget,e=c.getAttribute("data-parent-visibility"),c=c["data-item"];
"exclusive"===e&&c.visible||(c.visible=!c.visible);b.stopPropagation()};k.prototype._toggleChildrenClick=function(b){var c=b.currentTarget["data-item"];c.open=!c.open;b.stopPropagation()};k.prototype._toggleSelection=function(b){b.stopPropagation();var c=this.selectedItems,e=this.multipleSelectionEnabled&&(b.metaKey||b.ctrlKey);b=b.currentTarget["data-item"];var g=-1<c.indexOf(b),k=c.length,n=g&&1===k;e?g?c.remove(b):c.add(b):k&&!n?(c.removeAll(),c.add(b)):g?c.remove(b):c.add(b)};e([c.property()],
k.prototype,"iconClass",void 0);e([c.property(),v.renderable()],k.prototype,"errorsVisible",void 0);e([c.property()],k.prototype,"label",void 0);e([c.aliasOf("viewModel.listItemCreatedFunction"),v.renderable()],k.prototype,"listItemCreatedFunction",void 0);e([c.property()],k.prototype,"multipleSelectionEnabled",void 0);e([c.aliasOf("viewModel.operationalItems"),v.renderable()],k.prototype,"operationalItems",void 0);e([c.property(),v.renderable()],k.prototype,"selectionEnabled",void 0);e([c.property(),
v.renderable()],k.prototype,"selectedItems",void 0);e([c.property(),v.renderable()],k.prototype,"statusIndicatorsVisible",null);e([c.aliasOf("viewModel.view"),v.renderable()],k.prototype,"view",void 0);e([v.vmEvent("trigger-action"),c.property({type:ea}),v.renderable("viewModel.state")],k.prototype,"viewModel",void 0);e([c.property(),v.renderable()],k.prototype,"visibleElements",void 0);e([c.cast("visibleElements")],k.prototype,"castVisibleElements",null);e([c.aliasOf("viewModel.triggerAction")],
k.prototype,"triggerAction",null);e([v.accessibleHandler()],k.prototype,"_toggleActionsOpen",null);e([v.accessibleHandler()],k.prototype,"_triggerPanel",null);e([v.accessibleHandler()],k.prototype,"_triggerAction",null);e([v.accessibleHandler()],k.prototype,"_toggleVisibility",null);e([v.accessibleHandler()],k.prototype,"_toggleChildrenClick",null);e([v.accessibleHandler()],k.prototype,"_toggleSelection",null);return k=e([c.subclass("esri.widgets.LayerList")],k)}(c.declared(A))});