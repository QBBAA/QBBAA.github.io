// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis ../core/has ../core/promiseUtils ../intl/moment".split(" "),function(M,f,p,n,m,k,r,l,e,g){function d(a,b){if(null===T)throw Error("Async Arcade must be enabled for this script");return l("csp-restrictions")||!1===c?function(c){return T.executeScript(a,c)}:p.compileScript(a,b,!0)}function u(a,c){void 0===c&&(c=[]);return k.parseScript(a,c)}function b(a,c){if(!0===
c.useAsync||!0===a.isAsync){if(null===T)throw Error("Async Arcade must be enabled for this script");return T.executeScript(a,c)}return n.executeScript(a,c)}function w(a,c){return n.referencesMember(a,c)}function z(a,c){void 0===c&&(c=[]);void 0===a.usesGeometry&&r.findScriptDependencies(a,c);return!0===a.usesGeometry}function A(){return Z?Z:Z=e.create(function(a,c){M(["../geometry/geometryEngine","./functions/geomsync"],function(c,b){O=!0;b.setGeometryEngine(c);a(!0)},function(a){c(a)})})}function J(){return null!==
L?L:L=p.enableAsyncSupport().then(function(){return e.create(function(a,c){M(["./arcadeAsyncRuntime"],function(b){try{T=b;b=0;for(var h=t;b<h.length;b++){var e=h[b];T.extend(e);p.extend(e,"async")}t=null;a(!0)}catch(aa){c(aa)}},c)})})}function ga(){return T?!0:!1}function ea(){return ja?ja:ja=J().then(function(){return e.create(function(a,c){M(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(b,h,e,
g,d){try{W=b,T.extend([h,e,g,d]),p.extend([h,e,g,d],"async"),E=!0,a(!0)}catch(X){c(X)}},c)})})}function x(a,c){void 0===c&&(c=[]);void 0===a.usesFeatureSet&&r.findScriptDependencies(a,c);return!0===a.usesFeatureSet}function a(a,c){if(c)for(var b=0;b<c.length;b++)if(w(a,c[b]))return!0;return!1}function h(){return null!==fa?fa:fa=g.loadMoment().then(function(a){m.MomentLibrary.Moment=a;return!0})}Object.defineProperty(f,"__esModule",{value:!0});var c=function(){if(l("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(pa){return!1}}(),
E=!1,O=!1,T=null,t=[];f.compileScript=function(a,c){return!0===c.useAsync||!0===a.isAsync?d(a,c):l("csp-restrictions")?function(c){return n.executeScript(a,c)}:p.compileScript(a,c)};f.extend=function(a){n.extend(a);p.extend(a,"sync");null===T?t.push(a):(p.extend(a,"async"),T.extend(a))};f.parseScript=u;f.validateScript=function(a,c,b){void 0===b&&(b="");return k.validateScript(a,c,b)};f.scriptCheck=function(a,c,b,h){void 0===h&&(h="");return k.scriptCheck(a,c,b,h)};f.parseAndExecuteScript=function(a,
c,h){void 0===h&&(h=[]);a=k.parseScript(a,h);return b(a,c)};f.executeScript=b;f.referencesMember=w;f.referencesFunction=function(a,c){return n.referencesFunction(a,c)};f.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return k.extractFieldLiterals(a,c)};f.scriptUsesGeometryEngine=z;var Z=null;f.enableGeometrySupport=A;var L=null;f.enableAsyncSupport=J;f.isFeatureSetSupportEnabled=function(){return E};f.isAsyncEnabled=ga;f.isGeometryEnabled=function(){return O};var ja=null;f.enableFeatureSetSupport=
ea;f.scriptUsesFeatureSet=x;f.scriptIsAsync=function(a,c){void 0===c&&(c=[]);void 0===a.isAsync&&r.findScriptDependencies(a,c);return!0===a.isAsync};f.loadScriptDependencies=function(c,b,g,d){void 0===g&&(g=[]);void 0===d&&(d=!1);return e.create(function(l,k){var w="string"===typeof c?u(c):c,m=[];m.push(h());w&&(!1===O&&(z(w)||d)&&m.push(A()),!1===ga()&&(!0===w.isAsync||b)&&m.push(J()),!1===E&&(x(w)||a(w,g))&&m.push(ea()));m?e.all(m).then(function(){l(!0)},k):l(!0)})};f.scriptTouchesGeometry=function(a){if(z(a))return!0;
a=r.findFunctionCalls(a);return-1<a.indexOf("geometry")||-1<a.indexOf("feature")?!0:!1};var W=null;f.featureSetUtils=function(){return W};f.load=h;var fa=null})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d,u,b,w,z,A,J,ga,ea,x,a,h,c,E){function O(a,c,b){try{return b(a,null,c)}catch(oa){throw oa;}}function T(a){return a instanceof Error?J.reject(a):J.reject(Error(a))}function t(a,c){try{switch(c.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return fa(a,c);case "VariableDeclaration":for(var b=[],h=0;h<c.declarations.length;h++)b.push(t(a,c.declarations[h]));return b.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return W(a,
c);case "FunctionDeclaration":var e=c.id.name.toLowerCase(),d={isAsync:a.isAsync,spatialReference:a.spatialReference,console:a.console,lrucache:a.lrucache,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<d.depthCounter)throw Error("Exceeded maximum function depth");for(var b="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
G=0;G<c.params.length;G++){var xa=c.params[G].name.toLowerCase(),B=ia(a);d.localScope._SymbolsMap[xa]=B;d.mangleMap[xa]=B;b+="lscope['"+B+"']\x3darguments["+G.toString()+"];\n"}!0===a.isAsync?(b=b+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(W(d,c.body)+"\n return lastStatement; "),b+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(b+=W(d,c.body)+"\n return lastStatement; }, runtimeCtx))",b+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==a.globalScope[e]?
h="gscope['"+e+"']\x3d"+b:void 0!==a.globalScope._SymbolsMap[e]?h="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+b:(B=ia(a),a.globalScope._SymbolsMap[e]=B,a.mangleMap[e]=B,h="gscope['"+B+"']\x3d"+b);return h;case "ReturnStatement":var P;P=null===c.argument?"return lc.voidOperation":"return "+t(a,c.argument)+"";return P;case "IfStatement":if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(g.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var l=t(a,c.test),k=ka(a),Aa="var "+k+" \x3d "+l+";\n if ("+k+" \x3d\x3d\x3d true) {\n"+ja(a,c.consequent)+"\n }\n",Aa=null!==c.alternate?Aa+("else if ("+k+"\x3d\x3d\x3dfalse)   { \n"+ja(a,c.alternate)+"}\n"):Aa+("else if ("+k+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Aa+="else { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var u;u="AssignmentExpression"===c.expression.type?"lastStatement \x3d lc.voidOperation; "+
t(a,c.expression)+"; \n ":"lastStatement \x3d "+t(a,c.expression)+"; ";return u;case "AssignmentExpression":return L(a,c);case "UpdateExpression":return Z(a,c);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":b="lastStatement \x3d lc.voidOperation; \n";null!==c.init&&(b+=t(a,c.init)+"; ");var w=ka(a),m=ka(a),b=b+("var "+w+" \x3d true; ")+"\n do { ";null!==c.update&&(b+=" if ("+w+"\x3d\x3d\x3dfalse) {\n "+t(a,c.update)+"  \n}\n "+w+"\x3dfalse; \n");
null!==c.test&&(b+="var "+m+" \x3d "+t(a,c.test)+"; ",b+="if ("+m+"\x3d\x3d\x3dfalse) { break; } else if ("+m+"!\x3d\x3dtrue) { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");b+=t(a,c.body);null!==c.update&&(b+="\n "+t(a,c.update));return b+("\n"+w+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var ba=ka(a),f=ka(a),Y=ka(a),I="var "+ba+" \x3d "+t(a,c.right)+";\n";"VariableDeclaration"===c.left.type&&(I+=t(a,c.left));
var z="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name,z=z.toLowerCase(),b="";null!==a.localScope&&(void 0!==a.localScope[z]?b="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(b="lscope['"+a.localScope._SymbolsMap[z]+"']"));""===b&&(void 0!==a.globalScope[z]?b="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&(b="gscope['"+a.globalScope._SymbolsMap[z]+"']"));I=I+("if ("+ba+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
ba+") || lc.isString("+ba+")) {")+("var "+f+"\x3d"+ba+".length; \n")+("for(var "+Y+"\x3d0; "+Y+"\x3c"+f+"; "+Y+"++) {\n");I+=b+"\x3d"+Y+";\n";I+=t(a,c.body);I+="\n}\n";I+=" lastStatement \x3d lc.voidOperation; \n";I+=" \n}\n";I+="else if (lc.isImmutableArray("+ba+")) {";I=I+("var "+f+"\x3d"+ba+".length(); \n")+("for(var "+Y+"\x3d0; "+Y+"\x3c"+f+"; "+Y+"++) {\n");I+=b+"\x3d"+Y+";\n";I+=t(a,c.body);I+="\n}\n";I+=" lastStatement \x3d lc.voidOperation; \n";I+=" \n}\n";I+="else if (( "+ba+" instanceof lang.Dictionary) || ( "+
ba+" instanceof lang.Feature)) {";I=I+("var "+f+"\x3d"+ba+".keys(); \n")+("for(var "+Y+"\x3d0; "+Y+"\x3c"+f+".length; "+Y+"++) {\n");I+=b+"\x3d"+f+"["+Y+"];\n";I+=t(a,c.body);I+="\n}\n";I+=" lastStatement \x3d lc.voidOperation; \n";I+=" \n}\n";a.isAsync&&(I+="else if (lc.isFeatureSet("+ba+")) {",I=I+("var "+f+"\x3d"+ba+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+Y+"\x3dlang. graphicToFeature( yield "+f+".next(),"+ba+"); "+Y+"!\x3dnull; "+Y+"\x3dlang. graphicToFeature( yield "+f+".next(),"+
ba+")) {\n")+(b+"\x3d"+Y+";\n"),I+=t(a,c.body),I+="\n}\n",I+=" lastStatement \x3d lc.voidOperation; \n",I+=" \n}\n");return I+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return H(a,c);case "MemberExpression":var r;try{b=void 0,b=!0===c.computed?t(a,c.property):"'"+c.property.name+"'",r="lang.member("+t(a,c.object)+","+b+")"}catch(F){throw F;}return r;case "Literal":return null===c.value||void 0===c.value?"null":JSON.stringify(c.value);case "ThisExpression":throw Error(g.nodeErrorMessage(c,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==c.callee.type)throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));var A=c.callee.name.toLowerCase(),h="";null!==a.localScope&&(void 0!==a.localScope[A]?h="lscope['"+A+"']":void 0!==a.localScope._SymbolsMap[A]&&(h="lscope['"+a.localScope._SymbolsMap[A]+"']"));""===h&&(void 0!==a.globalScope[A]?h="gscope['"+A+"']":void 0!==a.globalScope._SymbolsMap[A]&&(h="gscope['"+a.globalScope._SymbolsMap[A]+"']"));if(""!==h){e=
"[";for(d=0;d<c.arguments.length;d++)0<d&&(e+=", "),e+=t(a,c.arguments[d]);e+="]";b=a.isAsync?"(yield lang.callfunc("+h+","+e+",runtimeCtx) )":"lang.callfunc("+h+","+e+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(F){throw F;}return b;case "UnaryExpression":var E;try{E="lang.unary("+t(a,c.argument)+",'"+c.operator+"')"}catch(F){throw F;}return E;case "BinaryExpression":var n;try{n="lang.binary("+t(a,c.left)+","+t(a,c.right)+",'"+c.operator+"')"}catch(F){throw F;
}return n;case "LogicalExpression":var ta;try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(g.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(g.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===c.operator||"||"===c.operator)ta="(lang.logicalCheck("+t(a,c.left)+") "+c.operator+" lang.logicalCheck("+t(a,c.right)+
"))";else throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}catch(F){throw F;}return ta;case "ConditionalExpression":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{b=[];for(h=0;h<c.elements.length;h++)"Literal"===c.elements[h].type?b.push(t(a,c.elements[h])):b.push("lang.aCheck("+t(a,c.elements[h])+",'ArrayExpression')");G="["+b.join(",")+"]"}catch(F){throw F;}return G;case "ObjectExpression":b="lang.dictionary([";for(h=0;h<c.properties.length;h++){var la=
c.properties[h],x="Identifier"===la.key.type?"'"+la.key.name+"'":t(a,la.key),na=t(a,la.value);0<h&&(b+=",");b+="lang.strCheck("+x+",'ObjectExpression'),lang.aCheck("+na+", 'ObjectExpression')"}return b+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(F){throw F;}}function Z(a,c){var b=null,h="";if("MemberExpression"===c.argument.type)return b=t(a,
c.argument.object),h=!0===c.argument.computed?t(a,c.argument.property):"'"+c.argument.property.name+"'","lang.memberupdate("+b+","+h+",'"+c.operator+"',"+c.prefix+")";b=c.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lang.update(lscope, '"+b+"','"+c.operator+"',"+c.prefix+")";if(void 0!==a.localScope._SymbolsMap[b])return"lang.update(lscope, '"+a.localScope._SymbolsMap[b]+"','"+c.operator+"',"+c.prefix+")"}if(void 0!==a.globalScope[b])return"lang.update(gscope, '"+
b+"','"+c.operator+"',"+c.prefix+")";if(void 0!==a.globalScope._SymbolsMap[b])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[b]+"','"+c.operator+"',"+c.prefix+")";throw Error("Variable not recognised");}function L(a,c){var b=t(a,c.right),h=null,e="";if("MemberExpression"===c.left.type)return h=t(a,c.left.object),e=!0===c.left.computed?t(a,c.left.property):"'"+c.left.property.name+"'","lang.assignmember("+h+","+e+",'"+c.operator+"',"+b+")";h=c.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==
a.localScope[h])return"lscope['"+h+"']\x3dlang.assign("+b+",'"+c.operator+"', lscope['"+h+"'])";if(void 0!==a.localScope._SymbolsMap[h])return"lscope['"+a.localScope._SymbolsMap[h]+"']\x3dlang.assign("+b+",'"+c.operator+"', lscope['"+a.localScope._SymbolsMap[h]+"'])"}if(void 0!==a.globalScope[h])return"gscope['"+h+"']\x3dlang.assign("+b+",'"+c.operator+"', gscope['"+h+"'])";if(void 0!==a.globalScope._SymbolsMap[h])return"gscope['"+a.globalScope._SymbolsMap[h]+"']\x3dlang.assign("+b+",'"+c.operator+
"', gscope['"+a.globalScope._SymbolsMap[h]+"'])";throw Error("Variable not recognised");}function ja(a,c){return"BlockStatement"===c.type?t(a,c):"ReturnStatement"===c.type||"BreakStatement"===c.type||"ContinueStatement"===c.type?t(a,c)+"; ":"UpdateExpression"===c.type?"lastStatement \x3d "+t(a,c)+"; ":"ExpressionStatement"===c.type?t(a,c):"ObjectExpression"===c.type?"lastStatement \x3d "+t(a,c)+"; ":t(a,c)+"; "}function W(a,c){for(var b="",h=0;h<c.body.length;h++)b="ReturnStatement"===c.body[h].type?
b+(t(a,c.body[h])+"; \n"):"BreakStatement"===c.body[h].type?b+(t(a,c.body[h])+"; \n"):"ContinueStatement"===c.body[h].type?b+(t(a,c.body[h])+"; \n"):"UpdateExpression"===c.body[h].type?b+("lastStatement \x3d "+t(a,c.body[h])+"; \n"):"ObjectExpression"===c.body[h].type?b+("lastStatement \x3d "+t(a,c.body[h])+"; \n"):b+(t(a,c.body[h])+" \n");return b}function fa(a,c){var b=null===c.init?null:t(a,c.init);b===e.voidOperation&&(b=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+
c+"']\x3d"+b+"; ";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+b+"; ";var h=ia(a);a.localScope._SymbolsMap[c]=h;a.mangleMap[c]=h;return"lscope['"+h+"']\x3d"+b+"; "}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+b+"; ";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']\x3d"+b+"; ";h=ia(a);a.globalScope._SymbolsMap[c]=h;a.mangleMap[c]=h;return"gscope['"+h+"']\x3d"+b+"; "}function pa(a,c,b){c=c.toLowerCase();
switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(b=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(b=!1),b&&(ra++,c=a.spatialReference._arcadeCacheId=ra)),a=new m({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.cache._arcadeCacheId,void 0===c&&(ra++,c=ra,a.cache._arcadeCacheId=c),a=new r(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.cache._arcadeCacheId,void 0===c&&(ra++,c=ra,a.cache._arcadeCacheId=
c),a=new r(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.cache._arcadeCacheId,void 0===c&&(ra++,c=ra,a.cache._arcadeCacheId=c),a=new l(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(b,"RUNTIME","PROPERTYNOTFOUND"));}function H(a,c){try{var b=c.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+
b+"']";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']";throw Error(g.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(oa){throw oa;}}function ha(b){return null===b?"":e.isArray(b)||e.isImmutableArray(b)?"Array":e.isDate(b)?"Date":e.isString(b)?"String":e.isBoolean(b)?"Boolean":e.isNumber(b)?"Number":b instanceof
n?"Attachment":b instanceof p?"Portal":b instanceof m?"Dictionary":b instanceof k?"Feature":b instanceof a?"Point":b instanceof h?"Polygon":b instanceof c?"Polyline":b instanceof x?"Multipoint":b instanceof ga?"Extent":e.isFunctionParameter(b)?"Function":e.isFeatureSet(b)?"FeatureSet":e.isFeatureSetCollection(b)?"FeatureSetCollection":b===e.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function N(a,c,b,h){try{if(e.equalityTest(c[b],h))return c[b+1];var d=c.length-b;return 1===
d?c[b]:2===d?null:3===d?c[b+2]:N(a,c,b+2,h)}catch(ua){throw ua;}}function ma(a,c,b,h){try{if(!0===h)return c[b+1];if(3===c.length-b)return c[b+2];var d=c[b+2];if(!1===e.isBoolean(d))throw Error("WHEN needs boolean test conditions");return ma(a,c,b+2,d)}catch(ua){throw ua;}}function aa(a,c){var b=a.length,h=Math.floor(b/2);if(0===b)return[];if(1===b)return[a[0]];var e=aa(a.slice(0,h),c);a=aa(a.slice(h,b),c);for(b=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(h=c(e[0],a[0]),isNaN(h)&&(h=0),0>=
h?(b.push(e[0]),e=e.slice(1)):(b.push(a[0]),a=a.slice(1))):0<e.length?(b.push(e[0]),e=e.slice(1)):0<a.length&&(b.push(a[0]),a=a.slice(1));return b}function v(a,c){try{var b=a.length,h=Math.floor(b/2);if(0===b)return J.resolve([]);if(1===b)return J.resolve([a[0]]);var e=[v(a.slice(0,h),c),v(a.slice(h,b),c)];return J.all(e).then(function(a){return X(a[0],a[1],c,[])})}catch(ua){return J.reject(ua)}}function X(a,c,b,h){return J.create(function(e,d){0<a.length||0<c.length?0<a.length&&0<c.length?b(a[0],
c[0]).then(function(g){try{isNaN(g)&&(g=1),0>=g?(h.push(a[0]),a=a.slice(1)):(h.push(c[0]),c=c.slice(1)),X(a,c,b,h).then(function(a){e(a)},d)}catch(Ea){d(Ea)}},d):0<a.length?(h.push(a[0]),a=a.slice(1),X(a,c,b,h).then(function(a){e(a)},d)):0<c.length&&(h.push(c[0]),c=c.slice(1),X(a,c,b,h).then(function(a){e(a)},d)):e(h)})}function ia(a){a.symbols.symbolCounter++;return"_T"+a.symbols.symbolCounter.toString()}function ka(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function la(a,
c,b){var h={};a||(a={});b||(b={});h._SymbolsMap={};h.textformatting=1;h.infinity=1;h.pi=1;for(var e in c)h[e]=1;for(e in b)h[e]=1;for(e in a)h[e]=1;return h}function B(a,c){for(var b={mode:c,compiled:!0,functions:{},signatures:[],failDefferred:T,standardFunction:O,standardFunctionAsync:O,evaluateIdentifier:Y},h=0;h<a.length;h++)a[h].registerFunctions(b);if("sync"===c){for(var d in b.functions)V[d]=new e.NativeFunction(b.functions[d]),ba.prototype[d]=V[d];for(h=0;h<b.signatures.length;h++)g.addFunctionDeclaration(b.signatures[h],
"sync")}else{for(d in b.functions)P[d]=new e.NativeFunction(b.functions[d]),na.prototype[d]=P[d];for(h=0;h<b.signatures.length;h++)g.addFunctionDeclaration(b.signatures[h],"async")}}function Y(a,c){c=c.name;if("_SymbolsMap"===c)throw"Illegal";if(0<a.localStack.length){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c];var b=a.mangleMap[c];if(void 0!==b&&void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-
1][b]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==a.globalScope[c]||1===a.globalScope._SymbolsMap[c])return a.globalScope[c];c=a.mangleMap[c];if(void 0!==c)return a.globalScope[c]}function I(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var ra=0,V={};d.registerFunctions(V,O);A.registerFunctions(V,O);w.registerFunctions(V,O);u.registerFunctions(V,O);z.registerFunctions(V,O);V["typeof"]=function(a,c){return O(a,c,function(a,c,b){e.pcCheck(b,1,1);a=ha(b[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};V.iif=function(a,c){try{return O(a,c,function(a,c,b){e.pcCheck(b,3,3);if(!1===e.isBoolean(b[0]))throw Error("IF Function must have a boolean test condition");return b[0]?b[1]:b[2]})}catch(wa){throw wa;}};V.decode=function(a,c){try{return O(a,c,function(c,b,h){if(2>h.length)throw Error("Missing Parameters");if(2===h.length)return h[1];if(0===(h.length-1)%2)throw Error("Must have a default value result.");return N(a,h,1,h[0])})}catch(wa){throw wa;}};V.when=
function(a,c){try{return O(a,c,function(c,b,h){if(3>h.length)throw Error("Missing Parameters");if(0===h.length%2)throw Error("Must have a default value result.");c=h[0];if(!1===e.isBoolean(c))throw Error("WHEN needs boolean test conditions");return ma(a,h,0,c)})}catch(wa){throw wa;}};V.top=function(a,c){return O(a,c,function(a,c,b){e.pcCheck(b,2,2);if(e.isArray(b[0]))return e.toNumber(b[1])>=b[0].length?b[0].slice(0):b[0].slice(0,e.toNumber(b[1]));if(e.isImmutableArray(b[0]))return e.toNumber(b[1])>=
b[0].length()?b[0].slice(0):b[0].slice(0,e.toNumber(b[1]));throw Error("Top cannot accept this parameter type");})};V.first=function(a,c){return O(a,c,function(a,c,b){e.pcCheck(b,1,1);return e.isArray(b[0])?0===b[0].length?null:b[0][0]:e.isImmutableArray(b[0])?0===b[0].length()?null:b[0].get(0):null})};V.sort=function(a,c){return O(a,c,function(c,b,h){e.pcCheck(h,1,2);b=h[0];e.isImmutableArray(b)&&(b=b.toArray());if(!1===e.isArray(b))throw Error("Illegal Argument");if(1<h.length){if(!1===e.isFunctionParameter(h[1]))throw Error("Illegal Argument");
var d=function(a,b){return sa.callfunc(h[1],[a,b],c)};return a.isAsync?v(b,d):b=aa(b,function(a,c){return d(a,c)})}if(0===b.length)return[];for(var g={},G=0;G<b.length;G++){var B=ha(b[G]);""!==B&&(g[B]=!0)}if(!0===g.Array||!0===g.Dictionary||!0===g.Feature||!0===g.Point||!0===g.Polygon||!0===g.Polyline||!0===g.Multipoint||!0===g.Extent||!0===g.Function)return b.slice(0);var G=0,B="",P;for(P in g)G++,B=P;return b=1<G||"String"===B?aa(b,function(a,c){if(null===a||void 0===a||a===e.voidOperation)return null===
c||void 0===c||c===e.voidOperation?0:1;if(null===c||void 0===c||c===e.voidOperation)return-1;a=e.toString(a);c=e.toString(c);return a<c?-1:a===c?0:1}):"Number"===B?aa(b,function(a,c){return a-c}):"Boolean"===B?aa(b,function(a,c){return a===c?0:c?-1:1}):"Date"===B?aa(b,function(a,c){return c-a}):b.slice(0)})};var P={},G;for(G in V)P[G]=new e.NativeFunction(V[G]);b.registerFunctions(V,O);for(G in V)V[G]=new e.NativeFunction(V[G]);var ba=function(){};ba.prototype=V;var na=function(){};na.prototype=P;
f.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:function(a,c){for(var b=[],h=0;h<c.arguments.length;h++)b.push(t(a,c.arguments[h]));return b},standardFunction:O};f.extend=B;f.executeScript=function(a,c){return a(c)};f.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return g.findFieldLiterals(a)};f.validateScript=function(a,c){return g.validateScript(a,c,"sync")};f.referencesMember=function(a,c){return g.referencesMember(a,c)};f.referencesFunction=function(a,c){return g.referencesFunction(a,
c)};var ta=0,sa={error:function(a,c,b){throw Error(g.nodeErrorMessage(a,c,b));},__awaiter:function(a,c,b,h){return J.create(function(b,e){function d(a){try{B(h.next(a))}catch(za){e(za)}}function g(a){try{B(h["throw"](a))}catch(za){e(za)}}function B(a){a.done?b(a.value):a.value&&a.value.then?a.value.then(d,g):(ta++,0===ta%100?setTimeout(function(){ta=0;d(a.value)},0):d(a.value))}B((h=h.apply(a,c||[])).next())})},functionDepthchecker:function(a,c){return function(){c.depthCounter++;c.localStack.push([]);
if(64<c.depthCounter)throw Error("Exceeded maximum function depth");var b=a.apply(this,arguments);if(J.isPromiseLike(b))return b.then(function(a){c.depthCounter--;--c.localStack.length;return a});c.depthCounter--;--c.localStack.length;return b}},aCheck:function(a,c){if(e.isFunctionParameter(a))throw Error(g.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===e.voidOperation?null:a},Dictionary:m,Feature:k,dictionary:function(a){for(var c={},b=0;b<a.length;b+=2){if(e.isFunctionParameter(a[b+
1]))throw Error("Illegal Argument");if(!1===e.isString(a[b]))throw Error("Illegal Argument");c[a[b].toString()]=a[b+1]===e.voidOperation?null:a[b+1]}a=new m(c);a.immutable=!1;return a},strCheck:function(a){if(!1===e.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(e.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*e.toNumber(a);if("+"===c)return 1*e.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));
}if("-"===c)return-1*e.toNumber(a);if("+"===c)return 1*e.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:c,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===e.isBoolean(a))throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return a},logical:function(a,c,b){if(e.isBoolean(a)&&e.isBoolean(c))switch(b){case "||":return a||c;case "\x26\x26":return a&&c}throw Error(g.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(a,c,b){switch(b){case "\x3d\x3d":return e.equalityTest(a,c);case "\x3d":return e.equalityTest(a,c);case "!\x3d":return!e.equalityTest(a,c);case "\x3c":return e.greaterThanLessThan(a,c,b);case "\x3e":return e.greaterThanLessThan(a,c,b);case "\x3c\x3d":return e.greaterThanLessThan(a,c,b);case "\x3e\x3d":return e.greaterThanLessThan(a,c,b);case "+":return e.isString(a)||e.isString(c)?e.toString(a)+e.toString(c):e.toNumber(a)+
e.toNumber(c);case "-":return e.toNumber(a)-e.toNumber(c);case "*":return e.toNumber(a)*e.toNumber(c);case "/":return e.toNumber(a)/e.toNumber(c);case "%":return e.toNumber(a)%e.toNumber(c);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression",operator:b,left:a,right:c},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,b){switch(c){case "\x3d":return a===e.voidOperation?null:a;case "/\x3d":return e.toNumber(b)/e.toNumber(a);case "*\x3d":return e.toNumber(b)*e.toNumber(a);case "-\x3d":return e.toNumber(b)-
e.toNumber(a);case "+\x3d":return e.isString(b)||e.isString(a)?e.toString(b)+e.toString(a):e.toNumber(b)+e.toNumber(a);case "%\x3d":return e.toNumber(b)%e.toNumber(a);default:throw Error(g.nodeErrorMessage({type:"AssignmentExpression",operator:c,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,b,h){var d=e.toNumber(a[c]);a[c]="++"===b?d+1:d-1;return!1===h?d:"++"===b?d+1:d-1},graphicToFeature:function(a,c){return null===a?null:k.createFromGraphicLikeObject(a.geometry,
a.attributes,c)},memberupdate:function(a,c,b,h){var d;if(e.isArray(a))if(e.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");d=e.toNumber(a[c]);a[c]="++"===b?d+1:d-1}else throw Error("Invalid Parameter");else if(a instanceof m){if(!1===e.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))d=e.toNumber(a.field(c)),a.setField(c,"++"===b?d+1:d-1);else throw Error("Invalid Parameter");}else if(a instanceof k){if(!1===
e.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))d=e.toNumber(a.field(c)),a.setField(c,"++"===b?d+1:d-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===h?d:"++"===b?d+1:d-1},assignmember:function(a,c,b,h){if(e.isArray(a))if(e.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");if(c===a.length&&"\x3d"!==b)throw Error("Invalid Parameter");
a[c]=this.assign(h,b,a[c])}else throw Error("Invalid Parameter");else if(a instanceof m){if(!1===e.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(h,b,a.field(c)));else{if("\x3d"!==b)throw Error("Invalid Parameter");a.setField(c,this.assign(h,b,null))}}else if(a instanceof k){if(!1===e.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(h,b,a.field(c)));else{if("\x3d"!==b)throw Error("Invalid Parameter");
a.setField(c,this.assign(h,b,null))}}else{if(e.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(a instanceof m||a instanceof k){if(e.isString(c))return a.field(c);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a instanceof ea){if(e.isString(c))return pa(a,
c,"MemberExpression");throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isArray(a)){if(e.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(e.isString(a)){if(e.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(a)&&e.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,b){return a instanceof e.NativeFunction?a.fn(b,c):a instanceof e.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};f.compileScript=function(a,c,b){void 0===c&&(c=null);void 0===b&&(b=!1);null===c&&(c={vars:{},customfunctions:{}});c={isAsync:b,globalScope:la(c.vars,b?P:
V,c.customfunctions),localScope:null,mangleMap:{},console:I,lrucache:c.lrucache,services:c.services,symbols:{symbolCounter:0}};a=t(c,a.body[0].body);""===a&&(a="lc.voidOperation; ");c={lc:e,lang:sa,mangles:c.mangleMap,postProcess:function(a){a instanceof e.ReturnResult&&(a=a.value);a instanceof e.ImplicitResult&&(a=a.value);a===e.voidOperation&&(a=null);if(a===e.breakResult)throw Error("Cannot return BREAK");if(a===e.continueResult)throw Error("Cannot return CONTINUE");if(e.isFunctionParameter(a))throw Error("Cannot return FUNCTION");
return a},prepare:function(a,c){var b=a.spatialReference;if(null===b||void 0===b)b=new E({wkid:102100});var h=a.vars,e=a.customfunctions,d=c?new na:new ba;h||(h={});e||(e={});var g=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;d._SymbolsMap={textformatting:1,infinity:1,pi:1};d.textformatting=g;d.infinity=Number.POSITIVE_INFINITY;d.pi=Math.PI;for(var B in e)d[B]=e[B],d._SymbolsMap[B]=1;for(B in h)d._SymbolsMap[B]=1,d[B]=h[B]&&"esri.Graphic"===
h[B].declaredClass?k.createFromGraphic(h[B]):h[B];return{localStack:[],isAsync:c,mangleMap:this.mangles,spatialReference:b,globalScope:d,abortSignal:void 0===a.abortSignal||null===a.abortSignal?{aborted:!1}:a.abortSignal,localScope:null,services:a.services,console:a.console?a.console:I,lrucache:a.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",b?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(c)};f.enableAsyncSupport=function(){return J.create(function(a,c){M(["./functions/geomasync"],function(c){B([c],"async");a(!0)},function(a){c(a)})})}})},
"esri/arcade/ArcadePortal":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(M,f,p,n){return function(m){function k(k){var l=m.call(this)||this;l.immutable=!1;l.setField("url",k);l.immutable=!0;return l}p(k,m);return k}(n)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(M,f,p,n,m){function k(l){var e=null;if(null!==l)if(n.isNumber(l))e=n.toNumber(l);else if(n.isBoolean(l))e=
n.toBoolean(l);else if(n.isString(l))e=n.toString(l);else if(n.isDate(l))e=n.toDate(l);else if(n.isArray(l))for(var e=[],g=0;g<l.length;g++)e.push(k(l[g]));else{if(0===Object.keys(l).length)return null;e=new r;e.immutable=!1;for(var g=0,d=Object.keys(l);g<d.length;g++){var u=d[g];e.setField(u,k(l[u]))}e.immutable=!0}return e}var r=function(){function l(e){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof l?e.attributes:void 0===
e?{}:null===e?{}:e}l.prototype.field=function(e){var g=e.toLowerCase();e=this.attributes[e];if(void 0!==e)return e;for(var d in this.attributes)if(d.toLowerCase()===g)return this.attributes[d];throw Error("Field not Found");};l.prototype.setField=function(e,g){if(this.immutable)throw Error("Dictionary is Immutable");var d=e.toLowerCase();if(void 0===this.attributes[e])for(var k in this.attributes)if(k.toLowerCase()===d){this.attributes[k]=g;return}this.attributes[e]=g};l.prototype.hasField=function(e){var g=
e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var d in this.attributes)if(d.toLowerCase()===g)return!0;return!1};l.prototype.keys=function(){var e=[],g;for(g in this.attributes)e.push(g);return e=e.sort()};l.prototype.castToText=function(){var e="",g;for(g in this.attributes){""!==e&&(e+=",");var d=this.attributes[g];null==d?e+=JSON.stringify(g)+":null":n.isBoolean(d)||n.isNumber(d)||n.isString(d)?e+=JSON.stringify(g)+":"+JSON.stringify(d):d instanceof m?e+=JSON.stringify(g)+":"+n.toStringExplicit(d):
d instanceof p?e+=JSON.stringify(g)+":"+n.toStringExplicit(d):d instanceof Array?e+=JSON.stringify(g)+":"+n.toStringExplicit(d):d instanceof Date?e+=JSON.stringify(g)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(e+=JSON.stringify(g)+":"+d.castToText())}return"{"+e+"}"};l.convertObjectToArcadeDictionary=function(e){var g=new l;g.immutable=!1;for(var d in e)g.setField(d.toString(),k(e[d]));g.immutable=!0;return g};return l}();return r})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(M,f){return function(){function f(f){void 0===f&&(f=[]);this._elements=f}f.prototype.length=function(){return this._elements.length};f.prototype.get=function(f){return this._elements[f]};f.prototype.toArray=function(){for(var f=[],m=0;m<this.length();m++)f.push(this.get(m));return f};return f}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../core/promiseUtils ../geometry/support/coordsUtils ../core/maybe".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d,u,b,w,z,A){function J(a,c,b){return""===c||null===c||void 0===c||c===b||c===b?a:a=a.split(c).join(b)}function ga(a){return a instanceof v||a instanceof n||a instanceof X}function ea(c){return x(c)||h(c)||O(c)||a(c)||null===c||c===f.voidOperation||"number"===typeof c?!0:!1}function x(a){return"string"===typeof a||a instanceof String}function a(a){return"boolean"===typeof a}function h(a){return"number"===typeof a}function c(a){return a instanceof Array}function E(a){return a instanceof
m}function O(a){return a instanceof Date}function T(a,c){if(!1===isNaN(a)){if(void 0===c||null===c||""===c)return a.toString();c=J(c,"\u2030","");c=J(c,"\u00a4","");return p.format(a,{pattern:c})}return a.toString()}function t(a,c){a=f.MomentLibrary.Moment(a);return void 0===c||null===c||""===c?a.format():a.format(Z(c))}function Z(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function L(a,c,b){switch(b){case "\x3e":return a>c;case "\x3c":return a<c;case "\x3e\x3d":return a>=c;case "\x3c\x3d":return a<=
c}return!1}function ja(a,c){if(a===c||null===a&&c===f.voidOperation||null===c&&a===f.voidOperation)return!0;if(O(a)&&O(c))return a.getTime()===c.getTime();if(a instanceof k||a instanceof r)return a.equalityTest(c);if(a instanceof d&&c instanceof d){var b=void 0,h=void 0,b=a.cache._arcadeCacheId,h=c.cache._arcadeCacheId;if(void 0!==b&&null!==b)return b===h}return void 0!==a&&void 0!==c&&null!==a&&null!==c&&"object"===typeof a&&"object"===typeof c&&(a._arcadeCacheId===c._arcadeCacheId&&void 0!==a._arcadeCacheId&&
null!==a._arcadeCacheId||a._underlyingGraphic===c._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function W(b,d){if(x(b))return b;if(null===b)return"";if(h(b))return T(b,d);if(a(b))return b.toString();if(O(b))return t(b,d);if(b instanceof e)return JSON.stringify(b.toJSON());if(c(b)){d=[];for(var g=0;g<b.length;g++)d[g]=pa(b[g]);return"["+d.join(",")+"]"}if(b instanceof m){d=[];for(g=0;g<b.length();g++)d[g]=pa(b.get(g));return"["+d.join(",")+"]"}return null!==
b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():ga(b)?"object, Function":""}function fa(b,d){if(x(b))return b;if(null===b)return"";if(h(b))return T(b,d);if(a(b))return b.toString();if(O(b))return t(b,d);if(b instanceof e)return b instanceof l?'{"xmin":'+b.xmin.toString()+',"ymin":'+b.ymin.toString()+","+(b.hasZ?'"zmin":'+b.zmin.toString()+",":"")+(b.hasM?'"mmin":'+b.mmin.toString()+",":"")+'"xmax":'+b.xmax.toString()+',"ymax":'+b.ymax.toString()+","+(b.hasZ?'"zmax":'+b.zmax.toString()+
",":"")+(b.hasM?'"mmax":'+b.mmax.toString()+",":"")+'"spatialReference":'+N(b.spatialReference)+"}":N(b.toJSON(),function(a,c){return a.key===c.key?0:"spatialReference"===a.key?1:"spatialReference"===c.key||a.key<c.key?-1:a.key>c.key?1:0});if(c(b)){d=[];for(var g=0;g<b.length;g++)d[g]=pa(b[g]);return"["+d.join(",")+"]"}if(b instanceof m){d=[];for(g=0;g<b.length();g++)d[g]=pa(b.get(g));return"["+d.join(",")+"]"}return null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():ga(b)?"object, Function":
""}function pa(c){return null===c?"null":a(c)||h(c)||x(c)?JSON.stringify(c):c instanceof e||c instanceof m||c instanceof Array?fa(c):c instanceof Date?JSON.stringify(t(c,"")):null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():"null"}function H(b,d){return h(b)?b:null===b||""===b?0:O(b)?NaN:a(b)?b?1:0:c(b)||""===b||void 0===b?NaN:void 0!==d&&x(b)?(d=J(d,"\u2030",""),d=J(d,"\u00a4",""),p.parse(b,{pattern:d})):b===f.voidOperation?0:Number(b)}function ha(a,c){var b;c.fields.some(function(c){c.name===
a&&(b=c.domain);return!!b});return b}function N(a,c){c||(c={});"function"===typeof c&&(c={cmp:c});var b="boolean"===typeof c.cycles?c.cycles:!1,h=c.cmp&&function(a){return function(c){return function(b,h){return a({key:b,value:c[b]},{key:h,value:c[h]})}}}(c.cmp),d=[];return function V(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var c,e;if(Array.isArray(a)){e="[";for(c=
0;c<a.length;c++)c&&(e+=","),e+=V(a[c])||"null";return e+"]"}if(null===a)return"null";if(-1!==d.indexOf(a)){if(b)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var g=d.push(a)-1,B=Object.keys(a).sort(h&&h(a));e="";for(c=0;c<B.length;c++){var k=B[c],l=V(a[k]);l&&(e&&(e+=","),e+=JSON.stringify(k)+":"+l)}d.splice(g,1);return"{"+e+"}"}}(a)}function ma(a,c){if(c instanceof d)a.push(c.hasZ?c.hasM?[c.x,c.y,c.z,c.m]:[c.x,c.y,c.z]:[c.x,c.y]);else throw Error("Invalid Argument");
}Object.defineProperty(f,"__esModule",{value:!0});M=function(){return function(a){this.value=a}}();f.ReturnResultE=M;var aa=function(){return function(a){this.value=a}}();f.ImplicitResultE=aa;var v=function(){return function(a){this.fn=a}}();f.NativeFunctionE=v;var X=function(){return function(a){this.fn=a}}();f.SizzleFunctionE=X;f.NativeFunction=v;f.ImplicitResult=aa;f.ReturnResult=M;f.SizzleFunction=X;f.voidOperation={type:"VOID"};f.breakResult={type:"BREAK"};f.continueResult={type:"CONTINUE"};
f.multiReplace=J;f.isFunctionParameter=ga;f.isSimpleType=ea;f.defaultUndefined=function(a,c){return void 0===a?c:a};f.isString=x;f.isBoolean=a;f.isNumber=h;f.isArray=c;f.isFeatureSet=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)};f.isFeatureSetCollection=function(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)};f.isImmutableArray=E;f.isDate=O;f.pcCheck=function(a,c,b){if(a.length<
c||a.length>b)throw Error("Function called with wrong number of Parameters");};f.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var b=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===c?b:b&3|8).toString(16)})};f.formatNumber=T;f.formatDate=t;f.standardiseDateFormat=Z;f.greaterThanLessThan=function(c,b,d){if(null===c){if(null===b||b===f.voidOperation)return L(null,null,d);if(h(b))return L(0,b,d);if(x(b)||a(b))return L(0,
H(b),d);if(O(b))return L(0,b.getTime(),d)}if(c===f.voidOperation){if(null===b||b===f.voidOperation)return L(null,null,d);if(h(b))return L(0,b,d);if(x(b)||a(b))return L(0,H(b),d);if(O(b))return L(0,b.getTime(),d)}else if(h(c)){if(h(b))return L(c,b,d);if(a(b))return L(c,H(b),d);if(null===b||b===f.voidOperation)return L(c,0,d);if(x(b))return L(c,H(b),d);if(O(b))return L(c,b.getTime(),d)}else if(x(c)){if(x(b))return L(W(c),W(b),d);if(O(b))return L(H(c),b.getTime(),d);if(h(b))return L(H(c),b,d);if(null===
b||b===f.voidOperation)return L(H(c),0,d);if(a(b))return L(H(c),H(b),d)}else if(O(c)){if(O(b))return L(c,b,d);if(null===b||b===f.voidOperation)return L(c.getTime(),0,d);if(h(b))return L(c.getTime(),b,d);if(a(b)||x(b))return L(c.getTime(),H(b),d)}else if(a(c)){if(a(b))return L(c,b,d);if(h(b))return L(H(c),H(b),d);if(O(b))return L(H(c),b.getTime(),d);if(null===b||b===f.voidOperation)return L(H(c),0,d);if(x(b))return L(H(c),H(b),d)}return!ja(c,b)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};f.equalityTest=
ja;f.toString=W;f.toNumberArray=function(a){var b=[];if(!1===c(a))return null;if(a instanceof m){for(var h=0;h<a.length();h++)b[h]=H(a.get(h));return b}for(h=0;h<a.length;h++)b[h]=H(a[h]);return b};f.toStringExplicit=fa;f.toNumber=H;f.toDate=function(a,c){return O(a)?a:x(a)&&(a=f.MomentLibrary.Moment(a,[void 0===c||null===c||""===c?f.MomentLibrary.Moment.ISO_8601:c]),a.isValid())?a.toDate():null};f.toDateM=function(a,c){return O(a)?f.MomentLibrary.Moment(a):x(a)&&(a=f.MomentLibrary.Moment(a,[void 0===
c||null===c||""===c?f.MomentLibrary.Moment.ISO_8601:c]),a.isValid())?a:null};f.toBoolean=function(c){return a(c)?c:x(c)?(c=c.toLowerCase(),"true"===c?!0:!1):h(c)?0===c||isNaN(c)?!1:!0:!1};f.fixSpatialReference=function(a,c){if(A.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=c;return a};f.fixNullGeometry=function(a){return null===a?null:a instanceof d?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof u?0===a.rings.length?null:a:a instanceof
b?0===a.paths.length?null:a:a instanceof g?0===a.points.length?null:a:a instanceof l?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};f.getDomainValue=function(a,c){if(!a||!a.domain)return c;var b=null;c="string"===a.field.type||"esriFieldTypeString"===a.field.type?W(c):H(c);for(var h=0;h<a.domain.codedValues.length;h++){var d=a.domain.codedValues[h];d.code===c&&(b=d)}return null===b?c:b.name};f.getDomainCode=function(a,c){if(!a||!a.domain)return c;var b=null;c=W(c);for(var h=0;h<a.domain.codedValues.length;h++){var d=
a.domain.codedValues[h];d.name===c&&(b=d)}return null===b?c:b.code};f.getDomain=function(a,c,b,h){void 0===b&&(b=null);if(!c||!c.fields)return null;for(var d=null,e=0;e<c.fields.length;e++){var g=c.fields[e];g.name.toLowerCase()===a.toString().toLowerCase()&&(d=g)}if(null===d)throw Error("Field not found");var k,G;h||(h=b&&c.typeIdField&&b._field(c.typeIdField));null!=h&&c.types.some(function(a){return a.id===h?((k=a.domains&&a.domains[d.name])&&"inherited"===k.type&&(k=ha(d.name,c),G=!0),!0):!1});
G||k||(k=ha(a,c));return{field:d,domain:k}};f.stableStringify=N;f.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var c=[],b=0;b<a.length;b++){var h=a[b];h&&h.declaredClass&&"esri.arcade.Feature"===h.declaredClass?c.push(h.geometry()):c.push(h)}return c};f.autoCastArrayOfPointsToPolygon=function(a,b){if(c(a)||E(a)){var h=!1,d=!1,e=[];if(c(a)){for(var g=0;g<a.length;g++){var k=a[g];ma(e,k)}0<e.length&&(b=a[0].spatialReference,h=a[0].hasZ,d=a[0].hasM)}else if(a instanceof r)e=a._elements,
0<e.length&&(h=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(E(a)){for(var g=0,l=a.toArray();g<l.length;g++)k=l[g],ma(e,k);0<e.length&&(b=a.get(0).spatialReference,h=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}else throw Error("Invalid Argument");if(0===e.length)return null;!1===z.isClockwise(e,d,h)&&(e=e.slice(0).reverse());return new u({rings:[e],spatialReference:b,hasZ:h,hasM:d})}return a};f.autoCastArrayOfPointsToPolyline=function(a,h){if(c(a)||E(a)){var d=!1,e=!1,g=[];if(c(a)){for(var k=
0;k<a.length;k++){var l=a[k];ma(g,l)}0<g.length&&(h=a[0].spatialReference,d=!0===a[0].hasZ,e=!0===a[0].hasM)}else if(a instanceof r)g=a._elements,0<g.length&&(d=a._hasZ,e=a._hasM,h=a.get(0).spatialReference);else if(E(a)){for(var k=0,P=a.toArray();k<P.length;k++)l=P[k],ma(g,l);0<g.length&&(h=a.get(0).spatialReference,d=!0===a.get(0).hasZ,e=!0===a.get(0).hasM)}return 0===g.length?null:new b({paths:[g],spatialReference:h,hasZ:d,hasM:e})}return a};f.autoCastArrayOfPointsToMultiPoint=function(a,b){if(c(a)||
E(a)){var h=!1,d=!1,e=[];if(c(a)){for(var k=0;k<a.length;k++){var l=a[k];ma(e,l)}0<e.length&&(b=a[0].spatialReference,h=!0===a[0].hasZ,d=!0===a[0].hasM)}else if(a instanceof r)e=a._elements,0<e.length&&(h=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(E(a)){for(var k=0,P=a.toArray();k<P.length;k++)l=P[k],ma(e,l);0<e.length&&(b=a.get(0).spatialReference,h=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}return 0===e.length?null:new g({points:e,spatialReference:b,hasZ:h,hasM:d})}return a};f.toStringArray=
function(a,b){void 0===b&&(b=!1);var h=[];if(null===a)return h;if(!0===c(a)){for(var d=0;d<a.length;d++){var e=W(a[d]);""===e&&!0!==b||h.push(e)}return h}if(a instanceof m){for(d=0;d<a.length();d++)e=W(a.get(d)),""===e&&!0!==b||h.push(e);return h}return ea(a)?(e=W(a),""===e&&!0!==b||h.push(e),h):[]};var ia=0;f.tick=function(a){ia++;return 0===ia%100?(ia=0,w.create(function(c){setTimeout(function(){c(a)},0)})):a};f.MomentLibrary={Moment:null}})},"dojo/number":function(){define(["./_base/lang","./i18n",
"./i18n!./cldr/nls/number","./string","./regexp"],function(M,f,p,n,m){var k={};M.setObject("dojo.number",k);k.format=function(l,e){e=M.mixin({},e||{});var g=f.normalizeLocale(e.locale),g=f.getLocalization("dojo.cldr","number",g);e.customs=g;g=e.pattern||g[(e.type||"decimal")+"Format"];return isNaN(l)||Infinity==Math.abs(l)?null:k._applyPattern(l,g,e)};k._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;k._applyPattern=function(l,e,g){g=g||{};var d=g.customs.group,u=g.customs.decimal;e=e.split(";");var b=e[0];
e=e[0>l?1:0]||"-"+b;if(-1!=e.indexOf("%"))l*=100;else if(-1!=e.indexOf("\u2030"))l*=1E3;else if(-1!=e.indexOf("\u00a4"))d=g.customs.currencyGroup||d,u=g.customs.currencyDecimal||u,e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(b,d,e,k){return(b=g[["symbol","currency","displayName"][e.length-1]]||g.currency||"")?d+b+k:""});else if(-1!=e.indexOf("E"))throw Error("exponential notation not supported");var w=k._numberPatternRE,b=b.match(w);if(!b)throw Error("unable to find a number expression in pattern: "+
e);!1===g.fractional&&(g.places=0);return e.replace(w,k._formatAbsolute(l,b[0],{decimal:u,group:d,places:g.places,round:g.round}))};k.round=function(k,e,g){g=10/(g||10);return(g*+k).toFixed(e)/g};if(0==(.9).toFixed()){var r=k.round;k.round=function(k,e,g){var d=Math.pow(10,-e||0),l=Math.abs(k);if(!k||l>=d)d=0;else if(l/=d,.5>l||.95<=l)d=0;return r(k,e,g)+(0<k?d:-d)}}k._formatAbsolute=function(l,e,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);e=e.split(".");var d="string"==
typeof g.places&&g.places.indexOf(","),u=g.places;d?u=g.places.substring(d+1):0<=u||(u=(e[1]||[]).length);0>g.round||(l=k.round(l,u,g.round));l=String(Math.abs(l)).split(".");var b=l[1]||"";e[1]||g.places?(d&&(g.places=g.places.substring(0,d)),d=void 0!==g.places?g.places:e[1]&&e[1].lastIndexOf("0")+1,d>b.length&&(l[1]=n.pad(b,d,"0",!0)),u<b.length&&(l[1]=b.substr(0,u))):l[1]&&l.pop();u=e[0].replace(",","");d=u.indexOf("0");-1!=d&&(d=u.length-d,d>l[0].length&&(l[0]=n.pad(l[0],d)),-1==u.indexOf("#")&&
(l[0]=l[0].substr(l[0].length-d)));var u=e[0].lastIndexOf(","),w,m;-1!=u&&(w=e[0].length-u-1,e=e[0].substr(0,u),u=e.lastIndexOf(","),-1!=u&&(m=e.length-u-1));e=[];for(u=l[0];u;)d=u.length-w,e.push(0<d?u.substr(d):u),u=0<d?u.slice(0,d):"",m&&(w=m,m=void 0);l[0]=e.reverse().join(g.group||",");return l.join(g.decimal||".")};k.regexp=function(l){return k._parseInfo(l).regexp};k._parseInfo=function(l){l=l||{};var e=f.normalizeLocale(l.locale),e=f.getLocalization("dojo.cldr","number",e),g=l.pattern||e[(l.type||
"decimal")+"Format"],d=e.group,u=e.decimal,b=1;if(-1!=g.indexOf("%"))b/=100;else if(-1!=g.indexOf("\u2030"))b/=1E3;else{var w=-1!=g.indexOf("\u00a4");w&&(d=e.currencyGroup||d,u=e.currencyDecimal||u)}e=g.split(";");1==e.length&&e.push("-"+e[0]);e=m.buildGroupRE(e,function(e){e="(?:"+m.escapeString(e,".")+")";return e.replace(k._numberPatternRE,function(e){var g={signed:!1,separator:l.strict?d:[d,""],fractional:l.fractional,decimal:u,exponent:!1};e=e.split(".");var w=l.places;1==e.length&&1!=b&&(e[1]=
"###");1==e.length||0===w?g.fractional=!1:(void 0===w&&(w=l.pattern?e[1].lastIndexOf("0")+1:Infinity),w&&void 0==l.fractional&&(g.fractional=!0),!l.places&&w<e[1].length&&(w+=","+e[1].length),g.places=w);e=e[0].split(",");1<e.length&&(g.groupSize=e.pop().length,1<e.length&&(g.groupSize2=e.pop().length));return"("+k._realNumberRegexp(g)+")"})},!0);w&&(e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,d,e,g){b=m.escapeString(l[["symbol","currency","displayName"][e.length-1]]||l.currency||
"");if(!b)return"";d=d?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return l.strict?d+b+g:(d&&(d+="*"),g&&(g+="*"),"(?:"+d+b+g+")?")}));return{regexp:e.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:u,factor:b}};k.parse=function(l,e){e=k._parseInfo(e);l=(new RegExp("^"+e.regexp+"$")).exec(l);if(!l)return NaN;var g=l[1];if(!l[1]){if(!l[2])return NaN;g=l[2];e.factor*=-1}g=g.replace(new RegExp("["+e.group+"\\s\\xa0]","g"),"").replace(e.decimal,".");return g*e.factor};k._realNumberRegexp=function(l){l=l||{};
"places"in l||(l.places=Infinity);"string"!=typeof l.decimal&&(l.decimal=".");"fractional"in l&&!/^0/.test(l.places)||(l.fractional=[!0,!1]);"exponent"in l||(l.exponent=[!0,!1]);"eSigned"in l||(l.eSigned=[!0,!1]);var e=k._integerRegexp(l),g=m.buildGroupRE(l.fractional,function(d){var b="";d&&0!==l.places&&(b="\\"+l.decimal,b=Infinity==l.places?"(?:"+b+"\\d+)?":b+("\\d{"+l.places+"}"));return b},!0),d=m.buildGroupRE(l.exponent,function(d){return d?"([eE]"+k._integerRegexp({signed:l.eSigned})+")":""}),
e=e+g;g&&(e="(?:(?:"+e+")|(?:"+g+"))");return e+d};k._integerRegexp=function(k){k=k||{};"signed"in k||(k.signed=[!0,!1]);"separator"in k?"groupSize"in k||(k.groupSize=3):k.separator="";var e=m.buildGroupRE(k.signed,function(d){return d?"[-+]":""},!0),g=m.buildGroupRE(k.separator,function(d){if(!d)return"(?:\\d+)";d=m.escapeString(d);" "==d?d="\\s":"\u00a0"==d&&(d="\\s\\xa0");var e=k.groupSize,b=k.groupSize2;return b?(d="(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+d+"]\\d{"+b+"})*["+d+"]\\d{"+e+"})",0<e-b?"(?:"+
d+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+d+"]\\d{"+e+"})*)"},!0);return e+g};return k})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(M,f){var p=/[&<>'"\/]/g,n={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},m={};f.setObject("dojo.string",m);m.escape=function(k){return k?k.replace(p,function(k){return n[k]}):""};m.rep=function(k,m){if(0>=m||!k)return"";for(var l=[];;){m&1&&l.push(k);if(!(m>>=
1))break;k+=k}return l.join("")};m.pad=function(k,f,l,e){l||(l="0");k=String(k);f=m.rep(l,Math.ceil((f-k.length)/l.length));return e?k+f:f+k};m.substitute=function(k,m,l,e){e=e||M.global;l=l?f.hitch(e,l):function(e){return e};return k.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(g,d,k){if(""==d)return"$";g=f.getObject(d,!1,m);k&&(g=f.getObject(k,!1,e).call(e,g,d));k=l(g,d);if("undefined"===typeof k)throw Error('string.substitute could not find key "'+d+'" in template');return k.toString()})};
m.trim=String.prototype.trim?f.trim:function(k){k=k.replace(/^\s+/,"");for(var m=k.length-1;0<=m;m--)if(/\S/.test(k.charAt(m))){k=k.substring(0,m+1);break}return k};return m})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(M,f){var p={};f.setObject("dojo.regexp",p);p.escapeString=function(f,m){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(k){return m&&-1!=m.indexOf(k)?k:"\\"+k})};p.buildGroupRE=function(f,m,k){if(!(f instanceof Array))return m(f);for(var r=
[],l=0;l<f.length;l++)r.push(m(f[l]));return p.group(r.join("|"),k)};p.group=function(f,m){return"("+(m?"?:":"")+f+")"};return p})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(M,f){return function(){return function(f,n){this.context=this.definition=null;this.definition=f;this.context=n}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(M,f,p,n,m){return function(k){function f(l,
e,g,d,f){l=k.call(this,l)||this;l._lazyPath=[];l._hasZ=!1;l._hasM=!1;l._hasZ=g;l._hasM=d;l._spRef=e;l._cacheId=f;return l}p(f,k);f.prototype.get=function(k){if(void 0===this._lazyPath[k]){var e=this._elements[k];if(void 0===e)return;this._lazyPath[k]=new m(e,this._spRef,this._hasZ,this._hasM,this._cacheId,k)}return this._lazyPath[k]};f.prototype.equalityTest=function(k){return k===this?!0:null===k||!1===k instanceof f?!1:k.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return f}(n)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],function(M,f,p,n,m){return function(k){function f(l,e,g,d,f,b){l=k.call(this,l)||this;l._lazyPt=[];l._hasZ=!1;l._hasM=!1;l._spRef=e;l._hasZ=g;l._hasM=d;l._cacheId=f;l._partId=b;return l}p(f,k);f.prototype.get=function(k){if(void 0===this._lazyPt[k]){var e=this._elements[k];if(void 0===e)return;var g=this._hasZ,d=this._hasM,l=null,l=g&&!d?
new m(e[0],e[1],e[2],void 0,this._spRef):d&&g?new m(e[0],e[1],void 0,e[2],this._spRef):g&&d?new m(e[0],e[1],e[2],e[3],this._spRef):new m(e[0],e[1],this._spRef);l.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+k.toString();this._lazyPt[k]=l}return this._lazyPt[k]};f.prototype.equalityTest=function(k){return k===this?!0:null===k||!1===k instanceof f?!1:k.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return f}(n)})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(M,f,p,n){return function(f){function k(k,l,e,g,d){var m=f.call(this)||this;m.attachmentUrl=d;m.immutable=!1;m.setField("id",k);m.setField("name",l);m.setField("contenttype",e);m.setField("size",g);m.immutable=!0;return m}p(k,f);return k}(n)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d){return function(){function f(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}f.createFromGraphic=function(b){var e=new f;e._geometry=d.isSome(b.geometry)?b.geometry:null;e.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(e._layer=b._sourceLayer,e._datesfixed=!1):b._layer?(e._layer=
b._layer,e._datesfixed=!1):b.layer&&(e._layer=b.layer,e._datesfixed=!1);return e};f.createFromArcadeFeature=function(b){var d=new f;d._datesfixed=b._datesfixed;d.attributes=b.attributes;d._geometry=b._geometry;d._optimizedGeomDefinition=b._optimizedGeomDefinition;b._layer&&(d._layer=b._layer);return d};f.createFromOptimisedFeature=function(b,d,e){var g=new f;g._geometry=b.geometry?{geometry:b.geometry}:null;g._optimizedGeomDefinition=e;g.attributes=b.attributes||{};g._layer=d;g._datesfixed=!1;return g};
f.createFromArcadeDictionary=function(b){var d=new f;d.attributes=b.field("attributes");null!==d.attributes?d.attributes instanceof n?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=b.field("geometry");null!==d._geometry&&(d._geometry instanceof n?d._geometry=f.parseGeometryFromDictionary(d._geometry):d._geometry instanceof r||(d._geometry=null));return d};f.createFromGraphicLikeObject=function(b,e,g){void 0===g&&(g=null);var k=
new f;null===e&&(e={});k.attributes=e;k._geometry=d.isSome(b)?b:null;k._layer=g;k._layer&&(k._datesfixed=!1);return k};f.prototype.repurposeFromGraphicLikeObject=function(b,d,e){void 0===e&&(e=null);null===d&&(d={});this.attributes=d;this._geometry=b?b:null;this._datesfixed=(this._layer=e)?!1:!0};f.prototype.castToText=function(){var b="",d;for(d in this.attributes){""!==b&&(b+=",");var e=this.attributes[d];null==e?b+=JSON.stringify(d)+":null":k.isBoolean(e)||k.isNumber(e)||k.isString(e)?b+=JSON.stringify(d)+
":"+JSON.stringify(e):e instanceof r?b+=JSON.stringify(d)+":"+k.toStringExplicit(e):e instanceof m?b+=JSON.stringify(d)+":"+k.toStringExplicit(e):e instanceof Array?b+=JSON.stringify(d)+":"+k.toStringExplicit(e):e instanceof Date?b+=JSON.stringify(d)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(b+=JSON.stringify(d)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":k.toStringExplicit(this.geometry()))+',"attributes":{'+b+"}}"};f.prototype._fixDates=
function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],d=0;d<this._layer.fields.length;d++){var e=this._layer.fields[d];"date"!==e.type&&"esriFieldTypeDate"!==e.type||b.push(e.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};f.prototype._fixDateFields=function(b){this.attributes=p({},this.attributes);for(var d=0;d<b.length;d++){var e=this.attributes[b[d]];if(null!==e)if(void 0===e)for(var g in this.attributes){if(g.toLowerCase()===
b[d].toLowerCase()){e=this.attributes[g];null===e||e instanceof Date||(this.attributes[g]=new Date(e));break}}else e instanceof Date||(this.attributes[b[d]]=new Date(e))}};f.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof r)return this._geometry;this._optimizedGeomDefinition?(this._geometry=d.unwrap(e.fromJSON(g.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=
this._optimizedGeomDefinition.spatialReference):this._geometry=d.unwrap(e.fromJSON(this._geometry));return this._geometry};f.prototype.field=function(b){!1===this._datesfixed&&this._fixDates();var d=this.attributes[b];if(void 0!==d)return d;b=b.toLowerCase();for(var e in this.attributes)if(e.toLowerCase()===b)return this.attributes[e];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};f.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var d=0;d<
this._layer.fields.length;d++)if(this._layer.fields[d].name.toLowerCase()===b)return!0;return!1};f.prototype._field=function(b){!1===this._datesfixed&&this._fixDates();var d=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var e in this.attributes)if(e.toLowerCase()===d)return this.attributes[e];return null};f.prototype.setField=function(b,d){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(d))throw Error("Illegal Value Assignment to Feature");var e=b.toLowerCase();
if(void 0===this.attributes[b])for(var g in this.attributes)if(g.toLowerCase()===e){this.attributes[g]=d;return}this.attributes[b]=d};f.prototype.hasField=function(b){var d=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var e in this.attributes)if(e.toLowerCase()===d)return!0;return this._hasFieldDefinition(d)?!0:!1};f.prototype.keys=function(){var b=[],d={},e;for(e in this.attributes)b.push(e),d[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){var g=
this._layer.fields[e];1!==d[g.name.toLowerCase()]&&b.push(g.name)}return b=b.sort()};f.parseGeometryFromDictionary=function(b){b=f.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return e.fromJSON(b)};
f.fixPathArrays=function(b,d,e){var g=[];if(b instanceof Array)for(var k=0;k<b.length;k++)g.push(this.fixPointArrays(b[k],d,e));else if(b instanceof m)for(k=0;k<b.length();k++)g.push(this.fixPointArrays(b.get(k),d,e));return g};f.fixPointArrays=function(b,d,e){var g=[];if(b instanceof Array)for(var k=0;k<b.length;k++){var f=b[k];f instanceof l?d&&e?g.push([f.x,f.y,f.z,f.m]):d?g.push([f.x,f.y,f.z]):e?g.push([f.x,f.y,f.m]):g.push([f.x,f.y]):f instanceof m?g.push(f.toArray()):g.push(f)}else if(b instanceof
m)for(k=0;k<b.length();k++)f=b.get(k),f instanceof l?d&&e?g.push([f.x,f.y,f.z,f.m]):d?g.push([f.x,f.y,f.z]):e?g.push([f.x,f.y,f.m]):g.push([f.x,f.y]):f instanceof m?g.push(f.toArray()):g.push(f);return g};f.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var e={},g;for(g in b.attributes){var k=b.attributes[g];k instanceof n&&(k=f.convertDictionaryToJson(k));d?e[g.toLowerCase()]=k:e[g]=k}return e};f.parseAttributesFromDictionary=function(b){var d={},e;for(e in b.attributes){var g=b.attributes[e];
if(k.isSimpleType(g))d[e]=g;else throw Error("Illegal Argument");}return d};f.fromJson=function(b){var d=null;null!==b.geometry&&void 0!==b.geometry&&(d=e.fromJSON(b.geometry));var g={};if(null!==b.attributes&&void 0!==b.attributes)for(var l in b.attributes){var m=b.attributes[l];if(null===m)g[l]=m;else if(k.isString(m)||k.isNumber(m)||k.isBoolean(m)||k.isDate(m))g[l]=m;else throw Error("Illegal Argument");}return f.createFromGraphicLikeObject(d,g,null)};f.prototype.domainValueLookup=function(b,d,
e){if(null===this._layer||!this._layer.fields)return null;e=k.getDomain(b,this._layer,this,e);if(void 0===d)try{d=this.field(b)}catch(A){return null}return k.getDomainValue(e,d)};f.prototype.domainCodeLookup=function(b,d,e){if(null===this._layer||!this._layer.fields)return null;if(void 0===d){try{d=this.field(b)}catch(A){return null}return d}b=k.getDomain(b,this._layer,this,e);return k.getDomainCode(b,d)};return f}()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(M,f,p,n,m,k,r,l){function e(a,c){return a?c?4:3:c?3:2}function g(a,c,b,d){if(a){if(b)return c&&d?ia:v;if(c&&d)return X}else if(c&&d)return v;return aa}function d(a,c){return Math.round((c-a.translate[0])/a.scale[0])}function u(a,c){return Math.round((a.translate[1]-c)/a.scale[1])}function b(a,c){return c*a.scale[0]+a.translate[0]}function w(a,c){return a.translate[1]-c*a.scale[1]}function z(a){a=a.coords;return{x:a[0],y:a[1]}}function A(a,c){a.coords[0]=c.x;a.coords[1]=c.y;return a}function J(a){a=
a.coords;return{x:a[0],y:a[1],z:a[2]}}function ga(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.z;return a}function ea(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function x(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.m;return a}function a(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function h(a,c){a.coords[0]=c.x;a.coords[1]=c.y;a.coords[2]=c.z;a.coords[3]=c.m;return a}function c(a,c){return a&&c?h:a?ga:c?x:A}function E(a,c,b){if(!a)return null;for(var d=e(c,b),h=[],g=0;g<a.coords.length;g+=
d){for(var k=[],f=0;f<d;f++)k.push(a.coords[g+f]);h.push(k)}return c?b?{points:h,hasZ:c,hasM:b}:{points:h,hasZ:c}:b?{points:h,hasM:b}:{points:h}}function O(a,c,b){void 0===b&&(b=e(c.hasZ,c.hasM));a.lengths[0]=c.points.length;var d=a.coords,h=0,g=0;for(c=c.points;g<c.length;g++)for(var k=c[g],f=0;f<b;f++)d[h++]=k[f];return a}function T(a,c,b){if(!a)return null;var d=e(c,b),h=a.coords,g=[],k=0,f=0;for(a=a.lengths;f<a.length;f++){for(var l=a[f],m=[],B=0;B<l;B++){for(var u=[],E=0;E<d;E++)u.push(h[k++]);
m.push(u)}g.push(m)}return c?b?{paths:g,hasZ:c,hasM:b}:{paths:g,hasZ:c}:b?{paths:g,hasM:b}:{paths:g}}function t(a,c,b){void 0===b&&(b=e(c.hasZ,c.hasM));var d=a.lengths,h=a.coords,g=0,k=0;for(c=c.paths;k<c.length;k++){for(var f=c[k],l=0,m=f;l<m.length;l++)for(var u=m[l],B=0;B<b;B++)h[g++]=u[B];d.push(f.length)}return a}function Z(a,c,b){if(!a)return null;var d=e(c,b),h=a.coords,g=[],k=0,f=0;for(a=a.lengths;f<a.length;f++){for(var l=a[f],m=[],u=0;u<l;u++){for(var B=[],E=0;E<d;E++)B.push(h[k++]);m.push(B)}g.push(m)}return c?
b?{rings:g,hasZ:c,hasM:b}:{rings:g,hasZ:c}:b?{rings:g,hasM:b}:{rings:g}}function L(a,c,b,d){void 0===b&&(b=c.hasZ);void 0===d&&(d=c.hasM);ja(a,c.rings,b,d);return a}function ja(a,c,b,d){b=e(b,d);d=a.lengths;for(var h=a.coords,g=0,k=d.length=h.length=0;k<c.length;k++){for(var f=c[k],l=0,m=f;l<m.length;l++)for(var u=m[l],E=0;E<b;E++)h[g++]=u[E];d.push(f.length)}return a}function W(a,b,d,h,g,f){a.length=0;if(!d){for(h=0;h<b.length;h++)g=b[h],a.push(new k.default(null,g.attributes,null,g.attributes[f]));
return a}switch(d){case "esriGeometryPoint":h=c(h,g);for(g=0;g<b.length;g++){var G=b[g];d=G.geometry;var G=G.attributes,P=void 0;d&&(P=h(new l.default,d));a.push(new k.default(P,G,null,G[f]))}break;case "esriGeometryMultipoint":h=e(h,g);for(g=0;g<b.length;g++)G=b[g],d=G.geometry,G=G.attributes,P=void 0,d&&(P=O(new l.default,d,h)),a.push(new k.default(P,G,null,G[f]));break;case "esriGeometryPolyline":h=e(h,g);for(g=0;g<b.length;g++)G=b[g],d=G.geometry,G=G.attributes,P=void 0,d&&(P=t(new l.default,
d,h)),a.push(new k.default(P,G,null,G[f]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var m=b[d],G=m.geometry,P=m.centroid,m=m.attributes,u=void 0;G&&(u=L(new l.default,G,h,g));P?a.push(new k.default(u,m,A(new l.default,P),m[f])):a.push(new k.default(u,m,null,m[f]))}break;default:N.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function fa(c,b,d,h,e){c.length=0;switch(d){case "esriGeometryPoint":d=z;h&&e?d=a:h?
d=J:e&&(d=ea);for(h=0;h<b.length;h++){var g=b[h];e=g.geometry;g=g.attributes;e=e?d(e):null;c.push({attributes:g,geometry:e})}break;case "esriGeometryMultipoint":for(d=0;d<b.length;d++){var k=b[d],g=k.geometry,k=k.attributes,f=void 0;g&&(f=E(g,h,e));c.push({attributes:k,geometry:f})}break;case "esriGeometryPolyline":for(d=0;d<b.length;d++)k=b[d],g=k.geometry,k=k.attributes,f=void 0,g&&(f=T(g,h,e)),c.push({attributes:k,geometry:f});break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var f=b[d],
k=f.geometry,g=f.attributes,l=f.centroid,f=void 0;k&&(f=Z(k,h,e));l?(k=z(l),c.push({attributes:g,centroid:k,geometry:f})):c.push({attributes:g,geometry:f})}break;default:N.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+d+"'"))}return c}function pa(a,c,b,h,k,f,l,m){void 0===l&&(l=b);void 0===m&&(m=h);a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;k=ma[k];var G=c.coords;c=c.lengths;var P=e(b,
h),E=e(b&&l,h&&m);b=g(b,h,l,m);if(!c.length)return b(a.coords,G,0,0,d(f,G[0]),u(f,G[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=P,a;for(var ba,x=0,n,w=0,r=0;r<c.length;r++){var B=c[r];if(!(B<k)){var p=0;n=w;m=h=d(f,G[x]);ba=l=u(f,G[x+1]);b(a.coords,G,n,x,m,ba);p++;x+=P;n+=E;for(var A=1;A<B;A++,x+=P)if(m=d(f,G[x]),ba=u(f,G[x+1]),m!==h||ba!==l)b(a.coords,G,n,x,m-h,ba-l),n+=E,p++,h=m,l=ba;p>=k&&(a.lengths.push(p),w=n)}}a.coords.length=w;return a.coords.length?a:null}function H(a,c,b,
d,h,e,g){for(var k=d,f=0,l,G=e+b;G<g;G+=b){l=c[G];var m=c[G+1],P=c[g],u=c[g+1],E=c[e],x=c[e+1],n=P-E,w=u-x;if(0!==n||0!==w){var r=((l-E)*n+(m-x)*w)/(n*n+w*w);1<r?(E=P,x=u):0<r&&(E+=n*r,x+=w*r)}n=l-E;w=m-x;l=n*n+w*w;l>k&&(f=G,k=l)}k>d&&(f-e>b&&H(a,c,b,d,h,e,f),h(a,c,a.length,f,c[f],c[f+1]),g-f>b&&H(a,c,b,d,h,f,g))}function ha(a,c,d,h,g){var k=c.coords,f=c.lengths,l=d?h?ia:v:h?v:aa;d=e(d,h);if(!k.length)return a!==c&&(a.lengths.length=0,a.coords.length=0),a;if(!f.length)return l(a.coords,k,0,0,b(g,
k[0]),w(g,k[1])),a!==c&&(a.lengths.length=0,a.coords.length=d),a;var m=g.scale;h=m[0];for(var m=m[1],u=0,E=0;E<f.length;E++){var x=f[E];a.lengths[E]=x;var n=b(g,k[u]),r=w(g,k[u+1]);l(a.coords,k,u,u,n,r);for(var u=u+d,B=1;B<x;B++,u+=d)n+=k[u]*h,r-=k[u+1]*m,l(a.coords,k,u,u,n,r)}a!==c&&(a.lengths.length=f.length,a.coords.length=k.length);return a}Object.defineProperty(f,"__esModule",{value:!0});var N=n.getLogger("esri.tasks.support.optimizedFeatureSet"),ma={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0},aa=function(a,c,b,d,h,e){a[b]=h;a[b+1]=e},v=function(a,c,b,d,h,e){a[b]=h;a[b+1]=e;a[b+2]=c[d+2]},X=function(a,c,b,d,h,e){a[b]=h;a[b+1]=e;a[b+2]=c[d+3]},ia=function(a,c,b,d,h,e){a[b]=h;a[b+1]=e;a[b+2]=c[d+2];a[b+3]=c[d+3]};f.quantizeX=d;f.quantizeY=u;f.hydrateX=b;f.hydrateY=w;f.convertToPoint=function(c,b,d){return c?b?d?a(c):J(c):d?ea(c):z(c):null};f.convertFromPoint=function(a,b,d){void 0===d&&(d=c(null!=b.z,null!=b.m));return d(a,b)};f.convertToMultipoint=
E;f.convertFromMultipoint=O;f.convertToPolyline=T;f.convertFromPolyline=t;f.convertToPolygon=Z;f.convertFromPolygon=L;f.convertFromNestedArray=ja;var ka=[],la=[];f.convertFromFeature=function(a,c,b,d,h){ka[0]=a;a=W(la,ka,c,b,d,h)[0];ka.length=la.length=0;return a};f.convertFromFeatures=W;f.convertToFeature=function(a,c,b,d){la[0]=a;fa(ka,la,c,b,d);a=ka[0];ka.length=la.length=0;return a};f.convertFromGeometry=function(a,b,d){if(!a)return null;var h=new l.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in
a&&null==d&&(d=a.hasM);if(m.isPoint(a))return c(null!=b?b:null!=a.z,null!=d?d:null!=a.m)(h,a);if(m.isPolygon(a))return L(h,a,b,d);if(m.isPolyline(a))return t(h,a,e(b,d));if(m.isMultipoint(a))return O(h,a,e(b,d));N.error("convertFromGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+a+"'"))};f.convertToGeometry=function(c,b,d,h){c=c&&("coords"in c?c:c.geometry);if(!c)return null;switch(b){case "esriGeometryPoint":return b=z,d&&h?b=a:d?b=J:h&&(b=ea),b(c);case "esriGeometryMultipoint":return E(c,
d,h);case "esriGeometryPolyline":return T(c,d,h);case "esriGeometryPolygon":return Z(c,d,h);default:N.error("convertToGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+b+"'"))}};f.convertToFeatures=fa;f.convertToFeatureSet=function(a){var c=a.objectIdFieldName,b=a.spatialReference,d=a.transform,h=a.fields,e=a.hasM,g=a.hasZ,k=a.geometryType,f=a.exceededTransferLimit;a={features:fa([],a.features,k,g,e),fields:h,geometryType:k,objectIdFieldName:c,spatialReference:b};d&&(a.transform=
d);f&&(a.exceededTransferLimit=f);e&&(a.hasM=e);g&&(a.hasZ=g);return a};f.convertFromFeatureSet=function(a,c){var b=new r.default,d=a.hasM,h=a.hasZ,e=a.features,g=a.objectIdFieldName,k=a.spatialReference,f=a.geometryType,l=a.exceededTransferLimit,m=a.transform;b.fields=a.fields;b.geometryType=f;b.objectIdFieldName=g||c;b.spatialReference=k;if(!b.objectIdFieldName)return N.error(new p("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),b;e&&W(b.features,e,f,h,d,b.objectIdFieldName);
l&&(b.exceededTransferLimit=l);d&&(b.hasM=d);h&&(b.hasZ=h);m&&(b.transform=m);return b};f.hydrateOptimizedFeatureSet=function(a){var c=a.transform,b=a.hasM,d=a.hasZ;if(!c)return a;for(var h=0,e=a.features;h<e.length;h++){var g=e[h];g.geometry&&ha(g.geometry,g.geometry,b,d,c);g.centroid&&ha(g.centroid,g.centroid,b,d,c)}a.transform=null;return a};f.quantizeOptimizedFeatureSet=function(a,c){var b=c.geometryType,d=c.features,h=c.hasM,e=c.hasZ;if(!a)return c;for(var g=0;g<d.length;g++){var f=d[g],m=new k.default(new l.default,
f.attributes);pa(m.geometry,f.geometry,h,e,b,a);f.centroid&&(m.centroid=new l.default,pa(m.centroid,f.centroid,h,e,"esriGeometryPoint",a));d[g]=m}c.transform=a;return c};f.quantizeOptimizedGeometry=pa;f.generalizeOptimizedGeometry=function(a,c,b,d,h,k,f,l){void 0===f&&(f=b);void 0===l&&(l=d);a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;h=ma[h];var m=c.coords;c=c.lengths;var G=e(b,d),P=e(b&&f,d&&l);b=g(b,d,f,l);if(!c.length)return b(a.coords,
m,0,0,m[0],m[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=G,a;d=0;k*=k;for(f=0;f<c.length;f++){l=c[f];if(!(l<h)){var u=a.coords.length/P,E=d,x=d+(l-1)*G;b(a.coords,m,a.coords.length,E,m[E],m[E+1]);H(a.coords,m,G,k,b,E,x);b(a.coords,m,a.coords.length,x,m[x],m[x+1]);E=a.coords.length/P-u;E>=h?a.lengths.push(E):a.coords.length=u*P}d+=l*G}return a.coords.length?a:null};f.getBoundsOptimizedGeometry=function(a,c,b,d){b=e(b,d);var h=d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;
if(c&&c.coords){c=c.coords;for(var f=0;f<c.length;f+=b){var l=c[f],m=c[f+1];d=Math.min(d,l);g=Math.max(g,l);h=Math.min(h,m);k=Math.max(k,m)}}a[0]=d;a[1]=h;a[2]=g;a[3]=k;return a};f.getQuantizedBoundsOptimizedGeometry=function(a,c,b,d){b=e(b,d);d=c.coords;var h=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,l=0,m=0;for(c=c.lengths;m<c.length;m++)for(var u=c[m],E=d[l],x=d[l+1],h=Math.min(E,h),g=Math.min(x,g),k=Math.max(E,k),f=Math.max(x,f),
l=l+b,n=1;n<u;n++,l+=b){var w=d[l],r=d[l+1],E=E+w,x=x+r;0>w&&(h=Math.min(h,E));0<w&&(k=Math.max(k,E));0>r?g=Math.min(g,x):0<r&&(f=Math.max(f,x))}a[0]=h;a[1]=g;a[2]=k;a[3]=f;return a};f.hydrateOptimizedGeometry=ha;f.removeZMValues=function(a,c,b,d,h,k){var f,l=e(b,d);b=g(b,d,h,k);d=c.coords;a.coords.length=0;a.lengths.length=0;(f=a.lengths).push.apply(f,c.lengths);for(c=0;c<d.length;c+=l)b(a.coords,d,a.coords.length,c,d[c],d[c+1]);return a};f.removeCollinearVectices=function(a,c,b,d,h){if(!c||!c.coords||
!c.coords.length)return null;b=ma[b];var k=c.coords;c=c.lengths;var f=g(d,h,d,h);d=e(d,h);for(var l=h=0,m=0,u=0,E=0;E<c.length;E++){var x=c[E],l=u;f(a.coords,k,l,h,k[h],k[h+1]);h+=d;var n=k[h],w=k[h+1],r=n,p=w,A=w/n,l=l+d;f(a.coords,k,l,h,r,p);h+=d;for(var t=2;t<x;t++){var n=k[h],w=k[h+1],z=w/n,ea=A===z||!isFinite(A)&&!isFinite(z),A=ea&&isFinite(z)?0<=A&&0<=z||0>=A&&0>=z:0<=p&&0<=w||0>=p&&0>=w;ea&&A?(r+=n,p+=w):(r=n,p=w,l+=d);f(a.coords,k,l,h,r,p);h+=d;A=z}l+=d;x=(l-u)/d;x>=b&&(a.lengths[m]=x,u=l,
m++)}a.coords.length>l&&(a.coords.length=l);a.lengths.length>m&&(a.lengths.length=m);return a.coords.length?a:null}})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(M,f){function p(a,b){return"0"!==a.min&&b.length<Number(a.min)||"*"!==a.max&&b.length>Number(a.max)?-2:1}function n(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature=
{min:"0",max:"*"}),p(d.signature,b)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),p(d.signature,b)):-1}function m(a,b){if(a)for(var c=0;c<a.length;c++)k(a[c],b)}function k(a,b){if(a&&!1!==b(a))switch(a.type){case "ArrayExpression":m(a.elements,b);break;case "AssignmentExpression":case "BinaryExpression":k(a.left,b);k(a.right,b);break;case "BlockStatement":m(a.body,
b);break;case "CallExpression":k(a.callee,b);m(a.arguments,b);break;case "ConditionalExpression":k(a.test,b);k(a.alternate,b);k(a.consequent,b);break;case "DoWhileStatement":k(a.test,b);k(a.body,b);break;case "ExpressionStatement":k(a.expression,b);break;case "ForInStatement":k(a.left,b);k(a.right,b);k(a.body,b);break;case "ForStatement":k(a.init,b);k(a.test,b);k(a.update,b);k(a.body,b);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":k(a.id,b);m(a.params,b);k(a.body,
b);break;case "IfStatement":k(a.test,b);k(a.consequent,b);k(a.alternate,b);break;case "LogicalExpression":k(a.left,b);k(a.right,b);break;case "MemberExpression":k(a.object,b);k(a.property,b);break;case "NewExpression":k(a.callee,b);m(a.arguments,b);break;case "ObjectExpression":m(a.properties,b);break;case "Program":m(a.body,b);break;case "Property":k(a.key,b);k(a.value,b);break;case "ReturnStatement":k(a.argument,b);break;case "UnaryExpression":k(a.argument,b);break;case "UpdateExpression":k(a.argument,
b);break;case "VariableDeclaration":m(a.declarations,b);break;case "VariableDeclarator":k(a.id,b),k(a.init,b)}}function r(a,d){void 0===d&&(d=!0);var c=b(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?b(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?b(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?r(a.init,!1):"";case "VariableDeclaration":for(var h=0;h<a.declarations.length;h++)if(c=r(a.declarations[h],
d),""!==c)return c;return"";case "ForInStatement":c=r(a.left,d);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return b(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return b(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return b(a,"SYNTAX","LEFTNOTVAR");c=r(a.right,d);if(""!==c)break;c=r(a.body,d);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=r(a.test,d),""!==c))break;if(null!==a.init&&(c=r(a.init,d),
""!==c))break;if(null!==a.update&&(c=r(a.update,d),""!==c))break;if(null!==a.body&&(c=r(a.body,d),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=r(a.test,d);if(""!==c)break;if(null!==a.consequent&&(c=r(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=r(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var e=[],h=0;h<a.body.length;h++)"EmptyStatement"!==a.body[h].type&&e.push(a.body[h]);
a.body=e;for(h=0;h<a.body.length;h++)if(c=r(a.body[h],d),""!==c)return c;return"";case "FunctionDeclaration":return!1===d?b(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?b(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):r(a.body,!1);case "ReturnStatement":return null!==a.argument?r(a.argument,d):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?b(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):r(a.argument,d);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return b(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=r(a.left,d);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return b(a,"SYNTAX","OPERATORNOTRECOGNISED")}return r(a.right,!1);case "ExpressionStatement":return r(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=r(a.object,d);if(""!==c)break;return!0===a.computed?r(a.property,d):"";case "Literal":return"";case "CallExpression":if("Identifier"!==
a.callee.type)return b(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(h=0;h<a.arguments.length;h++)if(c=r(a.arguments[h],d),""!==c)return c;return"";case "UnaryExpression":c=r(a.argument,d);break;case "BinaryExpression":c=r(a.left,d);if(""!==c)break;c=r(a.right,d);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return b(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
r(a.left,d);if(""!==c)break;c=r(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return b(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return b(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(h=0;h<a.elements.length&&(c=r(a.elements[h],d),""===c);h++);break;case "ObjectExpression":c="";for(h=0;h<a.properties.length;h++){c="";if(null!==a.properties[h].key&&("Literal"!==a.properties[h].key.type&&"Identifier"!==a.properties[h].key.type&&
(c=b(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[h].key.type)){var e=a.properties[h].key,g="value"in e?e.value:null;"string"===typeof g||g instanceof String||(c=b(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=r(a.properties[h],d));if(""!==c)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return b(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=r(a.key,d),""!==c))break;c=r(a.value,d)}return c}catch(t){throw t;}}function l(a,
h){var c=b(a,"SYNTAX","UNREOGNISED"),e=null,k="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return b(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var f=null===a.init?"":l(a.init,h);if(""!==f)return f;"Identifier"===a.id.type&&(null===h.localScope?h.globalScope[a.id.name.toLowerCase()]={type:"any"}:h.localScope[a.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":e=g(a.id.name.toLowerCase(),a);k=d(a,h);if(""!==k)return k;if(null!==
h.localScope)return b(a,"SYNTAX","GLOBALFUNCTIONSONLY");e.isnative=!1;h.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]};return"";case "VariableDeclaration":for(var c="",m=0;m<a.declarations.length&&(c=l(a.declarations[m],h),""===c);m++);break;case "IfStatement":c=l(a.test,h);if(""!==c)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return b(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(c=l(a.consequent,h),
""!==c))break;if(null!==a.alternate&&(c=l(a.alternate,h),""!==c))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(c=l(a.body[m],h),""!==c)return c;return"";case "ReturnStatement":return null!==a.argument?l(a.argument,h):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return b(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return b(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return b(a,
"SYNTAX","LEFTNOTVAR");c=l(a.left,h);if(""!==c)break;c=l(a.right,h);if(""!==c)break;c=l(a.body,h);if(""!==c)break;return"";case "ForStatement":if(null!==a.init&&(c=l(a.init,h),""!==c))break;if(null!==a.test&&(c=l(a.test,h),""!==c))break;if(null!==a.body&&(c=l(a.body,h),""!==c))break;if(null!==a.update&&(c=l(a.update,h),""!==c))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return b(a,
"SYNTAX","ASSIGNMENTTOVARSONLY");var u=!1;if("MemberExpression"===a.argument.type)return l(a.argument,h);null!==h.localScope&&void 0!==h.localScope[a.argument.name.toLowerCase()]&&(u=!0);void 0!==h.globalScope[a.argument.name.toLowerCase()]&&(u=!0);return!1===u?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return b(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var x=l(a.right,h);if(""!==x)return x;u=!1;if("MemberExpression"===
a.left.type)return x=l(a.left,h),""!==x?x:"";null!==h.localScope&&void 0!==h.localScope[a.left.name.toLowerCase()]&&(u=!0);void 0!==h.globalScope[a.left.name.toLowerCase()]&&(u=!0);return!1===u?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return l(a.expression,h);case "Identifier":var w=a.name.toLowerCase();if(null!==h.localScope&&void 0!==h.localScope[w])return"";c=void 0!==h.globalScope[w]?"":b(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":c=l(a.object,
h);if(""!==c)break;return!0===a.computed?l(a.property,h):"";case "Literal":return"";case "CallExpression":if("Identifier"!==a.callee.type)return b(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(m=0;m<a.arguments.length;m++)if(c=l(a.arguments[m],h),""!==c)return c;var r=n(a.callee.name,a.arguments,h);-1===r&&(c=b(a,"SYNTAX","NOTFOUND"));-2===r&&(c=b(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":c=l(a.argument,h);break;case "BinaryExpression":c=l(a.left,h);if(""!==c)break;c=l(a.right,h);if(""!==
c)break;return"";case "LogicalExpression":c=l(a.left,h);if(""!==c)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return b(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");c=l(a.right,h);if(""!==c)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?b(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return b(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(m=0;m<a.elements.length&&
(c=l(a.elements[m],h),""===c);m++);break;case "ObjectExpression":c="";for(m=0;m<a.properties.length;m++){c="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(c=b(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[m].key.type)){var p=a.properties[m].key,A="value"in p?p.value:null;"string"===typeof A||A instanceof String||(c=b(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===c&&(c=l(a.properties[m],h));if(""!==c)break}break;
case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return b(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=l(a.key,h),""!==c))break;c=l(a.value,h)}return c}catch(H){throw H;}}function e(a,b){var c=!1,d=b.toLowerCase();k(a,function(a){if(c)return!1;"Identifier"===a.type&&a.name&&a.name.toLowerCase()===d&&(c=!0);return!0});return c}function g(a,b){var c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}
function d(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return l(a.body,b)}function u(a,b,c,d){var h={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};h.infinity={type:"any"};h.textformatting={type:"any"};h.pi={type:"any"};for(var e in b)"sync"===d&&void 0!==b[e].min?h[e]={type:"FormulaFunction",signature:{min:b[e].min,max:b[e].max}}:"sync"!==d&&void 0!==b[e].fmin&&(h[e]={type:"FormulaFunction",
signature:{min:b[e].fmin,max:b[e].fmax}});for(b=0;b<c.length;b++)e=c[b],h[e.name]={type:"FormulaFunction",signature:e};for(e in a)h[e]=a[e],h[e].type="any";return h}function b(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+=
"Cannot find member property. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:"":"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?"Identifier"===a.property.type?a.property.name:
"":""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTAFUNCTION":d+="Not a Function: ";d+="Identifier"===a.callee.type?a.callee.name:"";break;case "NOTFOUND":d+=
"Function Not Found: "+("Identifier"===a.callee.type?a.callee.name:"")}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+=
"Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;default:d+="Expression contains unrecognised code structures."}}catch(O){throw O;}return d}function w(a,d,c){return{line:a.loc.start.line,
character:a.loc.start.column,reason:b(a,d,c)}}function z(a,b,c,d){b={globalScope:b.globalScope,localScope:{}};for(var h=0;h<a.params.length;h++)b.localScope[a.params[h].name.toLowerCase()]={type:"any"};A(a.body,b,c,d,!1)}function A(a,b,c,d,e){void 0===e&&(e=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var h=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){d.push(w(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==
a.id.type?d.push(w(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null!==a.init&&A(a.init,b,c,d,e);break;case "FunctionDeclaration":!1===e&&d.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&d.push(w(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=g("",a);z(a,b,c,d);null!==b.localScope&&d.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=
!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[h]});break;case "VariableDeclaration":for(var k=0;k<a.declarations.length;k++)A(a.declarations[k],b,c,d,e);break;case "IfStatement":null!==a.test&&(A(a.test,b,c,d,e),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||d.push(w(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&A(a.consequent,b,c,d,e);null!==a.alternate&&A(a.alternate,b,c,d,e);break;
case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)A(a.body[k],b,c,d,e);break;case "ReturnStatement":null!==a.argument&&A(a.argument,b,c,d,e);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&d.push(w(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&d.push(w(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&d.push(w(a,"SYNTAX","LEFTNOTVAR"));A(a.left,b,c,d,e);A(a.right,b,c,d,e);A(a.body,
b,c,d,e);break;case "ForStatement":null!==a.init&&A(a.init,b,c,d,e);null!==a.test&&A(a.test,b,c,d,e);null!==a.body&&A(a.body,b,c,d,e);null!==a.update&&A(a.update,b,c,d,e);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?d.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(h=!1,!1===c&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(h=!0),
void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(h=!0),!1===h&&d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&A(a.argument,b,c,d,e));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&d.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:d.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}A(a.right,b,c,d,e);h=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(h=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(h=!0),!1===c&&!1===h&&d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.left.name+" has not been declared."}));"MemberExpression"===a.left.type&&A(a.left,b,c,d,e);break;case "ExpressionStatement":A(a.expression,
b,c,d,e);break;case "Identifier":var f=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[f]||void 0!==b.globalScope[f])break;!1===c&&d.push(w(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":A(a.object,b,c,d,e);!0===a.computed&&A(a.property,b,c,d,e);break;case "Literal":break;case "CallExpression":"Identifier"!==a.callee.type&&d.push(w(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)A(a.arguments[k],b,c,d,e);if("Identifier"===a.callee.type){var l=n(a.callee.name,
a.arguments,b);!1===c&&-1===l&&d.push(w(a,"SYNTAX","NOTFOUND"));-2===l&&d.push(w(a,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":A(a.argument,b,c,d,e);break;case "BinaryExpression":A(a.left,b,c,d,e);A(a.right,b,c,d,e);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:d.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:d.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}A(a.left,b,c,d,e);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||d.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));A(a.right,b,c,d,e);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||d.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":d.push(w(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)A(a.elements[k],
b,c,d,e);break;case "ObjectExpression":for(k=0;k<a.properties.length;k++)A(a.properties[k],b,c,d,e);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&d.push(w(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&A(a.key,b,c,d,e);A(a.value,b,c,d,e);break;default:d.push(w(a,"SYNTAX","UNRECOGNISED"))}}catch(ja){d.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function J(a){var b=[];k(a,function(a){"CallExpression"===
a.type&&"Identifier"===a.callee.type&&b.push(a.callee.name.toLowerCase());return!0});return b}Object.defineProperty(f,"__esModule",{value:!0});f.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},
millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"}};for(var ga in f.functionDecls)f.functionDecls[ga].fmin=f.functionDecls[ga].min,f.functionDecls[ga].fmax=f.functionDecls[ga].max;var ea="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),x="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
f.addFunctionDeclaration=function(a,b){var c=f.functionDecls[a.name.toLowerCase()];void 0===c?"sync"===b?f.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max}:f.functionDecls[a.name.toLowerCase()]={fmin:a.min,fmax:a.max}:"sync"===b?(c.min=a.min,c.max=a.max):(c.fmin=a.min,c.fmax=a.max)};f.checkFunctionSignature=p;f.findFunction=n;f.walk=k;f.validateLanguageNode=r;f.testValidityOfExpression=l;f.referencesMember=e;f.referencesFunction=function(a,b){var c=!1,d=b.toLowerCase();k(a,function(a){return c?
!1:"CallExpression"===a.type&&"Identifier"===a.callee.type&&a.callee.name&&a.callee.name.toLowerCase()===d?(c=!0,!1):!0});return c};f.findFieldLiterals=function(a){var b=[];k(a,function(a){if("MemberExpression"!==a.type||"Identifier"!==a.object.type)return!0;!1===a.computed&&a.object&&a.object.name&&a.property&&"Identifier"===a.property.type&&a.property.name?b.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase()):a.object&&a.object.name&&a.property&&"Literal"===a.property.type&&"string"===
typeof a.property.value&&b.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase());return!1});return b};f.extractFunctionDeclaration=g;f.validateFunction=d;f.constructGlobalScope=u;f.validateScript=function(a,b,c,d){void 0===c&&(c="async");void 0===d&&(d=f.functionDecls);b={globalScope:u(b.vars,d,b.customFunctions,c),localScope:null};return l(a.body[0].body,b)};f.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":r(a.body[0].body)};
f.nodeErrorMessage=b;f.makeError=w;f.extractAllIssuesInFunction=z;f.extractAllIssues=A;f.checkScript=function(a,b,c,d,e){void 0===d&&(d="async");void 0===e&&(e=f.functionDecls);var h=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:u(b.vars,e,b.customFunctions,d),localScope:null};try{A(a.body[0].body,b,c,h)}catch(t){}return h};f.findFunctionCalls=J;f.findScriptDependencies=function(a,
b){void 0===b&&(b=[]);var c=null;if(void 0===a.usesFeatureSet){null===c&&(c=J(a));a.usesFeatureSet=!1;for(var d=0;d<c.length;d++)-1<ea.indexOf(c[d])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&b&&0<b.length)for(d=0;d<b.length;d++)if(e(a,b[d])){a.usesFeatureSet=!0;a.isAsync=!0;break}}if(void 0===a.usesGeometry)for(a.usesGeometry=!1,null===c&&(c=J(a)),d=0;d<c.length;d++)-1<x.indexOf(c[d])&&(a.usesGeometry=!0)};f.scriptUsesFeatureSet=function(a){a=J(a);for(var b=0;b<a.length;b++)if(-1<
ea.indexOf(a[b]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(M,f,p){function n(f){return null===f?f:isNaN(f.getTime())?null:f}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,k){f.today=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,0,0);e=new Date;e.setHours(0,0,0,0);return e})};f.now=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,0,0);return new Date})};f.timestamp=function(f,
l){return k(f,l,function(e,g,d){p.pcCheck(d,0,0);e=new Date;return e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};f.toutc=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?null:new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};f.tolocal=function(f,l){return k(f,l,function(e,g,
d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?null:p.MomentLibrary.Moment.utc([e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]).toDate()})};f.day=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getDate()})};f.month=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getMonth()})};f.year=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,
1,1);e=p.toDate(d[0]);return null===e?NaN:e.getFullYear()})};f.hour=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getHours()})};f.second=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getSeconds()})};f.millisecond=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getMilliseconds()})};f.minute=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,
1,1);e=p.toDate(d[0]);return null===e?NaN:e.getMinutes()})};f.weekday=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,1,1);e=p.toDate(d[0]);return null===e?NaN:e.getDay()})};f.date=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,0,7);if(3===d.length)return n(new Date(p.toNumber(d[0]),p.toNumber(d[1]),p.toNumber(d[2]),0,0,0,0));if(4===d.length)return n(new Date(p.toNumber(d[0]),p.toNumber(d[1]),p.toNumber(d[2]),p.toNumber(d[3]),0,0,0));if(5===d.length)return n(new Date(p.toNumber(d[0]),
p.toNumber(d[1]),p.toNumber(d[2]),p.toNumber(d[3]),p.toNumber(d[4]),0,0));if(6===d.length)return n(new Date(p.toNumber(d[0]),p.toNumber(d[1]),p.toNumber(d[2]),p.toNumber(d[3]),p.toNumber(d[4]),p.toNumber(d[5]),0));if(7===d.length)return n(new Date(p.toNumber(d[0]),p.toNumber(d[1]),p.toNumber(d[2]),p.toNumber(d[3]),p.toNumber(d[4]),p.toNumber(d[5]),p.toNumber(d[6])));if(2===d.length){e=p.toString(d[1]);if(""===e)return null;e=p.standardiseDateFormat(e);d=p.MomentLibrary.Moment(p.toString(d[0]),e,!0);
return!0===d.isValid()?d.toDate():null}if(1===d.length){if(p.isString(d[0])&&""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;e=p.toNumber(d[0]);return!1===isNaN(e)?n(new Date(e)):p.toDate(d[0])}if(0===d.length)return new Date})};f.datediff=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,2,3);e=p.toDateM(d[0]);g=p.toDateM(d[1]);if(null===e||null===g)return NaN;switch(p.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return e.diff(g,"days",!0);case "months":case "month":return e.diff(g,
"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?e.diff(g,"months",!0):e.diff(g,"minutes",!0);case "seconds":case "second":case "s":return e.diff(g,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return e.diff(g);case "hours":case "hour":case "h":return e.diff(g,"hours",!0);case "years":case "year":case "y":return e.diff(g,"years",!0);default:return e.diff(g)}})};f.dateadd=function(f,l){return k(f,l,function(e,g,d){p.pcCheck(d,2,3);e=p.toDateM(d[0]);if(null===e)return null;
g="milliseconds";switch(p.toString(d[2]).toLowerCase()){case "days":case "day":case "d":g="days";break;case "months":case "month":g="months";break;case "minutes":case "minute":case "m":g="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":g="seconds";break;case "milliseconds":case "millisecond":case "ms":g="milliseconds";break;case "hours":case "hour":case "h":g="hours";break;case "years":case "year":case "y":g="years"}e.add(p.toNumber(d[1]),g);return e.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d,u,b,w,z){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,J){f.ringisclockwise=function(b,d){return J(b,d,function(b,a,d){k.pcCheck(d,1,1);b=[];var c=a=!1;if(null===d[0])return!1;if(k.isArray(d[0])){for(var e=0,h=d[0];e<h.length;e++){var f=h[e];if(f instanceof g)b.push(f.hasZ?f.hasM?[f.x,f.y,f.z,f.m]:[f.x,f.y,f.z]:[f.x,f.y]);else throw Error("Invalid Argument");}0<b.length&&(a=d[0][0].hasZ,c=d[0][0].hasM)}else if(d[0]instanceof m)b=d[0]._elements,
0<b.length&&(a=d[0]._hasZ,c=d[0]._hasM);else if(k.isImmutableArray(d[0])){e=0;for(h=d[0].toArray();e<h.length;e++)if(f=h[e],f instanceof g)b.push(f.hasZ?f.hasM?[f.x,f.y,f.z,f.m]:[f.x,f.y,f.z]:[f.x,f.y]);else throw Error("Invalid Argument");0<b.length&&(a=d[0].get(0).hasZ,c=d[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>b.length?!1:z.isClockwise(b,c,a)})};f.polygon=function(b,e){return J(b,e,function(e,a,h){k.pcCheck(h,1,1);e=null;if(h[0]instanceof p){if(e=k.fixSpatialReference(n.parseGeometryFromDictionary(h[0]),
b.spatialReference),!1===e instanceof d)throw Error("Illegal Parameter");}else e=h[0]instanceof d?w.fromJSON(h[0].toJSON()):k.fixSpatialReference(new d(JSON.parse(h[0])),b.spatialReference);if(null!==e&&!1===e.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(e)})};f.polyline=function(b,d){return J(b,d,function(d,a,e){k.pcCheck(e,1,1);d=null;if(e[0]instanceof p){if(d=k.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference),!1===d instanceof u)throw Error("Illegal Parameter");}else d=e[0]instanceof u?w.fromJSON(e[0].toJSON()):k.fixSpatialReference(new u(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(d)})};f.point=function(b,d){return J(b,d,function(d,a,e){k.pcCheck(e,1,1);d=null;if(e[0]instanceof p){if(d=k.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference),!1===d instanceof g)throw Error("Illegal Parameter");}else d=e[0]instanceof g?w.fromJSON(e[0].toJSON()):k.fixSpatialReference(new g(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(d)})};f.multipoint=function(b,d){return J(b,d,function(d,a,h){k.pcCheck(h,1,1);d=null;if(h[0]instanceof p){if(d=
k.fixSpatialReference(n.parseGeometryFromDictionary(h[0]),b.spatialReference),!1===d instanceof e)throw Error("Illegal Parameter");}else d=h[0]instanceof e?w.fromJSON(h[0].toJSON()):k.fixSpatialReference(new e(JSON.parse(h[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(d)})};f.extent=function(b,f){return J(b,f,function(f,
a,h){h=k.autoCastFeatureToGeometry(h);k.pcCheck(h,1,1);f=null;h[0]instanceof p?f=k.fixSpatialReference(n.parseGeometryFromDictionary(h[0]),b.spatialReference):h[0]instanceof g?(f={xmin:h[0].x,ymin:h[0].y,xmax:h[0].x,ymax:h[0].y,spatialReference:h[0].spatialReference.toJSON()},h[0].hasZ?(f.zmin=h[0].z,f.zmax=h[0].z):h[0].hasM&&(f.mmin=h[0].m,f.mmax=h[0].m),f=w.fromJSON(f)):f=h[0]instanceof d?w.fromJSON(h[0].extent.toJSON()):h[0]instanceof u?w.fromJSON(h[0].extent.toJSON()):h[0]instanceof e?w.fromJSON(h[0].extent.toJSON()):
h[0]instanceof r?w.fromJSON(h[0].toJSON()):k.fixSpatialReference(new r(JSON.parse(h[0])),b.spatialReference);if(null!==f&&!1===f.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(f)})};f.geometry=function(b,d){return J(b,d,function(d,a,e){k.pcCheck(e,1,1);d=null;d=e[0]instanceof n?k.fixSpatialReference(e[0].geometry(),b.spatialReference):e[0]instanceof p?k.fixSpatialReference(n.parseGeometryFromDictionary(e[0]),
b.spatialReference):k.fixSpatialReference(w.fromJSON(JSON.parse(e[0])),b.spatialReference);if(null!==d&&!1===d.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return k.fixNullGeometry(d)})};f.setgeometry=function(b,d){return J(b,d,function(b,a,d){k.pcCheck(d,2,2);if(d[0]instanceof n){if(!0===d[0].immutable)throw Error("Feature is Immutable");if(d[1]instanceof l||null===d[1])d[0]._geometry=d[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return k.voidOperation})};f.feature=function(b,d){return J(b,d,function(d,a,e){if(0===e.length)throw Error("Missing Parameters");d=null;if(1===e.length)if(k.isString(e[0]))d=n.fromJson(JSON.parse(e[0]));else if(e[0]instanceof n)d=n.createFromArcadeFeature(e[0]);else if(e[0]instanceof l)d=n.createFromGraphicLikeObject(e[0],null,null);else if(e[0]instanceof p)d=e[0].hasField("geometry")?e[0].field("geometry"):null,a=e[0].hasField("attributes")?
e[0].field("attributes"):null,null!==d&&d instanceof p&&(d=n.parseGeometryFromDictionary(d)),null!==a&&(a=n.parseAttributesFromDictionary(a)),d=n.createFromGraphicLikeObject(d,a,null);else throw Error("Illegal Argument");else{if(2===e.length){a=d=null;if(null!==e[0])if(e[0]instanceof l)d=e[0];else if(d instanceof p)d=n.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");if(null!==e[1])if(e[1]instanceof p)a=n.parseAttributesFromDictionary(e[1]);else throw Error("Illegal Argument");
}else{d=null;a={};if(null!==e[0])if(e[0]instanceof l)d=e[0];else if(d instanceof p)d=n.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");for(var c=1;c<e.length;c+=2){var g=k.toString(e[c]),h=e[c+1];if(null===h||void 0===h||k.isString(h)||isNaN(h)||k.isDate(h)||k.isNumber(h)||k.isBoolean(h)){if(k.isFunctionParameter(h)||!1===k.isSimpleType(h))throw Error("Illegal Argument");a[g]=h===k.voidOperation?null:h}else throw Error("Illegal Argument");}}d=n.createFromGraphicLikeObject(d,
a,null)}d._geometry=k.fixSpatialReference(d.geometry(),b.spatialReference);d.immutable=!1;return d})};f.dictionary=function(b,d){return J(b,d,function(b,a,d){if(0===d.length)return d=new p,d.immutable=!1,d;if(1===d.length&&k.isString(d[0]))try{var c=JSON.parse(d[0]),e=p.convertObjectToArcadeDictionary(c);e.immutable=!1;return e}catch(O){throw Error("Missing Parameters or Illegal Json");}if(0!==d.length%2)throw Error("Missing Parameters");b={};for(a=0;a<d.length;a+=2)if(c=k.toString(d[a]),e=d[a+1],
null===e||void 0===e||k.isString(e)||isNaN(e)||k.isDate(e)||k.isNumber(e)||k.isBoolean(e)||k.isArray(e)||k.isImmutableArray(e)){if(k.isFunctionParameter(e))throw Error("Illegal Argument");b[c]=e===k.voidOperation?null:e}else throw Error("Illegal Argument");d=new p(b);d.immutable=!1;return d})};f.haskey=function(b,d){return J(b,d,function(b,a,d){k.pcCheck(d,2,2);b=k.toString(d[1]);if(d[0]instanceof n||d[0]instanceof p)return d[0].hasField(b);throw Error("Illegal Argument");})};f.indexof=function(b,
d){return J(b,d,function(b,a,d){k.pcCheck(d,2,2);b=d[1];if(k.isArray(d[0])){for(a=0;a<d[0].length;a++)if(k.equalityTest(b,d[0][a]))return a;return-1}if(k.isImmutableArray(d[0])){var c=d[0].length();for(a=0;a<c;a++)if(k.equalityTest(b,d[0].get(a)))return a;return-1}throw Error("Illegal Argument");})};f.angle=function(d,e){return J(d,e,function(d,a,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);if(!(e[0]instanceof g))throw Error("Illegal Argument");if(!(e[1]instanceof g))throw Error("Illegal Argument");
if(2<e.length&&!(e[2]instanceof g))throw Error("Illegal Argument");return 2===e.length?b.angle2D(e[0],e[1]):b.angleBetween2D(e[0],e[1],e[2])})};f.bearing=function(d,e){return J(d,e,function(d,a,e){e=k.autoCastFeatureToGeometry(e);k.pcCheck(e,2,3);if(!(e[0]instanceof g))throw Error("Illegal Argument");if(!(e[1]instanceof g))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof g))throw Error("Illegal Argument");return 2===e.length?b.bearing2D(e[0],e[1]):b.bearingBetween2D(e[0],e[1],e[2])})};
f.isselfintersecting=function(g,f){return J(g,f,function(f,a,h){h=k.autoCastFeatureToGeometry(h);k.pcCheck(h,1,1);f=h[0];if(f instanceof d)return f.isSelfIntersecting;if(f instanceof u)return f=f.paths,b.pathsSelfIntersecting(f);if(f instanceof e)for(a=f.points,h=0;h<a.length;h++)for(var c=0;c<a.length;c++)if(c!==h){for(var l=!0,m=0;m<a[h].length;m++)if(a[h][m]!==a[c][m]){l=!1;break}if(!0===l)return!0}return k.isArray(f)||k.isImmutableArray(f)?(f=k.autoCastArrayOfPointsToPolyline(f,g.spatialReference),
null!==f&&(f=f.paths),b.pathsSelfIntersecting(f)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point","../../geometry/support/intersects"],function(M,f,p,n){function m(d,e,b){var g={x:0,y:0};e&&(g.z=0);b&&(g.m=0);for(var f=0,l=d[0],m=0;m<d.length;m++){var u=d[m],n;a:if(u.length!==l.length)n=!1;else{for(n=0;n<u.length;n++)if(u[n]!==l[n]){n=!1;break a}n=!0}if(!1===n){n=k(l,u,e);var r=u,a=e,h=b,c={x:(l[0]+r[0])/2,y:(l[1]+r[1])/2};a&&(c.z=(l[2]+r[2])/
2);a&&h?c.m=(l[3]+r[3])/2:h&&(c.m=(l[2]+r[2])/2);l=c;l.x*=n;l.y*=n;g.x+=l.x;g.y+=l.y;e&&(l.z*=n,g.z+=l.z);b&&(l.m*=n,g.m+=l.m);f+=n;l=u}}0<f?(g.x/=f,g.y/=f,e&&(g.z/=f),b&&(g.m/=f)):(g.x=d[0][0],g.y=d[0][1],e&&(g.z=d[0][2]),b&&e?g.m=d[0][3]:b&&(g.m=d[0][2]));return g}function k(d,e,b){var g=e[0]-d[0];d=e[1]-d[1];return b?(e=e[2]-e[2],Math.sqrt(g*g+d*d+e*e)):Math.sqrt(g*g+d*d)}function r(d,e,b){for(void 0===b&&(b=0);d<b;)d+=e;for(b+=e;d>=b;)d-=e;return d}function l(d,e){return Math.atan2(e.y-d.y,e.x-
d.x)}function e(d,e,b){var g=d.x-e.x;d=d.y-e.y;var f=b.x-e.x;e=b.y-e.y;return Math.atan2(f*d-g*e,f*g+e*d)}Object.defineProperty(f,"__esModule",{value:!0});f.centroidPolyline=function(d){for(var e={x:0,y:0,spatialReference:d.spatialReference.toJSON()},b={x:0,y:0,spatialReference:d.spatialReference.toJSON()},g=0,f=0,l=0;l<d.paths.length;l++)if(0!==d.paths[l].length){var n;n=d.paths[l];var r=!0===d.hasZ;if(1>=n.length)n=0;else{for(var ea=0,x=1;x<n.length;x++)ea+=k(n[x-1],n[x],r);n=ea}0===n?(r=m(d.paths[l],
!0===d.hasZ,!0===d.hasM),e.x+=r.x,e.y+=r.y,!0===d.hasZ&&(e.z+=r.z),!0===d.hasM&&(e.m+=r.m),++g):(r=m(d.paths[l],!0===d.hasZ,!0===d.hasM),b.x+=r.x*n,b.y+=r.y*n,!0===d.hasZ&&(b.z+=r.z*n),!0===d.hasM&&(b.m+=r.m*n),f+=n)}return 0<f?(b.x/=f,b.y/=f,!0===d.hasZ&&(b.z/=f),!0===d.hasM&&(b.m/=f),new p(b)):0<g?(e.x/=g,e.y/=g,!0===d.hasZ&&(b.z/=g),!0===d.hasM&&(e.m/=g),new p(e)):null};f.centroidMultiPoint=function(d){if(0===d.points.length)return null;for(var e=0,b=0,g=0,f=0,k=0;k<d.points.length;k++){var l=
d.getPoint(k);!0===l.hasZ&&(g+=l.z);!0===l.hasM&&(f+=l.m);e+=l.x;b+=l.y;f+=l.m}e={x:e/d.points.length,y:b/d.points.length,spatialReference:null};e.spatialReference=d.spatialReference.toJSON();!0===d.hasZ&&(e.z=g/d.points.length);!0===d.hasM&&(e.m=f/d.points.length);return new p(e)};f.angleRad=l;f.angle2D=function(d,e){return r(l(d,e),2*Math.PI)*(180/Math.PI)};f.bearing2D=function(d,e){return r(Math.PI/2-l(d,e),2*Math.PI)*(180/Math.PI)};f.angleBetweenRad=e;f.angleBetween2D=function(d,g,b){return r(e(d,
g,b),2*Math.PI)*(180/Math.PI)};f.bearingBetween2D=function(d,g,b){return r(-1*e(d,g,b),2*Math.PI)*(180/Math.PI)};var g=[0,0];f.pathsSelfIntersecting=function(d){for(var e=0;e<d.length;e++){for(var b=d[e],f=0;f<b.length-1;f++)for(var k=b[f],l=b[f+1],m=e+1;m<d.length;m++)for(var r=0;r<d[m].length-1;r++){var p=d[m][r],x=d[m][r+1],a=n.segmentIntersects(k,l,p,x,g);if(a&&!(g[0]===k[0]&&g[1]===k[1]||g[0]===p[0]&&g[1]===p[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===x[0]&&g[1]===x[1]))return!0}r=b.length;if(!(3>
r))for(f=0;f<=r-2;f++)for(k=b[f],l=b[f+1],m=f+2;m<=r-2;m++)if(p=b[m],x=b[m+1],(a=n.segmentIntersects(k,l,p,x,g))&&!(g[0]===k[0]&&g[1]===k[1]||g[0]===p[0]&&g[1]===p[1]||g[0]===l[0]&&g[1]===l[1]||g[0]===x[0]&&g[1]===x[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d,u,b){function w(b){return 0===p.version.indexOf("4.")?d.fromExtent(b):new d({spatialReference:b.spatialReference,rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(f,"__esModule",{value:!0});var z=null;f.setGeometryEngine=function(b){z=b};f.registerFunctions=function(f,p){function A(b){m.pcCheck(b,2,2);if(!(b[0]instanceof l&&b[1]instanceof l||b[0]instanceof l&&null===b[1]||b[1]instanceof l&&null===b[0]||
null===b[0]&&null===b[1]))throw Error("Illegal Argument");}f.disjoint=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!0:z.disjoint(c[0],c[1])})};f.intersects=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.intersects(c[0],c[1])})};f.touches=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.touches(c[0],
c[1])})};f.crosses=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.crosses(c[0],c[1])})};f.within=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.within(c[0],c[1])})};f.contains=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.contains(c[0],c[1])})};f.overlaps=function(b,d){return p(b,d,function(a,
b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?!1:z.overlaps(c[0],c[1])})};f.equals=function(b,d){return p(b,d,function(a,b,c){m.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof l&&c[1]instanceof l?z.equals(c[0],c[1]):m.isDate(c[0])&&m.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};f.relate=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,3,3);if(c[0]instanceof l&&c[1]instanceof l)return z.relate(c[0],c[1],m.toString(c[2]));
if(c[0]instanceof l&&null===c[1]||c[1]instanceof l&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};f.intersection=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]||null===c[1]?null:z.intersect(c[0],c[1])})};f.union=function(b,d){return p(b,d,function(a,d,c){c=m.autoCastFeatureToGeometry(c);a=[];if(0===c.length)throw Error("Function called with wrong number of Parameters");if(1===c.length)if(m.isArray(c[0]))for(c=
m.autoCastFeatureToGeometry(c[0]),d=0;d<c.length;d++){if(null!==c[d]){if(!(c[d]instanceof l))throw Error("Illegal Argument");a.push(c[d])}}else if(m.isImmutableArray(c[0]))for(c=m.autoCastFeatureToGeometry(c[0].toArray()),d=0;d<c.length;d++){if(null!==c[d]){if(!(c[d]instanceof l))throw Error("Illegal Argument");a.push(c[d])}}else{if(c[0]instanceof l)return m.fixSpatialReference(n.cloneGeometry(c[0]),b.spatialReference);if(null===c[0])return null;throw Error("Illegal Argument");}else for(d=0;d<c.length;d++)if(null!==
c[d]){if(!(c[d]instanceof l))throw Error("Illegal Argument");a.push(c[d])}return 0===a.length?null:z.union(a)})};f.difference=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null!==c[0]&&null===c[1]?n.cloneGeometry(c[0]):null===c[0]?null:z.difference(c[0],c[1])})};f.symmetricdifference=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);A(c);return null===c[0]&&null===c[1]?null:null===c[0]?n.cloneGeometry(c[1]):null===c[1]?n.cloneGeometry(c[0]):
z.symmetricDifference(c[0],c[1])})};f.clip=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,2);if(!(c[1]instanceof r)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");return null===c[1]?null:z.clip(c[0],c[1])})};f.cut=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,2);if(!(c[1]instanceof u)&&null!==c[1])throw Error("Illegal Argument");if(null===
c[0])return[];if(!(c[0]instanceof l))throw Error("Illegal Argument");return null===c[1]?[n.cloneGeometry(c[0])]:z.cut(c[0],c[1])})};f.area=function(b,d){return p(b,d,function(a,d,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolygon(c[0],b.spatialReference),null===a?0:z.planarArea(a,n.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");
return z.planarArea(c[0],n.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)))})};f.areageodetic=function(b,d){return p(b,d,function(a,d,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolygon(c[0],b.spatialReference),null===a?0:z.geodesicArea(a,n.convertSquareUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return z.geodesicArea(c[0],n.convertSquareUnitsToCode(m.defaultUndefined(c[1],
-1)))})};f.length=function(b,d){return p(b,d,function(a,d,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolyline(c[0],b.spatialReference),null===a?0:z.planarLength(a,n.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return z.planarLength(c[0],n.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)))})};f.lengthgeodetic=function(b,
d){return p(b,d,function(a,d,c){m.pcCheck(c,1,2);c=m.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(m.isArray(c[0])||m.isImmutableArray(c[0]))return a=m.autoCastArrayOfPointsToPolyline(c[0],b.spatialReference),null===a?0:z.geodesicLength(a,n.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)));if(!(c[0]instanceof l))throw Error("Illegal Argument");return z.geodesicLength(c[0],n.convertLinearUnitsToCode(m.defaultUndefined(c[1],-1)))})};f.distance=function(b,d){return p(b,d,function(a,d,
c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];if(m.isArray(c[0])||m.isImmutableArray(c[0]))a=m.autoCastArrayOfPointsToMultiPoint(c[0],b.spatialReference);d=c[1];if(m.isArray(c[1])||m.isImmutableArray(c[1]))d=m.autoCastArrayOfPointsToMultiPoint(c[1],b.spatialReference);if(!(a instanceof l))throw Error("Illegal Argument");if(!(d instanceof l))throw Error("Illegal Argument");return z.distance(a,d,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};f.distancegeodetic=function(b,
d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];b=c[1];if(!(a instanceof g))throw Error("Illegal Argument");if(!(b instanceof g))throw Error("Illegal Argument");var d=new u({paths:[],spatialReference:a.spatialReference});d.addPath([a,b]);return z.geodesicLength(d,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};f.densify=function(b,e){return p(b,e,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof d||c[0]instanceof u?z.densify(c[0],a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]instanceof r?z.densify(w(c[0]),a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]})};f.densifygeodetic=function(b,e){return p(b,e,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof
l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return c[0]instanceof d||c[0]instanceof u?z.geodesicDensify(c[0],a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]instanceof r?z.geodesicDensify(w(c[0]),a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1))):c[0]})};f.generalize=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,4);if(null===c[0])return null;
if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return z.generalize(c[0],a,m.toBoolean(m.defaultUndefined(c[2],!0)),n.convertLinearUnitsToCode(m.defaultUndefined(c[3],-1)))})};f.buffer=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===
a?n.cloneGeometry(c[0]):z.buffer(c[0],a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};f.buffergeodetic=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?n.cloneGeometry(c[0]):z.geodesicBuffer(c[0],a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)))})};f.offset=function(b,e){return p(b,
e,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof d||c[0]instanceof u))throw Error("Illegal Argument");a=m.toNumber(c[1]);if(isNaN(a))throw Error("Illegal Argument");b=m.toNumber(m.defaultUndefined(c[4],10));if(isNaN(b))throw Error("Illegal Argument");var e=m.toNumber(m.defaultUndefined(c[5],0));if(isNaN(e))throw Error("Illegal Argument");return z.offset(c[0],a,n.convertLinearUnitsToCode(m.defaultUndefined(c[2],-1)),m.toString(m.defaultUndefined(c[3],
"round")).toLowerCase(),b,e)})};f.rotate=function(b,e){return p(b,e,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof l))throw Error("Illegal Argument");a instanceof r&&(a=d.fromExtent(a));b=m.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");c=m.defaultUndefined(c[2],null);if(null===c)return z.rotate(a,b);if(c instanceof g)return z.rotate(a,b,c);throw Error("Illegal Argument");})};f.centroid=function(b,f){return p(b,f,function(a,
f,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return null;a=c[0];if(m.isArray(c[0])||m.isImmutableArray(c[0]))a=m.autoCastArrayOfPointsToMultiPoint(c[0],b.spatialReference);if(null===a)return null;if(!(a instanceof l))throw Error("Illegal Argument");return a instanceof g?m.fixSpatialReference(n.cloneGeometry(c[0]),b.spatialReference):a instanceof d?a.centroid:a instanceof u?k.centroidPolyline(a):a instanceof e?k.centroidMultiPoint(a):a instanceof r?a.center:null})};f.multiparttosinglepart=
function(f,k){return p(f,k,function(a,k,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);k=[];if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");if(c[0]instanceof g||c[0]instanceof r)return[m.fixSpatialReference(n.cloneGeometry(c[0]),f.spatialReference)];a=z.simplify(c[0]);if(a instanceof d){k=[];var h=[];for(c=0;c<a.rings.length;c++)if(a.isClockwise(a.rings[c])){var p=b.fromJSON({rings:[a.rings[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});
k.push(p)}else h.push({ring:a.rings[c],pt:a.getPoint(c,0)});for(a=0;a<h.length;a++)for(c=0;c<k.length;c++)if(k[c].contains(h[a].pt)){k[c].addRing(h[a].ring);break}return k}if(a instanceof u){k=[];for(c=0;c<a.paths.length;c++)h=b.fromJSON({paths:[a.paths[c]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()}),k.push(h);return k}if(c[0]instanceof e){a=m.fixSpatialReference(n.cloneGeometry(c[0]),f.spatialReference);for(c=0;c<a.points.length;c++)k.push(a.getPoint(c));return k}return null})};
f.issimple=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return!0;if(!(c[0]instanceof l))throw Error("Illegal Argument");return z.isSimple(c[0])})};f.simplify=function(b,d){return p(b,d,function(a,b,c){c=m.autoCastFeatureToGeometry(c);m.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof l))throw Error("Illegal Argument");return z.simplify(c[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(M,f,p){Object.defineProperty(f,"__esModule",{value:!0});f.convertSquareUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};f.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.extent;case "point":return new p({xmin:f.x,
ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};f.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};f.sameGeomType=function(f,m){return f===m||"point"===f&&"esriGeometryPoint"===m||"polyline"===f&&"esriGeometryPolyline"===m||"polygon"===f&&"esriGeometryPolygon"===m||"extent"===f&&"esriGeometryEnvelope"===m||"multipoint"===f&&"esriGeometryMultipoint"===
m||"point"===m&&"esriGeometryPoint"===f||"polyline"===m&&"esriGeometryPolyline"===f||"polygon"===m&&"esriGeometryPolygon"===f||"extent"===m&&"esriGeometryEnvelope"===f||"multipoint"===m&&"esriGeometryMultipoint"===f?!0:!1};f.cloneGeometry=function(f){if(null===f)return null;var m=f.clone();void 0!==f.cache._geVersion&&(m.cache._geVersion=f.cache._geVersion);return m}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(M,f,p,n){function m(f,
m,l){if("undefined"===typeof l||0===+l)return Math[f](m);m=+m;l=+l;if(isNaN(m)||"number"!==typeof l||0!==l%1)return NaN;m=m.toString().split("e");m=Math[f](+(m[0]+"e"+(m[1]?+m[1]-l:-l)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+l:l))}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,r){function k(e,g,d){e=n.toNumber(e);return isNaN(e)?e:isNaN(g)||isNaN(d)||g>d?NaN:e<g?g:e>d?d:e}f.number=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,2);d=b[0];
return n.isNumber(d)?d:null===d?0:n.isDate(d)||n.isBoolean(d)?Number(d):n.isArray(d)?NaN:""===d||void 0===d?Number(d):n.isString(d)?void 0!==b[1]?(b=n.multiReplace(b[1],"\u2030",""),b=n.multiReplace(b,"\u00a4",""),p.parse(d,{pattern:b})):Number(d.trim()):Number(d)})};f.abs=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.abs(n.toNumber(b[0]))})};f.acos=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.acos(n.toNumber(b[0]))})};f.asin=function(e,g){return r(e,
g,function(d,e,b){n.pcCheck(b,1,1);return Math.asin(n.toNumber(b[0]))})};f.atan=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.atan(n.toNumber(b[0]))})};f.atan2=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,2,2);return Math.atan2(n.toNumber(b[0]),n.toNumber(b[1]))})};f.ceil=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,2);return 2===b.length?(d=n.toNumber(b[1]),isNaN(d)&&(d=0),m("ceil",n.toNumber(b[0]),-1*d)):Math.ceil(n.toNumber(b[0]))})};f.round=function(e,
g){return r(e,g,function(d,e,b){n.pcCheck(b,1,2);return 2===b.length?(d=n.toNumber(b[1]),isNaN(d)&&(d=0),m("round",n.toNumber(b[0]),-1*d)):Math.round(n.toNumber(b[0]))})};f.floor=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,2);return 2===b.length?(d=n.toNumber(b[1]),isNaN(d)&&(d=0),m("floor",n.toNumber(b[0]),-1*d)):Math.floor(n.toNumber(b[0]))})};f.cos=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.cos(n.toNumber(b[0]))})};f.isnan=function(e,g){return r(e,g,function(d,
e,b){n.pcCheck(b,1,1);return"number"===typeof b[0]&&isNaN(b[0])})};f.exp=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.exp(n.toNumber(b[0]))})};f.log=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.log(n.toNumber(b[0]))})};f.pow=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,2,2);return Math.pow(n.toNumber(b[0]),n.toNumber(b[1]))})};f.random=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,0,0);return Math.random()})};f.sin=function(e,
g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.sin(n.toNumber(b[0]))})};f.sqrt=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.sqrt(n.toNumber(b[0]))})};f.tan=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return Math.tan(n.toNumber(b[0]))})};f.defaultvalue=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,2,2);return null===b[0]||""===b[0]||void 0===b[0]?b[1]:b[0]})};f.isempty=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return null===
b[0]||""===b[0]||void 0===b[0]?!0:!1})};f["boolean"]=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,1,1);return n.toBoolean(b[0])})};f.constrain=function(e,g){return r(e,g,function(d,e,b){n.pcCheck(b,3,3);d=n.toNumber(b[1]);e=n.toNumber(b[2]);if(n.isArray(b[0])){var g=[],f=0;for(b=b[0];f<b.length;f++)g.push(k(b[f],d,e));return g}if(n.isImmutableArray(b[0])){g=[];for(f=0;f<b[0].length();f++)g.push(k(b[0].get(f),d,e));return g}return k(b[0],d,e)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(M,f,p,n){function m(f,m,l,e){if(1===e.length){if(p.isArray(e[0]))return n.calculateStat(f,e[0],-1);if(p.isImmutableArray(e[0]))return n.calculateStat(f,e[0].toArray(),-1)}return n.calculateStat(f,e,-1)}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,n){f.stdev=function(f,e){return n(f,e,function(e,d,f){return m("stdev",e,d,f)})};f.variance=function(f,e){return n(f,e,function(e,d,f){return m("variance",e,d,f)})};
f.average=function(f,e){return n(f,e,function(e,d,f){return m("mean",e,d,f)})};f.mean=function(f,e){return n(f,e,function(e,d,f){return m("mean",e,d,f)})};f.sum=function(f,e){return n(f,e,function(e,d,f){return m("sum",e,d,f)})};f.min=function(f,e){return n(f,e,function(e,d,f){return m("min",e,d,f)})};f.max=function(f,e){return n(f,e,function(e,d,f){return m("max",e,d,f)})};f.distinct=function(f,e){return n(f,e,function(e,d,f){return m("distinct",e,d,f)})};f.count=function(f,e){return n(f,e,function(e,
d,f){p.pcCheck(f,1,1);if(p.isArray(f[0])||p.isString(f[0]))return f[0].length;if(p.isImmutableArray(f[0]))return f[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(M,f,p){function n(f){for(var k=0,l=0;l<f.length;l++)k+=f[l];return k/f.length}function m(f){for(var k=n(f),l=0,e=0;e<f.length;e++)l+=Math.pow(k-f[e],2);return l/f.length}Object.defineProperty(f,"__esModule",{value:!0});
f.decodeStatType=function(f){switch(f.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};f.calculateStat=function(f,r,l){void 0===l&&(l=1E3);switch(f.toLowerCase()){case "distinct":a:{f=l;l=[];for(var e={},g=[],d=0;d<r.length;d++){if(void 0!==r[d]&&null!==r[d]&&r[d]!==p.voidOperation){var k=
r[d];if(p.isNumber(k)||p.isString(k))void 0===e[k]&&(l.push(k),e[k]=1);else{for(var b=!1,w=0;w<g.length;w++)!0===p.equalityTest(g[w],k)&&(b=!0);!1===b&&(g.push(k),l.push(k))}}if(l.length>=f&&-1!==f){r=l;break a}}r=l}return r;case "avg":case "mean":return n(p.toNumberArray(r));case "min":return Math.min.apply(Math,p.toNumberArray(r));case "sum":r=p.toNumberArray(r);for(l=f=0;l<r.length;l++)f+=r[l];return f;case "max":return Math.max.apply(Math,p.toNumberArray(r));case "stdev":case "stddev":return Math.sqrt(m(p.toNumberArray(r)));
case "var":case "variance":return m(p.toNumberArray(r));case "count":return r.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils".split(" "),function(M,f,p,n,m,k){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(f,l){f.portal=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,1);return new p(k.toString(b[0]))})};f.trim=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,
1,1);return k.toString(b[0]).trim()})};f.upper=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,1);return k.toString(b[0]).toUpperCase()})};f.proper=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,2);d=1;2===b.length&&"firstword"===k.toString(b[1]).toLowerCase()&&(d=2);e=/\s/;b=k.toString(b[0]);for(var f="",g=!0,l=0;l<b.length;l++){var m=b[l];e.test(m)?1===d&&(g=!0):m.toUpperCase()!==m.toLowerCase()&&(g?(m=m.toUpperCase(),g=!1):m=m.toLowerCase());f+=m}return f})};f.lower=function(e,
f){return l(e,f,function(d,e,b){k.pcCheck(b,1,1);return k.toString(b[0]).toLowerCase()})};f.guid=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,0,1);if(0<b.length)switch(k.toString(b[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+k.generateUUID()+"}"})};f.console=function(e,f){return l(e,f,function(d,
f,b){0!==b.length&&(1===b.length?e.console(k.toString(b[0])):e.console(k.toString(b)));return k.voidOperation})};f.mid=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,3);d=k.toNumber(b[1]);if(isNaN(d))return"";0>d&&(d=0);if(2===b.length)return k.toString(b[0]).substr(d);e=k.toNumber(b[2]);if(isNaN(e))return"";0>e&&(e=0);return k.toString(b[0]).substr(d,e)})};f.find=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,3);d=0;if(2<b.length){d=k.toNumber(k.defaultUndefined(b[2],0));if(isNaN(d))return-1;
0>d&&(d=0)}return k.toString(b[1]).indexOf(k.toString(b[0]),d)})};f.left=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,2);d=k.toNumber(b[1]);if(isNaN(d))return"";0>d&&(d=0);return k.toString(b[0]).substr(0,d)})};f.right=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,2);d=k.toNumber(b[1]);if(isNaN(d))return"";0>d&&(d=0);return k.toString(b[0]).substr(-1*d,d)})};f.split=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,4);d=k.toNumber(k.defaultUndefined(b[2],-1));e=k.toBoolean(k.defaultUndefined(b[3],
!1));-1===d||null===d||!0===e?b=k.toString(b[0]).split(k.toString(b[1])):(isNaN(d)&&(d=-1),-1>d&&(d=-1),b=k.toString(b[0]).split(k.toString(b[1]),d));if(!1===e)return b;e=[];for(var f=0;f<b.length&&!(-1!==d&&e.length>=d);f++)""!==b[f]&&void 0!==b[f]&&e.push(b[f]);return e})};f.text=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,2);return k.toStringExplicit(b[0],b[1])})};f.concatenate=function(e,f){return l(e,f,function(d,e,b){d=[];if(1>b.length)return"";if(k.isArray(b[0])){e=k.defaultUndefined(b[2],
"");for(var f=0;f<b[0].length;f++)d[f]=k.toStringExplicit(b[0][f],e);return 1<b.length?d.join(b[1]):d.join("")}if(k.isImmutableArray(b[0])){e=k.defaultUndefined(b[2],"");for(f=0;f<b[0].length();f++)d[f]=k.toStringExplicit(b[0].get(f),e);return 1<b.length?d.join(b[1]):d.join("")}for(f=0;f<b.length;f++)d[f]=k.toStringExplicit(b[f]);return d.join("")})};f.reverse=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,1);if(k.isArray(b[0]))return d=b[0].slice(0),d.reverse(),d;if(k.isImmutableArray(b[0]))return d=
b[0].toArray().slice(0),d.reverse(),d;throw Error("Invalid Parameter");})};f.replace=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,3,4);d=k.toString(b[0]);e=k.toString(b[1]);var f=k.toString(b[2]);return(4===b.length?k.toBoolean(b[3]):1)?k.multiReplace(d,e,f):d.replace(e,f)})};f.domainname=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,4);if(b[0]instanceof m)return b[0].domainValueLookup(k.toString(b[1]),b[2],void 0===b[3]?void 0:k.toNumber(b[3]));throw Error("Invalid Parameter");
})};f.domaincode=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,2,4);if(b[0]instanceof m)return b[0].domainCodeLookup(k.toString(b[1]),b[2],void 0===b[3]?void 0:k.toNumber(b[3]));throw Error("Invalid Parameter");})};f.urlencode=function(e,f){return l(e,f,function(d,e,b){k.pcCheck(b,1,1);if(null===b[0])return"";if(b[0]instanceof n){d="";e=0;for(var f=b[0].keys();e<f.length;e++){var g=f[e],l=b[0].field(g);""!==d&&(d+="\x26");d=null===l?d+(encodeURIComponent(g)+"\x3d"):d+(encodeURIComponent(g)+
"\x3d"+encodeURIComponent(l))}return d}return encodeURIComponent(k.toString(b[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(M,f,p,n,m,k,r,l,e,g,d,u,b,w,z,A,J,ga,ea,x,a,h,c,E){function O(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(t(a,b.arguments[d]));return c}function T(a,b,c){try{return c(a,b,O(a,b))}catch(na){throw na;}}function t(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:t(a,b.init);c===g.voidOperation&&(c=null);if("Identifier"!==b.id.type)throw Error("Can only assign a regular variable");var e=b.id.name.toLowerCase();null!==
a.localScope?a.localScope[e]={value:c,valueset:!0,node:b.init}:a.globalScope[e]={value:c,valueset:!0,node:b.init};return g.voidOperation;case "VariableDeclaration":for(var f=0;f<b.declarations.length;f++)t(a,b.declarations[f]);return g.voidOperation;case "BlockStatement":var h;a:{for(var l=g.voidOperation,f=0;f<b.body.length;f++)if(l=t(a,b.body[f]),l instanceof g.ReturnResult||l===g.breakResult||l===g.continueResult){h=l;break a}h=l}return h;case "FunctionDeclaration":var n=b.id.name.toLowerCase();
a.globalScope[n]={valueset:!0,node:null,value:new r(b,a)};return g.voidOperation;case "ReturnStatement":var P;if(null===b.argument)P=new g.ReturnResult(g.voidOperation);else{var G=t(a,b.argument);P=new g.ReturnResult(G)}return P;case "IfStatement":var p;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(d.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var w=t(a,b.test);if(!0===w)p=t(a,b.consequent);else if(!1===w)p=null!==b.alternate?t(a,
b.alternate):g.voidOperation;else throw Error(d.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return p;case "ExpressionStatement":var u;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)u=t(a,b.expression);else{var z=t(a,b.expression);u=z===g.voidOperation?g.voidOperation:new g.ImplicitResult(z)}return u;case "AssignmentExpression":var A;var x=t(a,b.right),f=null,v="";if("MemberExpression"===b.left.type){f=t(a,b.left.object);!0===b.left.computed?
v=t(a,b.left.property):"Identifier"===b.left.property.type&&(v=b.left.property.name);if(g.isArray(f))if(g.isNumber(v)){0>v&&(v=f.length+v);if(0>v||v>f.length)throw Error("Assignment outside of array bounds");if(v===f.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");f[v]=L(x,b.operator,f[v],b)}else throw Error("Invalid Parameter");else if(f instanceof m){if(!1===g.isString(v))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(v))f.setField(v,L(x,b.operator,f.field(v),
b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(v,L(x,b.operator,null,b))}}else if(f instanceof k){if(!1===g.isString(v))throw Error("Feature accessor must be a string");if(!0===f.hasField(v))f.setField(v,L(x,b.operator,f.field(v),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(v,L(x,b.operator,null,b))}}else{if(g.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}A=g.voidOperation}else if(f=b.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[f])a.localScope[f]={value:L(x,b.operator,a.localScope[f].value,b),valueset:!0,node:b.right},A=g.voidOperation;else if(void 0!==a.globalScope[f])a.globalScope[f]={value:L(x,b.operator,a.globalScope[f].value,b),valueset:!0,node:b.right},A=g.voidOperation;else throw Error("Variable not recognised");return A;case "UpdateExpression":var E;var B,f=null,v="";if("MemberExpression"===b.argument.type){f=t(a,b.argument.object);!0===b.argument.computed?v=t(a,b.argument.property):
"Identifier"===b.argument.property.type&&(v=b.argument.property.name);if(g.isArray(f))if(g.isNumber(v)){0>v&&(v=f.length+v);if(0>v||v>=f.length)throw Error("Assignment outside of array bounds");B=g.toNumber(f[v]);f[v]="++"===b.operator?B+1:B-1}else throw Error("Invalid Parameter");else if(f instanceof m){if(!1===g.isString(v))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(v))B=g.toNumber(f.field(v)),f.setField(v,"++"===b.operator?B+1:B-1);else throw Error("Invalid Parameter");
}else if(f instanceof k){if(!1===g.isString(v))throw Error("Feature accessor must be a string");if(!0===f.hasField(v))B=g.toNumber(f.field(v)),f.setField(v,"++"===b.operator?B+1:B-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}E=!1===b.prefix?B:"++"===b.operator?B+1:B-1}else{f="Identifier"===b.argument.type?b.argument.name.toLowerCase():"";if(!f)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[f])B=g.toNumber(a.localScope[f].value),a.localScope[f]={value:"++"===b.operator?B+1:B-1,valueset:!0,node:b},E=!1===b.prefix?B:"++"===b.operator?B+1:B-1;else if(void 0!==a.globalScope[f])B=g.toNumber(a.globalScope[f].value),a.globalScope[f]={value:"++"===b.operator?B+1:B-1,valueset:!0,node:b},E=!1===b.prefix?B:"++"===b.operator?B+1:B-1;else throw Error("Variable not recognised");}return E;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "ForStatement":null!==
b.init&&t(a,b.init);v={testResult:!0,lastAction:g.voidOperation};do b:{A=a;x=b;E=v;if(null!==x.test){E.testResult=t(A,x.test);if(!1===E.testResult)break b;if(!0!==E.testResult)throw Error(d.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}E.lastAction=t(A,x.body);E.lastAction===g.breakResult?E.testResult=!1:E.lastAction instanceof g.ReturnResult?E.testResult=!1:null!==x.update&&t(A,x.update)}while(!0===v.testResult);f=v.lastAction instanceof g.ReturnResult?v.lastAction:g.voidOperation;
return f;case "ForInStatement":return Z(a,b);case "Identifier":return ha(a,b);case "MemberExpression":return W(a,b);case "Literal":return b.value;case "CallExpression":return N(a,b);case "UnaryExpression":return fa(a,b);case "BinaryExpression":return pa(a,b);case "LogicalExpression":return H(a,b);case "ConditionalExpression":throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(f=[],v=0;v<b.elements.length;v++){var I=t(a,b.elements[v]);if(g.isFunctionParameter(I))throw Error(d.nodeErrorMessage(b,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));I===g.voidOperation?f.push(null):f.push(I)}}catch(qa){throw qa;}return f;case "ObjectExpression":f={};for(v=0;v<b.properties.length;v++){var J=t(a,b.properties[v]);if(g.isFunctionParameter(J.value))throw Error("Illegal Argument");if(!1===g.isString(J.key))throw Error("Illegal Argument");f[J.key.toString()]=J.value===g.voidOperation?null:J.value}var D=new m(f);D.immutable=!1;return D;case "Property":return{key:"Identifier"===b.key.type?b.key.name:t(a,b.key),value:t(a,
b.value)};default:throw Error(d.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(qa){throw qa;}}function Z(a,b){var c=t(a,b.right);"VariableDeclaration"===b.left.type&&t(a,b.left);var e=null,f="";if("VariableDeclaration"===b.left.type){var h=b.left.declarations[0].id;"Identifier"===h.type&&(f=h.name)}else"Identifier"===b.left.type&&(f=b.left.name);if(!f)throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));f=f.toLowerCase();null!==a.localScope&&void 0!==a.localScope[f]&&(e=a.localScope[f]);
null===e&&void 0!==a.globalScope[f]&&(e=a.globalScope[f]);if(null===e)throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){c=c.length;for(h=0;h<c;h++){e.value=h;f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}return g.voidOperation}if(g.isImmutableArray(c)){for(h=0;h<c.length();h++){e.value=h;f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}return g.voidOperation}if(c instanceof m||c instanceof
k)for(c=c.keys(),h=0;h<c.length;h++){e.value=c[h];f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}else return g.voidOperation}function L(a,b,c,e){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%
g.toNumber(a);default:throw Error(d.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function ja(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(Y++,b=a.spatialReference._arcadeCacheId=Y)),a=new m({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId=
"SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=a.cache._arcadeCacheId,void 0===b&&(Y++,b=Y,a.cache._arcadeCacheId=b),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==
a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=a.cache._arcadeCacheId,void 0===b&&(Y++,b=Y,a.cache._arcadeCacheId=b),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=a.cache._arcadeCacheId,void 0===b&&(Y++,b=Y,a.cache._arcadeCacheId=b),a=new e(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(c,
"RUNTIME","PROPERTYNOTFOUND"));}function W(a,b){try{var c=t(a,b.object);if(null===c)throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(c instanceof m||c instanceof k)return c.field(b.property.name);if(c instanceof ea)return ja(c,b.property.name,b)}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var e=t(a,b.property);if(c instanceof m||c instanceof k){if(g.isString(e))return c.field(e);throw Error(d.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}if(c instanceof ea){if(g.isString(e))return ja(c,e,b);throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isArray(c)){if(g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(d.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isString(c)){if(g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length+e);if(e>=c.length||0>e)throw Error(d.nodeErrorMessage(b,
"RUNTIME","OUTOFBOUNDS"));return c[e]}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(c)&&g.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=c.length()+e);if(e>=c.length()||0>e)throw Error(d.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(e)}throw Error(d.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(ta){throw ta;}}function fa(a,b){try{var c=t(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*g.toNumber(c);
if("+"===b.operator)return 1*g.toNumber(c);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(na){throw na;}}function pa(a,b){try{var c=[t(a,b.left),t(a,b.right)],e=c[0],f=c[1];switch(b.operator){case "\x3d\x3d":return g.equalityTest(e,f);case "!\x3d":return!g.equalityTest(e,f);case "\x3c":return g.greaterThanLessThan(e,
f,b.operator);case "\x3e":return g.greaterThanLessThan(e,f,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(e,f,b.operator);case "\x3e\x3d":return g.greaterThanLessThan(e,f,b.operator);case "+":return g.isString(e)||g.isString(f)?g.toString(e)+g.toString(f):g.toNumber(e)+g.toNumber(f);case "-":return g.toNumber(e)-g.toNumber(f);case "*":return g.toNumber(e)*g.toNumber(f);case "/":return g.toNumber(e)/g.toNumber(f);case "%":return g.toNumber(e)%g.toNumber(f);default:throw Error(d.nodeErrorMessage(b,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(sa){throw sa;}}function H(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(d.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(d.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=t(a,b.left);if(g.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var e=t(a,b.right);
if(g.isBoolean(e))return e;throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;e=t(a,b.right);if(g.isBoolean(e))return e;throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(ta){throw ta;}}function ha(a,b){var c;try{var e=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[e]){c=a.localScope[e];if(!0===
c.valueset)return c.value;c.value=t(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[e]){c=a.globalScope[e];if(!0===c.valueset)return c.value;c.value=t(a,c.node);c.valueset=!0;return c.value}throw Error(d.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ta){throw ta;}}function N(a,b){try{if("Identifier"!==b.callee.type)throw Error(d.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];
if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof r)return ka(a,b,c.value.definition);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof r)return ka(a,b,c.value.definition);throw Error(d.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(d.nodeErrorMessage(b,"RUNTIME",
"NOTFOUND"));}catch(na){throw na;}}function ma(b){return null==b?"":g.isArray(b)||g.isImmutableArray(b)?"Array":g.isDate(b)?"Date":g.isString(b)?"String":g.isBoolean(b)?"Boolean":g.isNumber(b)?"Number":b instanceof n?"Attachment":b instanceof p?"Portal":b instanceof m?"Dictionary":b instanceof k?"Feature":b instanceof a?"Point":b instanceof h?"Polygon":b instanceof c?"Polyline":b instanceof x?"Multipoint":b instanceof ga?"Extent":g.isFunctionParameter(b)?"Function":g.isFeatureSet(b)?"FeatureSet":
g.isFeatureSetCollection(b)?"FeatureSetCollection":b===g.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function aa(a,b,c,d){try{var e=t(a,b.arguments[c]);if(g.equalityTest(e,d))return t(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?t(a,b.arguments[c]):2===f?null:3===f?t(a,b.arguments[c+2]):aa(a,b,c+2,d)}catch(xa){throw xa;}}function v(a,b,c,d){try{if(!0===d)return t(a,b.arguments[c+1]);if(3===b.arguments.length-c)return t(a,b.arguments[c+2]);var e=t(a,b.arguments[c+
2]);if(!1===g.isBoolean(e))throw Error("WHEN needs boolean test conditions");return v(a,b,c+2,e)}catch(sa){throw sa;}}function X(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=X(a.slice(0,d),b);a=X(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function ia(a,
b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:c[e],valueset:!0,node:null};var f=t(b,d);if(f instanceof g.ReturnResult)return f.value;if(f===g.breakResult)throw Error("Cannot Break from a Function");if(f===g.continueResult)throw Error("Cannot Continue from a Function");return f instanceof g.ImplicitResult?f.value:f}catch(xa){throw xa;}}function ka(a,b,c){return T(a,
b,function(b,d,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ia(c,b,e)})}function la(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");
return ia(a.definition,b,arguments)}}function B(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var Y=0,I={};u.registerFunctions(I,T);J.registerFunctions(I,T);z.registerFunctions(I,T);b.registerFunctions(I,T);A.registerFunctions(I,T);w.registerFunctions(I,T);I["typeof"]=function(a,b){return T(a,b,function(a,b,c){g.pcCheck(c,1,1);a=ma(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};I.iif=function(a,b){try{g.pcCheck(null===b.arguments?[]:b.arguments,
3,3);var c=t(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");var d=t(a,b.arguments[1]),e=t(a,b.arguments[2]);return!0===c?d:e}catch(sa){throw sa;}};I.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return t(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=t(a,b.arguments[0]);return aa(a,b,1,c)}catch(na){throw na;}};I.when=function(a,
b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=t(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return v(a,b,0,c)}catch(na){throw na;}};I.top=function(a,b){return T(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};I.first=function(a,b){return T(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};I.sort=function(a,b){return T(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];g.isImmutableArray(a)&&(a=a.toArray());if(!1===g.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
var d=la(c[1]);return a=X(a,function(a,b){return d(a,b)})}if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var e=ma(a[b]);""!==e&&(c[e]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var e="",f;for(f in c)b++,e=f;return a=1<b||"String"===e?X(a,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||
void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===e?X(a,function(a,b){return a-b}):"Boolean"===e?X(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?X(a,function(a,b){return b-a}):a.slice(0)})};for(var ra in I)I[ra]={value:new g.NativeFunction(I[ra]),valueset:!0,node:null};var V=function(){};V.prototype=I;V.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};V.prototype.pi={value:Math.PI,valueset:!0,node:null};f.functionHelper=
{fixSpatialReference:g.fixSpatialReference,parseArguments:O,standardFunction:T};f.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:T,evaluateIdentifier:ha,arcadeCustomFunctionHandler:la},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var e in b.functions)I[e]={value:new g.NativeFunction(b.functions[e]),valueset:!0,node:null},V.prototype[e]=I[e];for(c=0;c<b.signatures.length;c++)d.addFunctionDeclaration(b.signatures[c],"async")};f.executeScript=function(a,
b){var c=b.spatialReference;if(null===c||void 0===c)c=new E({wkid:102100});var d=b.vars,e=b.customfunctions,f=new V;d||(d={});e||(e={});var h=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;f.textformatting={value:h,valueset:!0,node:null};for(var l in e)f[l]={value:new g.NativeFunction(e[l]),native:!0,valueset:!0,node:null};for(l in d)f[l]=d[l]&&"esri.Graphic"===d[l].declaredClass?{value:k.createFromGraphic(d[l]),valueset:!0,node:null}:
{value:d[l],valueset:!0,node:null};a=t({spatialReference:c,globalScope:f,localScope:null,console:b.console?b.console:B,lrucache:b.lrucache,depthCounter:1},a.body[0].body);a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof r)throw Error("Cannot return FUNCTION");if(a instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");
return a};f.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return d.findFieldLiterals(a)};f.validateScript=function(a,b){return d.validateScript(a,b,"simple")};f.referencesMember=function(a,b){return d.referencesMember(a,b)};f.referencesFunction=function(a,b){return d.referencesFunction(a,b)};f.findFunctionCalls=function(a){return d.findFunctionCalls(a)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(M,f,p,n){Object.defineProperty(f,
"__esModule",{value:!0});f.parseScript=function(f,k){void 0===k&&(k=[]);f=n.parse("function _() { "+f+"\n}");if(null===f.body||void 0===f.body)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if("BlockStatement"!==f.body[0].body.type)throw Error("Invalid formula content.");var m=p.validateLanguage(f);if(""!==m)throw Error(m);p.findScriptDependencies(f,k);return f};f.scriptCheck=function(f,k,r,l,e){var g=
[];try{var d=n.parse("function _() { "+f+"\n}",{tolerant:!0,loc:!0}),m=d.errors;if(0<m.length)for(var b=0;b<m.length;b++)g.push({line:m[b].lineNumber,character:m[b].column,reason:m[b].description});var w=p.checkScript(d,k,r,l,e);for(k=0;k<w.length;k++)g.push(w[k])}catch(z){try{"Unexpected token }"===z.description?(z.index=("function _() { "+f+"\n}").length-1,g.push({line:z.lineNumber,character:z.column,reason:"Unexpected end of script"})):g.push({line:z.lineNumber,character:z.column,reason:z.description})}catch(A){}}return g};
f.extractFieldLiterals=function(f,k){void 0===k&&(k=!1);return p.findFieldLiterals(f)};f.validateScript=function(f,k,n){return p.validateScript(f,k,n)};f.referencesMember=function(f,k){return p.referencesMember(f,k)};f.referencesFunction=function(f,k){return p.referencesFunction(f,k)}})},"esri/arcade/lib/esprima":function(){(function(M,f){"function"===typeof define&&define.amd?define(["exports"],f):"undefined"!==typeof exports?f(exports):f(M.esprima={})})(this,function(M){function f(a,b){if(!a)throw Error("ASSERT: "+
b);}function p(a){return 48<=a&&57>=a}function n(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function m(a){return 0<="01234567".indexOf(a)}function k(a){return 10===a||13===a||8232===a||8233===a}function r(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ia.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function l(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ia.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function e(a){a=
a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function g(a,b,c,d,e){f("number"===typeof c,"Comment must have valid position");K.lastCommentStart>=c||(K.lastCommentStart=c,a={type:a,value:b},y.range&&(a.range=[c,d]),y.loc&&(a.loc=e),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}
function d(a){var b,c,d;b=q-a;for(c={start:{line:R,column:q-S-a}};q<ca;)if(d=C.charCodeAt(q),++q,k(d)){y.comments&&(a=C.slice(b+a,q-1),c.end={line:R,column:q-S-1},g("Line",a,b,q-1,c));13===d&&10===C.charCodeAt(q)&&++q;++R;S=q;return}y.comments&&(a=C.slice(b+a,q),c.end={line:R,column:q-S},g("Line",a,b,q,c))}function u(){var a,b;for(b=0===q;q<ca;)if(a=C.charCodeAt(q),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,
65279].indexOf(a))++q;else if(k(a))++q,13===a&&10===C.charCodeAt(q)&&++q,++R,S=q,b=!0;else if(47===a)if(a=C.charCodeAt(q+1),47===a)++q,++q,d(2),b=!0;else if(42===a){++q;++q;a:{var c=a=void 0,e=void 0,e=void 0;y.comments&&(a=q-2,c={start:{line:R,column:q-S-2}});for(;q<ca;)if(e=C.charCodeAt(q),k(e))13===e&&10===C.charCodeAt(q+1)&&++q,++R,++q,S=q,q>=ca&&H();else{if(42===e&&47===C.charCodeAt(q+1)){++q;++q;y.comments&&(e=C.slice(a+2,q-2),c.end={line:R,column:q-S},g("Block",e,a,q,c));break a}++q}H()}}else break;
else if(b&&45===a)if(45===C.charCodeAt(q+1)&&62===C.charCodeAt(q+2))q+=3,d(3);else break;else if(60===a)if("!--"===C.slice(q+1,q+4))++q,++q,++q,++q,d(4);else break;else break}function b(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(q<ca&&n(C[q]))c=C[q++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function w(){var a,c;a=C.charCodeAt(q++);c=String.fromCharCode(a);92===a&&(117!==C.charCodeAt(q)&&H(),++q,(a=b("u"))&&"\\"!==a&&r(a.charCodeAt(0))||H(),
c=a);for(;q<ca;){a=C.charCodeAt(q);if(!l(a))break;++q;c+=String.fromCharCode(a);92===a&&(c=c.substr(0,c.length-1),117!==C.charCodeAt(q)&&H(),++q,(a=b("u"))&&"\\"!==a&&l(a.charCodeAt(0))||H(),c+=a)}return c}function z(){var a=q,b=C.charCodeAt(q),c,d=C[q];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,y.tokenize&&(40===b?y.openParenToken=y.tokens.length:123===b&&(y.openCurlyToken=y.tokens.length)),{type:D.Punctuator,value:String.fromCharCode(b),
lineNumber:R,lineStart:S,start:a,end:q};default:if(c=C.charCodeAt(q+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:D.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:R,lineStart:S,start:a,end:q};case 33:case 61:return q+=2,61===C.charCodeAt(q)&&++q,{type:D.Punctuator,value:C.slice(a,q),lineNumber:R,lineStart:S,start:a,end:q}}}b=C.substr(q,4);if("\x3e\x3e\x3e\x3d"===b)return q+=4,{type:D.Punctuator,value:b,
lineNumber:R,lineStart:S,start:a,end:q};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return q+=3,{type:D.Punctuator,value:b,lineNumber:R,lineStart:S,start:a,end:q};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return q+=2,{type:D.Punctuator,value:b,lineNumber:R,lineStart:S,start:a,end:q};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++q,{type:D.Punctuator,value:d,lineNumber:R,lineStart:S,start:a,end:q};H()}function A(){var a,b,c;
c=C[q];f(p(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=q;a="";if("."!==c){a=C[q++];c=C[q];if("0"===a){if("x"===c||"X"===c){++q;for(a="";q<ca&&n(C[q]);)a+=C[q++];0===a.length&&H();r(C.charCodeAt(q))&&H();return{type:D.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:R,lineStart:S,start:b,end:q}}if("b"===c||"B"===c){++q;for(c="";q<ca;){a=C[q];if("0"!==a&&"1"!==a)break;c+=C[q++]}0===c.length&&H();q<ca&&(a=C.charCodeAt(q),(r(a)||p(a))&&H());return{type:D.NumericLiteral,
value:parseInt(c,2),lineNumber:R,lineStart:S,start:b,end:q}}if("o"===c||"O"===c){m(c)?(c=!0,a="0"+C[q++]):(c=!1,++q,a="");for(;q<ca&&m(C[q]);)a+=C[q++];c||0!==a.length||H();(r(C.charCodeAt(q))||p(C.charCodeAt(q)))&&H();return{type:D.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:R,lineStart:S,start:b,end:q}}}for(;p(C.charCodeAt(q));)a+=C[q++];c=C[q]}if("."===c){for(a+=C[q++];p(C.charCodeAt(q));)a+=C[q++];c=C[q]}if("e"===c||"E"===c){a+=C[q++];c=C[q];if("+"===c||"-"===c)a+=C[q++];if(p(C.charCodeAt(q)))for(;p(C.charCodeAt(q));)a+=
C[q++];else H()}r(C.charCodeAt(q))&&H();return{type:D.NumericLiteral,value:parseFloat(a),lineNumber:R,lineStart:S,start:b,end:q}}function J(){F=null;u();W("Regular Expression language structures not supported")}function ga(){u();J()}function ea(){var a;a=y.tokens[y.tokens.length-1];if(!a)return ga();if("Punctuator"===a.type){if("]"===a.value)return z();if(")"===a.value)return a=y.tokens[y.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==
a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?z():ga();if("}"===a.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(a=y.tokens[y.openCurlyToken-4],!a)return z()}else if(y.tokens[y.openCurlyToken-4]&&"Keyword"===y.tokens[y.openCurlyToken-4].type){if(a=y.tokens[y.openCurlyToken-5],!a)return ga()}else return z();if(0<=La.indexOf(a.value))return z()}return ga()}return"Keyword"===a.type&&"this"!==a.value?ga():z()}function x(){var a;u();if(q>=ca)return{type:D.EOF,
lineNumber:R,lineStart:S,start:q,end:q};a=C.charCodeAt(q);if(r(a)){var c;a=q;if(92===C.charCodeAt(q))c=w();else a:{var d;for(c=q++;q<ca;){d=C.charCodeAt(q);if(92===d){q=c;c=w();break a}if(l(d))++q;else break}c=C.slice(c,q)}return{type:1===c.length?D.Identifier:e(c)?D.Keyword:"null"===c.toLowerCase()?D.NullLiteral:"true"===c.toLowerCase()||"false"===c.toLowerCase()?D.BooleanLiteral:D.Identifier,value:c,lineNumber:R,lineStart:S,start:a,end:q}}if(40===a||41===a||59===a)return z();if(39===a||34===a){var g=
"",h,t,v;d=!1;var x,B;x=R;B=S;a=C[q];f("'"===a||'"'===a,"String literal must starts with a quote");c=q;for(++q;q<ca;)if(h=C[q++],h===a){a="";break}else if("\\"===h)if((h=C[q++])&&k(h.charCodeAt(0)))++R,"\r"===h&&"\n"===C[q]&&++q,S=q;else switch(h){case "u":case "x":if("{"===C[q]){++q;t=h=void 0;h=C[q];t=0;for("}"===h&&H();q<ca;){h=C[q++];if(!n(h))break;t=16*t+"0123456789abcdef".indexOf(h.toLowerCase())}(1114111<t||"}"!==h)&&H();h=65535>=t?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,
(t-65536&1023)+56320);g+=h}else v=q,(t=b(h))?g+=t:(q=v,g+=h);break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;default:m(h)?(t="01234567".indexOf(h),0!==t&&(d=!0),q<ca&&m(C[q])&&(d=!0,t=8*t+"01234567".indexOf(C[q++]),0<="0123".indexOf(h)&&q<ca&&m(C[q])&&(t=8*t+"01234567".indexOf(C[q++]))),g+=String.fromCharCode(t)):g+=h}else if(k(h.charCodeAt(0)))break;else g+=h;""!==a&&H();return{type:D.StringLiteral,
value:g,octal:d,startLineNumber:x,startLineStart:B,lineNumber:R,lineStart:S,start:c,end:q}}return 46===a?p(C.charCodeAt(q+1))?A():z():p(a)?A():y.tokenize&&47===a?ea():z()}function a(){var a,b,c;u();a={start:{line:R,column:q-S}};b=x();a.end={line:R,column:q-S};b.type!==D.EOF&&(c=C.slice(b.start,b.end),a={type:qa[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),y.tokens.push(a));return b}function h(){var b;b=F;q=b.end;R=b.lineNumber;S=b.lineStart;
F="undefined"!==typeof y.tokens?a():x();q=b.end;R=b.lineNumber;S=b.lineStart;return b}function c(){var b,c,d;b=q;c=R;d=S;F="undefined"!==typeof y.tokens?a():x();q=b;R=c;S=d}function E(){this.line=R;this.column=q-S}function O(){this.start=new E;this.end=null}function T(a){this.start=a.type===D.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function t(){q=F.start;F.type===D.StringLiteral?(R=F.startLineNumber,S=F.startLineStart):
(R=F.lineNumber,S=F.lineStart);y.range&&(this.range=[q,0]);y.loc&&(this.loc=new O)}function Z(a){y.range&&(this.range=[a.start,0]);y.loc&&(this.loc=new T(a))}function L(){var a,b,c,d;a=q;b=R;c=S;u();d=R!==b;q=a;R=b;S=c;return d}function ja(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=a;d.column=b-S+1;d.description=c;return d}function W(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});
throw ja(R,q,c);}function fa(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});c=ja(R,q,c);if(y.errors)y.errors.push(c);else throw c;}function pa(a,b){var c=U.UnexpectedToken;a&&(c=b?b:a.type===D.EOF?U.UnexpectedEOS:a.type===D.Identifier?U.UnexpectedIdentifier:a.type===D.NumericLiteral?U.UnexpectedNumber:a.type===D.StringLiteral?U.UnexpectedString:U.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");
return a&&"number"===typeof a.lineNumber?ja(a.lineNumber,a.start,c):ja(R,q,c)}function H(a,b){throw pa(a,b);}function ha(a,b){a=pa(a,b);if(y.errors)y.errors.push(a);else throw a;}function N(a){var b=h();b.type===D.Punctuator&&b.value===a||H(b)}function ma(){var a;y.errors?(a=F,a.type===D.Punctuator&&","===a.value?h():a.type===D.Punctuator&&";"===a.value?(h(),ha(a)):ha(a,U.UnexpectedToken)):N(",")}function aa(a){var b=h();b.type===D.Keyword&&b.value.toLowerCase()===a.toLowerCase()||H(b)}function v(a){return F.type===
D.Punctuator&&F.value===a}function X(a){return F.type===D.Keyword&&F.value.toLowerCase()===a.toLowerCase()}function ia(){var a;59===C.charCodeAt(q)||v(";")?h():(a=R,u(),R===a&&(F.type===D.EOF||v("}")||H(F)))}function ka(a){return a.type===Q.Identifier||a.type===Q.MemberExpression}function la(a,b){var c,d=new t;b=da;c=Fa();da=b;return d.finishFunctionExpression(null,a,[],c)}function B(){var a,b;a=da;da=!0;b=Ha();b=la(b.params);da=a;return b}function Y(){var a,b=new t;a=h();return a.type===D.StringLiteral||
a.type===D.NumericLiteral?(da&&a.octal&&ha(a,U.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function I(){var a,b,c,d=new t;a=F;if(a.type===D.Identifier)return b=Y(),"get"!==a.value||v(":")||v("(")?"set"!==a.value||v(":")||v("(")?v(":")?(h(),a=oa(),d.finishProperty("init",b,a,!1,!1)):v("(")?(a=B(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=Y(),N("("),a=F,a.type!==D.Identifier?(N(")"),ha(a),a=la([])):(c=[ua()],N(")"),a=la(c,a)),d.finishProperty("set",
b,a,!1,!1)):(b=Y(),N("("),N(")"),a=la([]),d.finishProperty("get",b,a,!1,!1));if(a.type===D.EOF||a.type===D.Punctuator)H(a);else{b=Y();if(v(":"))return h(),a=oa(),d.finishProperty("init",b,a,!1,!1);if(v("("))return a=B(),d.finishProperty("init",b,a,!0,!1);H(h())}}function ra(a){var b=[],c,d,e={},f=String,g=new t;for(!0!==a&&N("{");!v("}");)a=I(),c=a.key.type===Q.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?ya.Data:"get"===a.kind?ya.Get:ya.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,
c)?(e[c]===ya.Data?da&&d===ya.Data?fa(U.StrictDuplicateProperty):d!==ya.Data&&fa(U.AccessorDataProperty):d===ya.Data?fa(U.AccessorDataProperty):e[c]&d&&fa(U.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),v("}")||ma();N("}");return g.finishObjectExpression(b)}function V(){var a,b,d,e;if(v("("))return N("("),v(")")?(h(),b=Ca.ArrowParameterPlaceHolder):(++K.parenthesisCount,b=va(),N(")")),b;if(v("[")){b=[];var f=new t;for(N("[");!v("]");)v(",")?(h(),b.push(null)):(b.push(oa()),v("]")||N(","));h();return f.finishArrayExpression(b)}if(v("{"))return ra();
a=F.type;e=new t;if(a===D.Identifier)d=e.finishIdentifier(h().value);else if(a===D.StringLiteral||a===D.NumericLiteral)da&&F.octal&&ha(F,U.StrictOctalLiteral),d=e.finishLiteral(h());else if(a===D.Keyword){if(X("function")){e=null;var g;d=[];var k=[],l,m=new t;aa("function");v("(")||(e=ua());g=Ha(b);d=g.params;k=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(f=g.message);l=da;g=Fa();da&&b&&H(b,f);da&&a&&ha(a,f);da=l;return m.finishFunctionExpression(e,d,k,g)}X("this")?(h(),d=e.finishThisExpression()):
H(h())}else a===D.BooleanLiteral?(b=h(),b.value="true"===b.value.toLowerCase(),d=e.finishLiteral(b)):a===D.NullLiteral?(b=h(),b.value=null,d=e.finishLiteral(b)):v("/")||v("/\x3d")?(d="undefined"!==typeof y.tokens?e.finishLiteral(ga()):e.finishLiteral(J()),c()):H(h());return d}function P(){var a=[];N("(");if(!v(")"))for(;q<ca;){a.push(oa());if(v(")"))break;ma()}N(")");return a}function G(){N(".");var a,b=new t;a=h();a.type===D.Identifier||a.type===D.Keyword||a.type===D.BooleanLiteral||a.type===D.NullLiteral||
H(a);return b.finishIdentifier(a.value)}function ba(){var a;N("[");a=va();N("]");return a}function na(){var a,b,c=new t;aa("new");var d;f(K.allowIn,"callee of new expression always allow in keyword.");d=F;for(a=X("new")?na():V();;)if(v("["))b=ba(),a=(new Z(d)).finishMemberExpression("[",a,b);else if(v("."))b=G(),a=(new Z(d)).finishMemberExpression(".",a,b);else break;b=v("(")?P():[];return c.finishNewExpression(a,b)}function ta(){var a,b,c=F,d,e=K.allowIn;b=F;K.allowIn=!0;for(a=X("new")?na():V();;)if(v("."))d=
G(),a=(new Z(b)).finishMemberExpression(".",a,d);else if(v("("))d=P(),a=(new Z(b)).finishCallExpression(a,d);else if(v("["))d=ba(),a=(new Z(b)).finishMemberExpression("[",a,d);else break;K.allowIn=e;F.type!==D.Punctuator||!v("++")&&!v("--")||L()||(ka(a)||fa(U.InvalidLHSInAssignment),b=h(),a=(new Z(c)).finishPostfixExpression(b.value,a));return a}function sa(){var a,b,c;F.type!==D.Punctuator&&F.type!==D.Keyword?b=ta():v("++")||v("--")?(c=F,a=h(),b=sa(),ka(b)||fa(U.InvalidLHSInAssignment),b=(new Z(c)).finishUnaryExpression(a.value,
b)):v("+")||v("-")||v("~")||v("!")?(c=F,a=h(),b=sa(),b=(new Z(c)).finishUnaryExpression(a.value,b)):X("delete")||X("void")||X("typeof")?(c=F,a=h(),b=sa(),b=(new Z(c)).finishUnaryExpression(a.value,b),da&&"delete"===b.operator&&b.argument.type===Q.Identifier&&fa(U.StrictDelete)):b=ta();return b}function xa(a,b){var c=0;if(a.type!==D.Punctuator&&a.type!==D.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Aa(){var a,b,c,d,e,f;a=F;b=sa();if(b===Ca.ArrowParameterPlaceHolder)return b;c=F;d=xa(c,K.allowIn);if(0===d)return b;c.prec=d;h();a=[a,F];f=sa();for(e=[b,c,f];0<(d=xa(F,K.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,
b=e.pop(),a.pop(),b=(new Z(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=h();c.prec=d;e.push(c);a.push(F);b=sa();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new Z(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function wa(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===Q.Identifier)e.push(d),f.push(null),za(h,d,d.name);else if(d.type===Q.AssignmentExpression)e.push(d.left),f.push(d.right),++g,za(h,d.left,d.left.name);
else return null;h.message===U.StrictParamDupe&&(a=da?h.stricted:h.firstRestricted,H(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function oa(){var a,b,c,d,e;a=K.parenthesisCount;b=e=F;var f,g;g=F;c=Aa();c!==Ca.ArrowParameterPlaceHolder&&v("?")&&(h(),f=K.allowIn,K.allowIn=!0,b=oa(),K.allowIn=f,N(":"),f=oa(),c=(new Z(g)).finishConditionalExpression(c,b,f));if(c===Ca.ArrowParameterPlaceHolder||v("\x3d\x3e"))if(K.parenthesisCount===
a||K.parenthesisCount===a+1)if(c.type===Q.Identifier?d=wa([c]):c.type===Q.AssignmentExpression?d=wa([c]):c.type===Q.SequenceExpression?d=wa(c.expressions):c===Ca.ArrowParameterPlaceHolder&&(d=wa([])),d)return a=d,e=new Z(e),N("\x3d\x3e"),d=da,c=v("{")?Fa():oa(),da&&a.firstRestricted&&H(a.firstRestricted,a.message),da&&a.stricted&&ha(a.stricted,a.message),da=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==Q.BlockStatement);F.type!==D.Punctuator?a=!1:(a=F.value,a="\x3d"===a||"*\x3d"===
a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(ka(c)||fa(U.InvalidLHSInAssignment),b=h(),a=oa(),c=(new Z(e)).finishAssignmentExpression(b.value,c,a));return c}function va(){var a,b=F;a=oa();if(v(",")){for(a=[a];q<ca&&v(",");)h(),a.push(oa());a=(new Z(b)).finishSequenceExpression(a)}return a}function ua(){var a,b=new t;a=h();a.type!==D.Identifier&&H(a);return b.finishIdentifier(a.value)}
function Ma(a){var b=null,c,d=new t;c=ua();"const"===a?(N("\x3d"),b=oa()):v("\x3d")&&(h(),b=oa());return d.finishVariableDeclarator(c,b)}function Ea(a){var b=[];do{b.push(Ma(a));if(!v(","))break;h()}while(q<ca);return b}function Ba(a){var b=F.type,c,d;b===D.EOF&&H(F);if(b===D.Punctuator&&"{"===F.value){if(a){N("{");var e=F;a=q;c=R;d=S;h();b=v(":");F=e;q=a;R=c;S=d;if((F.type===D.Identifier||F.type===D.StringLiteral)&&b)return ra(!0);a=new t;for(c=[];q<ca&&!v("}");){d=Da();if("undefined"===typeof d)break;
c.push(d)}N("}");return a.finishBlockStatement(c)}return ra()}a=new t;if(b===D.Punctuator)switch(F.value){case ";":return a=new t,N(";"),a.finishEmptyStatement();case "(":return c=va(),ia(),a.finishExpressionStatement(c)}else if(b===D.Keyword)switch(F.value.toLowerCase()){case "break":return c=null,aa("break"),59===C.charCodeAt(q)?(h(),K.inIteration||K.inSwitch||W(U.IllegalBreak),a=a.finishBreakStatement(null)):L()?(K.inIteration||K.inSwitch||W(U.IllegalBreak),a=a.finishBreakStatement(null)):(F.type===
D.Identifier&&(c=ua(),d="$"+c.name,Object.prototype.hasOwnProperty.call(K.labelSet,d)||W(U.UnknownLabel,c.name)),ia(),null!==c||K.inIteration||K.inSwitch||W(U.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,aa("continue"),59===C.charCodeAt(q)?(h(),K.inIteration||W(U.IllegalContinue),a=a.finishContinueStatement(null)):L()?(K.inIteration||W(U.IllegalContinue),a=a.finishContinueStatement(null)):(F.type===D.Identifier&&(c=ua(),d="$"+c.name,Object.prototype.hasOwnProperty.call(K.labelSet,
d)||W(U.UnknownLabel,c.name)),ia(),null!==c||K.inIteration||W(U.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,k;g=K.allowIn;f=b=e=null;aa("for");N("(");if(v(";"))h();else{if(X("var")){K.allowIn=!1;var l=new t;f=h();k=Ea();f=l.finishVariableDeclaration(k,f.value);K.allowIn=g;1===f.declarations.length&&X("in")&&(h(),c=f,d=va(),f=null)}else K.allowIn=!1,f=va(),K.allowIn=g,X("in")&&(ka(f)||fa(U.InvalidLHSInForIn),h(),c=f,d=va(),f=null);"undefined"===typeof c&&N(";")}"undefined"===
typeof c&&(v(";")||(b=va()),N(";"),v(")")||(e=va()));N(")");k=K.inIteration;K.inIteration=!0;g=Ba(!0);K.inIteration=k;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return Ja(a);case "if":return aa("if"),N("("),c=va(),N(")"),d=Ba(!0),X("else")?(h(),b=Ba(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,aa("return"),K.inFunctionBody||fa(U.IllegalReturn),32===C.charCodeAt(q)&&r(C.charCodeAt(q+1))?(c=va(),ia(),a=a.finishReturnStatement(c)):
L()?a=a.finishReturnStatement(null):(v(";")||v("}")||F.type===D.EOF||(c=va()),ia(),a=a.finishReturnStatement(c)),a;case "var":return aa("var"),c=Ea(),ia(),a.finishVariableDeclaration(c,"var")}c=va();if(c.type===Q.Identifier&&v(":"))return h(),b="$"+c.name,Object.prototype.hasOwnProperty.call(K.labelSet,b)&&W(U.Redeclaration,"Label",c.name),K.labelSet[b]=!0,d=Ba(!1),delete K.labelSet[b],a.finishLabeledStatement(c,d);ia();return a.finishExpressionStatement(c)}function Fa(){var a,b=[],c,d,e,f,g,h=new t;
for(N("{");q<ca&&F.type===D.StringLiteral;){c=F;a=Da();b.push(a);if(a.expression.type!==Q.Literal)break;a=C.slice(c.start+1,c.end-1);"use strict"===a?(da=!0,d&&ha(d,U.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=K.labelSet;d=K.inIteration;e=K.inSwitch;f=K.inFunctionBody;g=K.parenthesizedCount;K.labelSet={};K.inIteration=!1;K.inSwitch=!1;K.inFunctionBody=!0;for(K.parenthesizedCount=0;q<ca&&!v("}");){a=Da();if("undefined"===typeof a)break;b.push(a)}N("}");K.labelSet=c;K.inIteration=d;K.inSwitch=e;K.inFunctionBody=
f;K.parenthesizedCount=g;return h.finishBlockStatement(b)}function za(a,b,c){c="$"+c;da?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=U.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=U.StrictParamDupe);a.paramSet[c]=!0}function Ha(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};N("(");if(!v(")"))for(a.paramSet={};q<ca;){var b=a,c=void 0,d=void 0,e=void 0,c=F,d=ua();za(b,c,c.value);
v("\x3d")&&(h(),e=oa(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(v(")"))break;N(",")}N(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ja(){var a,b=[],c=[],d,e,f,g,h,k=new t;aa("function");a=ua();d=Ha(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=da;d=Fa();da&&f&&H(f,g);da&&e&&ha(e,g);da=h;return k.finishFunctionDeclaration(a,
b,c,d)}function Da(){if(F.type===D.Keyword)return"function"===F.value.toLowerCase()?Ja():Ba(!1);if(F.type!==D.EOF)return Ba(!1)}function Ka(){var a,b,c,d=[];for(a=0;a<y.tokens.length;++a)b=y.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),y.range&&(c.range=b.range),y.loc&&(c.loc=b.loc),d.push(c);y.tokens=d}var D,qa,La,Q,Ca,ya,U,Ia,C,da,q,R,S,ca,F,K,y;D={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,
StringLiteral:8,RegularExpression:9};qa={};qa[D.BooleanLiteral]="Boolean";qa[D.EOF]="\x3cend\x3e";qa[D.Identifier]="Identifier";qa[D.Keyword]="Keyword";qa[D.NullLiteral]="Null";qa[D.NumericLiteral]="Numeric";qa[D.Punctuator]="Punctuator";qa[D.StringLiteral]="String";qa[D.RegularExpression]="RegularExpression";La="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
Q={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ca={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
ya={Data:1,Get:2,Set:4};U={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ia={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
Z.prototype=t.prototype={processComment:function(){var a,b,c,d=y.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===Q.Program&&0<this.body.length)){if(0<y.trailingComments.length){c=[];for(e=y.trailingComments.length-1;0<=e;--e)f=y.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),y.trailingComments.splice(e,1));y.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<y.leadingComments.length)for(b=[],e=y.leadingComments.length-1;0<=e;--e)f=y.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),y.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){y.range&&(this.range[1]=q);y.loc&&(this.loc.end=
new E,y.source&&(this.loc.source=y.source));y.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=Q.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=Q.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?Q.LogicalExpression:Q.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=Q.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=Q.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=Q.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=Q.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
Q.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=Q.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=Q.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=Q.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=Q.ForInStatement;this.left=a;this.right=b;this.body=c;
this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=Q.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=Q.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=Q.Identifier;this.name=
a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=Q.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=Q.Literal;this.value=a.value;this.raw=C.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=Q.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
Q.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=Q.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=Q.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=Q.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=Q.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?Q.UpdateExpression:Q.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=Q.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=Q.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};M.version="2.0.0-dev";M.tokenize=
function(a,b){var d,e;d=String;"string"===typeof a||a instanceof String||(a=d(a));C=a;q=0;R=0<C.length?1:0;S=0;ca=C.length;F=null;K={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};y={};b=b||{};b.tokens=!0;y.tokens=[];y.tokenize=!0;y.openParenToken=-1;y.openCurlyToken=-1;y.range="boolean"===typeof b.range&&b.range;y.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(y.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(y.errors=
[]);try{c();if(F.type===D.EOF)return y.tokens;for(h();F.type!==D.EOF;)try{h()}catch(Ga){if(y.errors){y.errors.push(Ga);break}else throw Ga;}Ka();e=y.tokens;"undefined"!==typeof y.comments&&(e.comments=y.comments);"undefined"!==typeof y.errors&&(e.errors=y.errors)}catch(Ga){throw Ga;}finally{y={}}return e};M.parse=function(a,b){var d,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));C=a;q=0;R=0<C.length?1:0;S=0;ca=C.length;F=null;K={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};y={};"undefined"!==typeof b&&(y.range="boolean"===typeof b.range&&b.range,y.loc="boolean"===typeof b.loc&&b.loc,y.attachComment="boolean"===typeof b.attachComment&&b.attachComment,y.loc&&null!==b.source&&void 0!==b.source&&(y.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(y.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(y.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=
[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{var f;u();c();f=new t;da=!1;var g;a=[];for(var h,k,l;q<ca;){h=F;if(h.type!==D.StringLiteral)break;g=Da();a.push(g);if(g.expression.type!==Q.Literal)break;k=C.slice(h.start+1,h.end-1);"use strict"===k?(da=!0,l&&ha(l,U.StrictOctalLiteral)):!l&&h.octal&&(l=h)}for(;q<ca;){g=Da();if("undefined"===typeof g)break;a.push(g)}d=f.finishProgram(a);"undefined"!==typeof y.comments&&(d.comments=y.comments);"undefined"!==typeof y.tokens&&
(Ka(),d.tokens=y.tokens);"undefined"!==typeof y.errors&&(d.errors=y.errors)}catch(Na){throw Na;}finally{y={}}return d};M.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in Q)Q.hasOwnProperty(a)&&(b[a]=Q[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/iteratorUtils ./locale @dojo/framework/shim/Promise".split(" "),
function(M,f,p,n,m,k){Object.defineProperty(f,"__esModule",{value:!0});var r=m.createSetFromValues("ar ar-dz ar-kw ar-ly ar-ma ar-sa ar-tn bs ca cs da de de-at de-ch el en-au en-ca en-gb en-ie en-il en-nz es es-do es-us et fi fr fr-ca fr-ch he hr hu id it it-ch ja ko lt lv nb nl nl-be pl pt pt-br ro ru sl sr sr-cyrl sv th tr uk vi zh-cn zh-hk zh-tw".split(" "));f.loadMoment=function(f){void 0===f&&(f=k.getLocale());return p(this,void 0,void 0,function(){var e,g,d;return n(this,function(k){switch(k.label){case 0:return[4,
new Promise(function(b,d){M(["moment/moment"],b,d)})];case 1:return e=k.sent(),g=r.has(f),g||(d=f.split("-"),1<d.length&&r.has(d[0])&&(f=d[0],g=!0)),g?[4,new Promise(function(b,d){M(["moment/locale/"+f],b,d)})]:[3,3];case 2:return k.sent(),[3,4];case 3:f="en",k.label=4;case 4:return f!==e.locale()&&e.locale(f),[2,e]}})})}})},"*now":function(M){M(['dojo/i18n!*preload*esri/support/nls/arcadeUtils*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(M,f,p,n,m,k,r,l){function e(b){var d;try{d=b?p.parseScript(b):null}catch(z){d=null}return d}function g(b){b=e(b);return!!b&&p.scriptUsesGeometryEngine(b)}Object.defineProperty(f,"__esModule",{value:!0});f.arcade=p;f.Dictionary=n;f.arcadeFeature=m;var d=/^\$feature\./i,u={vars:{$feature:"any",$view:"any"},spatialReference:null};
f.createSyntaxTree=e;f.createFunction=function(b,d){d=d||k.clone(u);b="string"===typeof b?e(b):b;if(!b)return null;var f;try{f=b?p.compileScript(b,d):null}catch(A){f=null}return f};f.createExecContext=function(b,d){return{vars:{$feature:null==b?new m:m.createFromGraphic(b),$view:d&&d.view},spatialReference:d&&d.sr}};f.createFeature=function(b,d,e){return m.createFromGraphicLikeObject(d,b,e)};f.updateExecContext=function(b,d){b.vars.$feature=d};f.evalSyntaxTree=function(b,d){var e;try{e=p.executeScript(b,
d)}catch(A){e=null}return e};f.executeFunction=function(b,d){var e;try{e=b?b(d):null}catch(A){e=null}return e};f.executeAsyncFunction=function(b,d){try{return b?b(d):r.resolve(null)}catch(z){return r.resolve(null)}};f.extractFieldNames=function(b){if(!b)return[];b="string"===typeof b?e(b):b;if(!b)return[];var f=[];p.extractFieldLiterals(b).forEach(function(b){d.test(b)&&(b=b.replace(d,""),f.push(b))});f.sort();return f.filter(function(b,d){return 0===d||f[d-1]!==b})};f.dependsOnView=function(b){return p.referencesMember(b,
"$view")};f.hasVariable=function(b,d){return b?p.referencesMember(b,d):!1};f.getViewInfo=function(b){if(b&&(null!=b.spatialReference||null!=b.scale&&null!=b.viewingMode))return{view:b.viewingMode&&null!=b.scale?new n({viewingMode:b.viewingMode,scale:b.scale}):null,sr:b.spatialReference}};f.convertServiceUrlToWorkspace=function(b,d){var e=p.featureSetUtils();return e?e.createFeatureSetCollectionFromService(b,d):null};f.convertFeatureLayerToFeatureSet=function(b,d){if(null===b)return null;var e=p.featureSetUtils();
return e?e.constructFeatureSet(b,d):null};f.convertMapToFeatureSetCollection=function(b){if(null===b||null===b.map)return null;var d=p.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(b.map,b.spatialReference):null};f.loadScriptDependencies=function(b,d,e){void 0===e&&(e=[]);return p.loadScriptDependencies(b,d,e)};f.enableGeometryOperations=function(){return p.enableGeometrySupport()};f.enableFeatureSetOperations=function(){return p.enableFeatureSetSupport()};f.applyTextFormattingHTML=
function(b){var d=/(\n)/gi;return"string"===typeof b?b.replace(d,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):b};f.hasGeometryOperations=function(b){if(!b)return!1;if("string"===typeof b)return g(b);if("simple"===b.type||"class-breaks"===b.type||"unique-value"===b.type||"dot-density"===b.type||"dictionary"===b.type){if("dot-density"===b.type){var d=b.attributes.some(function(b){return g(b.valueExpression)});if(d)return d}d=b.visualVariables;d=!!d&&d.some(function(b){var d=g(b.valueExpression);"size"===
b.type&&(l.isSizeVariable(b.minSize)&&(d=d||g(b.minSize.valueExpression)),l.isSizeVariable(b.maxSize)&&(d=d||g(b.maxSize.valueExpression)));return d});return"valueExpression"in b&&g(b.valueExpression)?!0:d}return"esri.layers.support.LabelClass"===b.declaredClass?(b=b.labelExpressionInfo&&b.labelExpressionInfo.expression,!(!b||!g(b))||!1):"esri.PopupTemplate"===b.declaredClass?!!b.expressionInfos&&b.expressionInfos.some(function(b){return g(b.expression)}):!1}});