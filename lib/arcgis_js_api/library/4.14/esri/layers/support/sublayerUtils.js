// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define(["require","exports","./layerSourceUtils"],function(l,c,g){function f(a,b,d){return a.some(function(a){var b=a.source;return!(!b||b.type===g.MAPLAYER&&b.mapLayerId===a.id&&(!b.gdbVersion||b.gdbVersion===d.gdbVersion))||2<a.originIdOf("renderer")||2<a.originIdOf("labelingInfo")||2<a.originIdOf("opacity")||2<a.originIdOf("labelsVisible")})?!0:!h(a,b)}function h(a,b){if(!a||!a.length)return!0;b=b.slice().reverse().flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).map(function(a){return a.id}).toArray();
if(a.length>b.length)return!1;for(var d=0,c=b.length,e=0;e<a.length;e++){for(var k=a[e].id;d<c&&b[d]!==k;)d++;if(d>=c)return!1}return!0}Object.defineProperty(c,"__esModule",{value:!0});c.shouldWriteSublayerStructure=function(a,b,d){var c=b.flatten(function(a){return a.sublayers}).length,e=a.some(function(a){return 2<a.originIdOf("minScale")||2<a.originIdOf("maxScale")});return c!==a.length||e||f(a,b,d)};c.isExportDynamic=f;c.isSublayerOverhaul=function(a){return!!a&&a.some(function(a){return null!=
a.minScale||a.layerDefinition&&null!=a.layerDefinition.minScale})}});