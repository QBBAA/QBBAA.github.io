// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(y,a,t){Object.defineProperty(a,"__esModule",{value:!0});for(var l in t)a.hasOwnProperty(l)||(a[l]=t[l])})},"esri/core/workers/workers":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(y,a,t,l,q,f,u,n,m,p){function r(){return l(this,void 0,void 0,function(){var a,
k,c;return t(this,function(A){if(e)return[2,e];w=u.createAbortController();a=[];k=function(k){var c=p.create(k).then(function(a){return v[k]=a});a.push(c)};for(c=0;c<d;c++)k(c);e=u.all(a);return[2,e]})})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=n;a.RemoteClient=m;var d=f("esri-workers-debug")?1:f("host-browser")?navigator.hardwareConcurrency-1:0;d||(d=f("safari")&&f("mac")||f("trident")?7:2);var c=0,v=[];a.initialize=function(){r()};a.openWithPorts=function(a,k){return new n(a.map(function(a){return new m(a,
k,{})}))};a.open=function(a,k){void 0===k&&(k={});return l(this,void 0,void 0,function(){var e,A,B,p,w,E,l;return t(this,function(x){switch(x.label){case 0:if("string"!==typeof a)throw new q("workers:undefined-module","modulePath is missing");e=k.signal;A=k.strategy||"distributed";f("host-webworker")&&!f("esri-workers")&&(A="local");return"local"!==A?[3,4]:[4,m.loadWorker(a)];case 1:return(B=x.sent())?[3,3]:[4,u.create(function(k){return y([a],k)})];case 2:B=x.sent(),x.label=3;case 3:return u.throwIfAborted(e),
p=k.client||B,w=m.connect(B),[2,new n([new m(w,p,k)])];case 4:return[4,r()];case 5:x.sent();u.throwIfAborted(e);if("dedicated"!==A)return[3,7];E=c++;c%=d;return[4,v[E].open(a,k)];case 6:return w=x.sent(),[2,new n([new m(w,k.client,k)])];case 7:return[4,u.all(v.map(function(c){return c.open(a,k)}))];case 8:return l=x.sent(),[2,new n(l.map(function(a){return new m(a,k.client,k)}))]}})})};a.terminate=function(){e&&(w.abort(),e=null);for(var a=0;a<v.length;a++)v[a]&&v[a].terminate();v.length=0};var e=
null,w})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils","../accessorSupport/utils"],function(y,a,t,l,q){var f=t.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,m,f){for(var n=[],d=0,c=this._clients;d<c.length;d++)n.push(c[d].invoke(a,m,f));return n};a.prototype.close=function(){for(var a=0,f=this._clients;a<f.length;a++)f[a].close();this._clients=[]};a.prototype.getAvailableClient=
function(){var a;this._clients.some(function(f){return f.isBusy()?!1:(a=f,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,m,p){var r=null;Array.isArray(p)?(f.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:p}):r=p;return this._clients&&this._clients.length?this.getAvailableClient().invoke(a,m,r):l.reject(Error("Connection closed"))};a.prototype.on=
function(a,f){var n=this._clients.map(function(r){return r.on(a,f)});return q.handlesGroup(n)};a.prototype.openPorts=function(){return this._clients.map(function(a){return a.openPort()})};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(y,a,t,l,q,f,u,n,m,p){var r=u.getLogger("esri.core.workers"),d=m.MessageType.ABORT,
c=m.MessageType.INVOKE,v=m.MessageType.OPEN,e=m.MessageType.OPENED,w=m.MessageType.RESPONSE;return function(){function a(a,c){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=c;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();r.error(a)})}a.create=function(c){return l(this,void 0,void 0,function(){var k;return t(this,function(d){switch(d.label){case 0:return[4,p.createWorker()];case 1:return k=d.sent(),[2,new a(k,c)]}})})};
a.prototype.terminate=function(){this.worker.terminate()};a.prototype.open=function(a,c){void 0===c&&(c={});return l(this,void 0,void 0,function(){var k,f,e=this;return t(this,function(A){k=c.signal;f=m.newJobId();return[2,n.create(function(c,A){c={resolve:c,reject:A};n.onAbortOrThrow(k,function(){e._outJobs.delete(f);e._post({type:d,jobId:f})});e._outJobs.set(f,c);e._post({type:v,jobId:f,modulePath:a})})]})})};a.prototype._onMessage=function(a){if(a=m.receiveMessage(a))switch(a.type){case e:this._onOpenedMessage(a);
break;case w:this._onResponseMessage(a);break;case d:this._onAbortMessage(a);break;case c:this._onInvokeMessage(a)}};a.prototype._onAbortMessage=function(a){var c=this._inJobs;a=a.jobId;var k=c.get(a);k&&(k.controller&&k.controller.abort(),c.delete(a))};a.prototype._onInvokeMessage=function(a){var c=this,d=a.methodName,k=a.jobId,f=a.data;a=a.abortable?n.createAbortController():null;var e=this._inJobs,v=q.workerMessages[d],r;try{if("function"!==typeof v)throw new TypeError(d+" is not a function");
r=v.call(null,f,{signal:a?a.signal:null})}catch(I){this._post({type:w,jobId:k,error:m.toInvokeError(I)});return}if(n.isPromiseLike(r)){e.set(k,{controller:a,promise:r});if(a&&"cancel"in r)n.onAbort(a.signal,function(){return r.cancel()});r.then(function(a){e.has(k)&&(e.delete(k),c._post({type:w,jobId:k},a))},function(a){e.has(k)&&(e.delete(k),a||(a={message:"Error encountered at method"+d}),n.isAbortError(a)||c._post({type:w,jobId:k,error:m.toInvokeError(a||{message:"Error encountered at method "+
d})}))})}else this._post({type:w,jobId:k},r)};a.prototype._onOpenedMessage=function(a){var c=a.jobId;a=a.data;var d=this._outJobs.get(c);d&&(this._outJobs.delete(c),d.resolve(a))};a.prototype._onResponseMessage=function(a){var c=a.jobId,d=a.error;a=a.data;var e=this._outJobs.get(c);e&&(this._outJobs.delete(c),d?e.reject(f.fromJSON(JSON.parse(d))):e.resolve(a))};a.prototype._post=function(a,c,d){return m.postMessage(this.worker,a,c,d)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper ../tsSupport/generatorHelper ../tsSupport/awaiterHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(y,a,t,l,q,f,u,n,m,p,r,d,c){function v(a){return q(this,void 0,void 0,function(){return l(this,function(v){return[2,p.create(function(v){function m(c){if(c=d.receiveMessage(c))switch(c.type){case k:c=a;var e=u.workers.loaderUrl||r.DEFAULT_LOADER_URL,p;null!=u["default"]?(p=t({},u),delete p["default"],p=JSON.parse(JSON.stringify(p))):p=JSON.parse(JSON.stringify(u));var l=u.workers.loaderConfig,l=r.default({baseUrl:l.baseUrl,locale:f.locale,has:t({"config-deferredInstrumentation":0,"csp-restrictions":n("csp-restrictions"),
"dojo-test-sniff":0,"esri-native-promise":n("esri-native-promise"),"esri-secure-context":n("esri-secure-context"),"esri-workers-arraybuffer-transfer":n("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1,"esri-webgl-texture-float":n("esri-webgl-texture-float"),"esri-shared-array-buffer":n("esri-shared-array-buffer"),"esri-atomics":n("esri-atomics"),"esri-2d-debug":0,"esri-webgl-max-texture-size":n("esri-webgl-max-texture-size")},l.has),map:t({},l.map),paths:t({},l.paths),
packages:l.packages||[]});c.postMessage({type:E,configure:{esriConfig:p,loaderUrl:e,loaderConfig:l}});break;case w:a.removeEventListener("message",m),a.removeEventListener("error",q),v(a)}}function q(d){d.preventDefault();a.removeEventListener("message",m);a.removeEventListener("error",q);e.warn("Failed to create Worker. Fallback to execute module in main thread",d);a=new c;a.addEventListener("message",m);a.addEventListener("error",q)}a.addEventListener("message",m);a.addEventListener("error",q)})]})})}
Object.defineProperty(a,"__esModule",{value:!0});var e=m.getLogger("esri.core.workers");n.add("esri-workers-arraybuffer-transfer",!n("safari")||12<=n("safari"));var w=d.MessageType.CONFIGURED,E=d.MessageType.CONFIGURE,k=d.MessageType.HANDSHAKE,x;try{x=URL.createObjectURL(new Blob(['var globalId\x3d0,outgoing\x3dnew Map,configured\x3d!1,HANDSHAKE\x3d0,CONFIGURE\x3d1,CONFIGURED\x3d2,OPEN\x3d3,OPENED\x3d4,RESPONSE\x3d5,INVOKE\x3d6,ABORT\x3d7;function createAbortError(){var error\x3dnew Error("AbortError");return error.dojoType\x3d"cancel",error}function receiveMessage(event){return event\x26\x26event.data?"string"\x3d\x3dtypeof event.data?JSON.parse(event.data):event.data:null}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal,Deferred\x3drequire("dojo/Deferred"),jobId\x3dglobalId++,abort\x3dfunction(){var outJob\x3doutgoing.get(jobId);outJob\x26\x26(outgoing.delete(jobId),self.postMessage({type:ABORT,jobId:jobId}),outJob.reject(createAbortError()))},deferred\x3dnew Deferred(abort);if(signal){if(signal.aborted)return deferred.reject(createAbortError());signal.addEventListener("abort",(function(){abort(),deferred.reject(createAbortError())}))}return outgoing.set(jobId,deferred),self.postMessage({type:INVOKE,jobId:jobId,methodName:methodName,abortable:!0,data:data}),deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(message){var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured)return;self.dojoConfig\x3dconfiguration.loaderConfig,self.importScripts(configuration.loaderUrl),"function"\x3d\x3dtypeof require.config\x26\x26require.config(configuration.loaderConfig),require(["esri/config"],(function(esriConfig){for(var name in configuration.esriConfig)Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)\x26\x26(esriConfig[name]\x3dconfiguration.esriConfig[name]);self.postMessage({type:CONFIGURED})})),configured\x3d!0;break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient"],(function(RemoteClient){RemoteClient.loadWorker(modulePath).then((function(Module){return Module||new Promise((function(resolve){require([modulePath],resolve)}))})).then((function(Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])}))}));break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);outgoing.delete(jobId),message.error?deferred.reject(JSON.parse(message.error)):deferred.resolve(message.data)}}}}self.addEventListener("message",messageHandler),self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(A){}a.createWorker=function(){return q(this,void 0,void 0,function(){var a;return l(this,function(d){if(!n("esri-workers"))return[2,v(new c)];if(x)try{a=new Worker(x)}catch(N){e.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new c}else e.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new c;return[2,v(a)]})})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper",
"../has","../urlUtils"],function(y,a,t,l,q){Object.defineProperty(a,"__esModule",{value:!0});l=l("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=q.makeAbsolute(q.removeQueryParameters(y.toUrl(l)));a.DEFAULT_CONFIG={baseUrl:function(){var a=q.removeQueryParameters(y.toUrl("dojo/x.js"));return q.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},
{name:"globalize",main:"dist/globalize"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(f){var l={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:t({},f.has),map:t({},f.map),
packages:f.packages&&f.packages.concat()||[],paths:t({},f.paths)};f.hasOwnProperty("async")||(l.async=!0);f.hasOwnProperty("isDebug")||(l.isDebug=!1);f.baseUrl||(l.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var d=l.packages,c=0;c<d.length;c++)if(d[c].name===a.name)break a;a=t({},a);c=q.removeQueryParameters(y.toUrl(a.name+"/x.js"));c=c.slice(0,c.length-5);a.location=q.makeAbsolute(c);d.push(a)}});f=l.map=l.map||{};for(var n=0,m=Object.keys(a.DEFAULT_CONFIG.map);n<
m.length;n++){var p=m[n];f[p]||(f[p]=a.DEFAULT_CONFIG.map[p])}return l}})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper ../config ../kernel ./Error ./global ./Logger ./string".split(" "),function(y,a,t,l,q,f,u,n,m){function p(b){var a={path:null,query:null},h=new F(b),z=b.indexOf("?");null===h.query?a.path=b:(a.path=b.substring(0,z),a.query=r(h.query));h.fragment&&(a.hash=h.fragment,null===h.query&&(a.path=a.path.substring(0,a.path.length-(h.fragment.length+1))));
return a}function r(b){var a={},h=0;for(b=b.split("\x26");h<b.length;h++){var z=b[h];if(z){var c=z.indexOf("\x3d"),d=void 0,e=void 0;0>c?(d=decodeURIComponent(z),e=""):(d=decodeURIComponent(z.slice(0,c)),e=decodeURIComponent(z.slice(c+1)));z=a[d];"string"===typeof z&&(z=a[d]=[z]);Array.isArray(z)?z.push(e):a[d]=e}}return a}function d(b){return b&&"object"===typeof b&&"toJSON"in b&&"function"===typeof b.toJSON}function c(b,a){return b?a&&"function"===typeof a?Object.keys(b).map(function(g){return encodeURIComponent(g)+
"\x3d"+encodeURIComponent(a(g,b[g]))}).join("\x26"):Object.keys(b).map(function(g){var h=b[g];if(null==h)return"";var c=encodeURIComponent(g)+"\x3d";return(g=a&&a[g])?c+encodeURIComponent(g(h)):Array.isArray(h)?h.map(function(b){return d(b)?c+encodeURIComponent(JSON.stringify(b)):c+encodeURIComponent(b)}).join("\x26"):d(h)?c+encodeURIComponent(JSON.stringify(h)):c+encodeURIComponent(h)}).filter(function(b){return b}).join("\x26"):""}function v(b){var a=b.indexOf("?");-1!==a?(H.path=b.slice(0,a),H.query=
b.slice(a+1)):(H.path=b,H.query=null);return H}function e(b){b=v(b).path;b&&"/"===b[b.length-1]||(b+="/");b=J(b,!0);return b=b.toLowerCase()}function w(b){var a=G.proxyRules;b=e(b);for(var h=0;h<a.length;h++)if(0===b.indexOf(a[h].urlPrefix))return a[h]}function E(b){b=B(b);var a=b.indexOf("/sharing");return 0<a?b.substring(0,a):b.replace(/\/+$/,"")}function k(b,a,h){void 0===h&&(h=!1);b=P(b);a=P(a);return h||b.scheme===a.scheme?b.host.toLowerCase()===a.host.toLowerCase()&&b.port===a.port:!1}function x(b,
g,h){void 0===g&&(g=a.appBaseUrl);if(C(b))return h&&h.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===S(b).slice(2)?"http:"+b:"https:"+b;if(!K(b)){h=N;if("/"===b[0]){var c=g.indexOf("//"),c=g.indexOf("/",c+2);g=-1===c?g:g.slice(0,c)}return h(g,b)}return b}function A(b,g,h){void 0===g&&(g=a.appBaseUrl);if(!D(b))return b;var c=B(b),d=c.toLowerCase();g=B(g).toLowerCase().replace(/\/+$/,"");if((h=h?B(h).toLowerCase().replace(/\/+$/,""):null)&&0!==g.indexOf(h))return b;for(var e=
function(b,a,g){g=b.indexOf(a,g);return-1===g?b.length:g},f=e(d,"/",d.indexOf("//")+2),k=-1;d.slice(0,f+1)===g.slice(0,f)+"/";){k=f+1;if(f===d.length)break;f=e(d,"/",f+1)}if(-1===k||h&&k<h.length)return b;b=c.slice(k);c=g.slice(k-1).replace(/[^/]+/g,"").length;if(0<c)for(d=0;d<c;d++)b="../"+b;else b="./"+b;return b}function B(b){b=b.trim();b=x(b);if(/^https?:\/\//i.test(b)){var a=v(b);b=a.path.replace(/\/{2,}/g,"/");b=b.replace("/","//");a.query&&(b+="?"+a.query)}b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,
"$1www.$2");return b=ba(b)}function N(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(b&&b.length){a=[];if(D(b[0])){var h=b[0],c=h.indexOf("//");-1!==c&&(a.push(h.slice(0,c+1)),ca.test(b[0])&&(a[0]+="/"),b[0]=h.slice(c+2))}else"/"===b[0][0]&&a.push("");b=b.reduce(function(b,a){return a?b.concat(a.split("/")):b},[]);for(h=0;h<b.length;h++)c=b[h],".."===c&&0<a.length&&".."!==a[a.length-1]?a.pop():(!c&&h===b.length-1||c&&("."!==c||0===a.length))&&a.push(c);return a.join("/")}}function S(b,
a){void 0===a&&(a=!1);if(T(b)||I(b))return null;var g=b.indexOf("://");if(-1===g&&C(b))g=2;else if(-1!==g)g+=3;else return null;g=b.indexOf("/",g);-1!==g&&(b=b.slice(0,g));a&&(b=J(b,!0));return b}function D(b){return C(b)||K(b)}function T(b){return"blob:"===b.slice(0,5)}function I(b){return"data:"===b.slice(0,5)}function U(b){b=O(b);if(!b||!b.isBase64)return null;b=atob(b.data);for(var a=new Uint8Array(b.length),c=0;c<b.length;c++)a[c]=b.charCodeAt(c);return a.buffer}function O(b){return(b=b.match(da))?
{mediaType:b[1],isBase64:!!b[2],data:b[3]}:null}function Q(b){var a=U(b);if(!a)return null;b=O(b);return new Blob([a],{type:b.mediaType})}function C(b){return b&&"/"===b[0]&&"/"===b[1]}function K(b){return V.test(b)}function ea(b){return W.test(b)||"http"===a.appUrl.scheme&&C(b)}function R(b){return C(b)?"https:"+b:b.replace(W,"https:")}function L(){return"https"===a.appUrl.scheme}function J(b,a){void 0===a&&(a=!1);if(C(b))return b.slice(2);b=b.replace(V,"");a&&1<b.length&&"/"===b[0]&&"/"===b[1]&&
(b=b.slice(2));return b}function ba(b){var g=G.httpsDomains;if(!ea(b))return b;var c=b.indexOf("/",7),d;d=-1===c?b:b.slice(0,c);d=d.toLowerCase().slice(7);if(fa.test(d))if(m.endsWith(d,":80"))d=d.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&d===a.appUrl.authority&&!ga.test(b))return b;if(L()&&d===a.appUrl.authority||g&&g.some(function(b){return d===b||m.endsWith(d,"."+b)})||L()&&!w(b))b=R(b);return b}function M(b,a,c){if(!(a&&c&&b&&D(b)))return b;var g=b.indexOf("//"),
h=b.indexOf("/",g+2),d=b.indexOf(":",g+2),h=Math.min(0>h?b.length:h,0>d?b.length:d);if(b.slice(g+2,h).toLowerCase()!==a.toLowerCase())return b;a=b.slice(0,g+2);b=b.slice(h);return""+a+c+b}function P(b){if("string"===typeof b)return new F(x(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}function X(b,g){var c=g&&g.url&&g.url.path;b&&c&&(b=x(b,c,{preserveProtocolRelative:!0}));(g=g&&g.portal)&&!g.isPortal&&g.urlKey&&g.customBaseUrl?(c=g.urlKey+"."+g.customBaseUrl,g=k(a.appUrl,a.appUrl.scheme+"://"+
c)?M(b,g.portalHostname,c):M(b,c,g.portalHostname)):g=b;return g}function Y(b,a){if(!b)return b;!D(b)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(b);var c=x(b);if(a){var g=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;g&&(c=A(c,g,g),c!==b&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(c))}b=c;c=(a=a&&a.portal)&&!a.isPortal&&a.urlKey&&a.customBaseUrl?M(b,a.urlKey+"."+a.customBaseUrl,a.portalHostname):b;D(c)&&(c=B(c));return c}function Z(a,
g,h){a=p(a);var b=a.query||{};b[g]=String(h);return a.path+"?"+c(b)}Object.defineProperty(a,"__esModule",{value:!0});var ha=n.getLogger("esri.core.urlUtils"),G=l.request,V=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,W=/^\s*http:/i,aa=/^\s*https:/i,ca=/^\s*file:/i,fa=/:\d+$/,ga=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ia=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,ja=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,F=function(){function a(a){void 0===a&&(a="");this.uri=
a;this.port=this.host=this.password=this.user=this.fragment=this.query=this.path=this.authority=this.scheme=null;a=this.uri.match(ia);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(ja),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)}a.prototype.toString=function(){return this.uri};return a}();a.Url=F;a.appUrl=
new F(l.applicationUrl);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=p;a.queryToObject=r;a.objectToQuery=c;a.getProxyUrl=function(b){void 0===b&&(b=!1);var c,h=G.proxyUrl;if("string"===typeof b){if(c=b,c=aa.test(c)||"https"===a.appUrl.scheme&&C(c),b=w(b))h=b.proxyUrl}else c=!!b;if(!h)throw ha.warn("esri/config: esriConfig.request.proxyUrl is not set."),
new f("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");c&&L()&&(h=R(h));return p(h)};a.addProxy=function(a){var b=w(a),h,d;b&&(d=v(b.proxyUrl),h=d.path,d=d.query?r(d.query):null);h&&(b=p(a),a=h+"?"+b.path,(h=c(t({},d,b.query)))&&(a=a+"?"+h));return a};var H={path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:e(a.urlPrefix)};for(var b=G.proxyRules,c=a.urlPrefix,d=b.length,f=0;f<b.length;f++){var k=b[f].urlPrefix;if(0===c.indexOf(k)){if(c.length===
k.length)return-1;d=f;break}0===k.indexOf(c)&&(d=f+1)}b.splice(d,0,a);return d};a.getProxyRule=w;a.hasSamePortal=function(a,c){a=E(a);c=E(c);return J(a)===J(c)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&m.startsWith(a,b)},c=G.interceptors;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(Array.isArray(e.urls)){if(e.urls.some(b))return e}else if(b(e.urls))return e}return null};a.hasSameOrigin=k;a.isTrustedServer=function(b){if("string"===
typeof b)if(D(b))b=P(b);else return!0;if(k(b,a.appUrl))return!0;for(var c=G.trustedServers||[],d=0;d<c.length;d++){var e;e=c[d];a.trustedServersUrlCache[e]||(K(e)||C(e)?a.trustedServersUrlCache[e]=[new F(x(e))]:a.trustedServersUrlCache[e]=[new F("http://"+e),new F("https://"+e)]);e=a.trustedServersUrlCache[e];for(var f=0;f<e.length;f++)if(k(b,e[f]))return!0}return!1};a.makeAbsolute=x;a.makeRelative=A;a.normalize=B;a.join=N;a.getOrigin=S;a.isAbsolute=D;a.isBlobProtocol=T;a.isDataProtocol=I;a.dataToArrayBuffer=
U;var da=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=O;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.dataToBlob=Q;a.downloadDataAsFile=function(a,c){var b;a:if(b=document.createElement("a"),"download"in b){var d=null;if(u.URL&&u.URL.createObjectURL){d=Q(a);if(!d){b=!1;break a}d=u.URL.createObjectURL(d)}b.download=c;b.href=d||a;b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b);d&&u.URL.revokeObjectURL(d);
b=void 0}else b=!1;b||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(Q(a),c)};a.isProtocolRelative=C;a.hasProtocol=K;a.toHTTP=function(a){return C(a)?"http:"+a:a.replace(aa,"http:")};a.toHTTPS=R;a.isAppHTTPS=L;a.removeFile=function(a){var b=0;if(D(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=M;a.fromJSON=X;a.read=function(a,c,d){return X(a,d)};a.toJSON=
Y;a.write=function(a,c,d,e){(a=Y(a,e))&&(c[d]=a)};a.isSVG=function(a){return ka.test(a)};a.removeQueryParameters=function(a,c){a=p(a);var b=Object.keys(a.query||{});0<b.length&&c&&c.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+b.join(", ")+".");return a.path};a.addQueryParameter=Z;a.addQueryParameters=function(a,d){a=p(a);var b=a.query||{},e;for(e in d)b[e]=d[e];return(d=c(b))?a.path+"?"+d:a.path};a.removeQueryParameter=function(a,
d){var b=p(a),e=b.path,b=b.query;if(!b)return a;delete b[d];return(a=c(b))?e+"?"+a:e};a.addTokenParameter=function(a){var b=q.id&&q.id.findCredential(a);return b&&b.token?Z(a,"token",b.token):a};var ka=/(^data:image\/svg|\.svg$)/i})},"esri/core/workers/WorkerFallback":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ./utils ./workers @dojo/framework/shim/Promise".split(" "),function(y,a,t,l,q,f,u){var n=function(){return function(){var a=this,c=
document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(d){a[d]=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return c[d].apply(c,a)}})}}(),m=q.MutationObserver||q.WebKitMutationObserver,p=function(){var a;if(q.process&&q.process.nextTick)a=function(a){q.process.nextTick(a)};else if(q.Promise)a=function(a){q.Promise.resolve().then(a)};else if(m){var c=[],f=document.createElement("div");(new m(function(){for(;0<c.length;)c.shift()()})).observe(f,
{attributes:!0});a=function(a){c.push(a);f.setAttribute("queueStatus","1")}}return a}(),r=function(){var a=q.MessageEvent;try{new a("message",{data:null})}catch(c){return function(a,c){void 0===c&&(c={});var d=c.data,e=c.bubbles,e=void 0===e?!1:e;c=c.cancelable;c=void 0===c?!1:c;var f=document.createEvent("Event");f.initEvent(a,e,c);f.data=d;return f}}return function(c,d){return new a(c,d)}}();return function(){function a(){this._dispatcher=new n;this._isInitialized=!1;this._workerPostMessage({type:f.MessageType.HANDSHAKE})}
a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);
(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a){var c=this;p(function(){c._workerMessageHandler(r("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,d,e){this._dispatcher.addEventListener(a,d,e)};a.prototype.removeEventListener=function(a,d,e){this._dispatcher.removeEventListener(a,d,e)};a.prototype._workerPostMessage=function(a){var c=
this;p(function(){c.dispatchEvent(r("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){return l(this,void 0,void 0,function(){var c,d,r,l,k,m;return t(this,function(e){switch(e.label){case 0:c=f.receiveMessage(a);if(!c)return[2];d=c.type;switch(d){case f.MessageType.CONFIGURE:return[3,1];case f.MessageType.OPEN:return[3,2]}return[3,6];case 1:return this._isInitialized||this._workerPostMessage({type:f.MessageType.CONFIGURED}),[3,6];case 2:return r=c.modulePath,l=c.jobId,[4,u.RemoteClient.loadWorker(r)];
case 3:return(k=e.sent())?[3,5]:[4,new Promise(function(a,c){y([r],a,c)})];case 4:k=e.sent(),e.label=5;case 5:return m=u.RemoteClient.connect(k),this._workerPostMessage({type:f.MessageType.OPENED,jobId:l,data:m}),[3,6];case 6:return[2]}})})};return a}()})},"*noref":1}});
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/extendsHelper ../../core/promiseUtils ../../core/workers".split(" "),function(y,a,t,l,q,f){function u(){return q.create(function(a){return y(["./rasterFormats/LercCodec"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function a(){}a.prototype._decode=function(a){return u().then(function(c){c=c.decode;c=c(a.buffer,a.options);return{result:c,transferList:[c.pixelData.buffer]}})};return a}(),m=function(a){function d(c){var d=
a.call(this)||this;d.scheduler=c;d._threadInitialized=q.create(function(a){f.open("LercWorker",{strategy:"dedicated",scheduler:c}).then(function(c){void 0===d._thread?d._thread=c:c.close();a()},function(){return a()})});return d}l(d,a);d.prototype.destroy=function(){this._thread&&this._thread.close();this._thread=null};Object.defineProperty(d.prototype,"test",{get:function(){return{threadInitialized:this._threadInitialized}},enumerable:!0,configurable:!0});d.prototype.decode=function(a,d,e){return a&&
0!==a.byteLength?this._thread?this._thread.invoke("_decode",{buffer:a,options:d},{transferList:[a],signal:e}):u().then(function(c){c=c.decode;q.throwIfAborted(e);return c(a,d)}):q.resolve(null)};return d}(n);a.LercWorkerMaster=m;var p=new Map;a.acquireInstance=function(a){var d=p.get(a);d||(d={instance:new m(a),ref:0},p.set(a,d));++d.ref;return d.instance};a.releaseInstance=function(a){if(null!=a){a=a.scheduler;var d=p.get(a);d&&0>=--d.ref&&(d.instance.destroy(),p.delete(a))}};a.default=function(){return new n}});