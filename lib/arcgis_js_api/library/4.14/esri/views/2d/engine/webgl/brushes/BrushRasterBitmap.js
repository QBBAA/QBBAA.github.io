// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../VertexStream ../WGLRasterUtils ./WGLBrush".split(" "),function(h,k,l,m,n,g,p){Object.defineProperty(k,"__esModule",{value:!0});h=function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a._desc={lut:{path:"raster/lut",attributes:{a_position:0,a_texcoord:1}},stretch:{path:"raster/stretch",attributes:{a_position:0,a_texcoord:1}}};return a}l(b,e);b.prototype.dispose=function(){this._quad&&
this._quad.dispose()};b.prototype.prepareState=function(a,c){a=a.context;a.setBlendingEnabled(!0);a.setBlendFunctionSeparate(1,771,1,771);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(514,c.stencilRef,255)};b.prototype.draw=function(a,c){var b=a.context,d=a.painter;if(c.source){a.timeline.begin(this.name);this._quad||(this._quad=new n(b,[0,0,1,0,0,1,1,1]));d=d.materialManager.getProgram(a,this._desc[c.symbolizerParameters.type]);b.bindProgram(d);
var e=g.getUniformInfos(b,d),f=c.getTextures();g.setTextures(b,d,f.names,f.textures);f=c.getUniforms();c=m({u_opacity:c.opacity,u_coordScale:c.coordScale},f);c.u_flipY=!1;g.setUniforms(b,d,e,c);this._quad.draw();a.timeline.end(this.name)}};return b}(p.default);k.default=h});