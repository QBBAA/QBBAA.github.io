// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/3d/interactive/editingTools/graphicMove3D/GraphicMove3DTool":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/Collection ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ../../Manipulator3D ../../manipulatorUtils ../manipulatorDragUtils ../manipulatorUtils ./isSupportedGraphic ../../../../interactive/InteractiveToolBase".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C){Object.defineProperty(b,"__esModule",{value:!0});var q=function(){return function(a){this.allGraphics=a;this.type="graphic-move-start"}}();b.GraphicMoveStartEvent=q;var z=function(){return function(a,f,c,g){this.dx=a;this.dy=f;this.dz=c;this.allGraphics=g;this.type="graphic-move"}}();b.GraphicMoveEvent=z;var v=function(){return function(a){this.allGraphics=a;this.type="graphic-move-stop"}}();b.GraphicMoveStopEvent=v;y=function(e){function f(a){a=e.call(this,
a)||this;a.graphics=new n;a.enableZ=!0;a.type="move-3d";a._handles=new x;return a}w(f,e);f.prototype.initialize=function(){var a=this;this._handles.add(this.graphics.on("change",function(){a._refreshManipulators()}));this._refreshManipulators()};f.prototype.destroy=function(){this._handles.destroy();this._handles=null;this.graphics.removeAll();this._set("view",null)};f.prototype.reset=function(){};f.prototype._refreshManipulators=function(){var e=this;this._handles.remove("graphics");this.manipulators.removeAll();
for(var f=this.graphics.toArray(),c=[],u=function(f){if(0!==p.isSupportedGraphic(f))return"continue";var u=B.createGraphicMoveXYManipulator(m.view,f);m._handles.add(u.events.on("immediate-click",function(a){e.emit("immediate-click",t({},a,{graphic:f}));a.stopPropagation()}),"graphics");m.manipulators.add(u);c.push(u);var v=m.enableZ?B.createGraphicMoveZManipulator({view:m.view,graphic:f}):null;if(a.isNone(v))return"continue";m._handles.add([g.init(f,"geometry",function(){return r.placeManipulatorAtGraphic(v,
f)}),g.init(f,["visible","layer.visible"],function(){return v.visible=f.visible&&f.layer.visible})],"graphics");m.manipulators.add(v);c.push(v)},m=this,v=0;v<f.length;v++)u(f[v]);u=d.createManipulatorDragEventPipelineManyOneOf(c,function(a,m,c){a instanceof h.Manipulator3D?e.buildZManipulatorEventPipeline(a,m,f):e.buildGraphicManipulatorEventPipeline(a,c,m,f)});this._handles.add(u,"graphics")};f.prototype.buildZManipulatorEventPipeline=function(a,e,f){var c=this;e.next(d.screenToZConstrained(this.view,
a.renderLocation,a.location.spatialReference)).next(function(a){"start"===a.action&&c.emit("graphic-move-start",new q(f));return a}).next(d.dragGraphicMany(f)).next(function(a){switch(a.action){case "start":case "update":(a.translationX||a.translationY||a.translationZ)&&c.emit("graphic-move",new z(a.translationX,a.translationY,a.translationZ,f));break;case "end":c.emit("graphic-move-stop",new v(f))}})};f.prototype.buildGraphicManipulatorEventPipeline=function(f,e,c,g){var m=this,u=a.isSome(f.graphic.geometry)?
f.graphic.geometry.spatialReference:null;c.next(d.screenToMapXYForGraphic(e,this.view,f.graphic,u)).next(function(a){"start"===a.action&&m.emit("graphic-move-start",new q(g));return a}).next(d.dragGraphicMany(g)).next(function(a){switch(a.action){case "start":case "update":(a.translationX||a.translationY||a.translationZ)&&m.emit("graphic-move",new z(a.translationX,a.translationY,a.translationZ,g));break;case "end":m.emit("graphic-move-stop",new v(g))}})};l([k.property({constructOnly:!0,nonNullable:!0})],
f.prototype,"view",void 0);l([k.property({readOnly:!0})],f.prototype,"graphics",void 0);l([k.property({constructOnly:!0,nonNullable:!0})],f.prototype,"enableZ",void 0);l([k.property({readOnly:!0})],f.prototype,"type",void 0);return f=l([k.subclass("esri.views.3d.interactive.editingTools.graphicMove3D.GraphicMove3DTool")],f)}(k.declared(c.EventedMixin(C.InteractiveToolBase)));b.GraphicMove3DTool=y})},"esri/views/3d/interactive/Manipulator3D":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../geometry ../../../core/compilerUtils ../../../core/Evented ../../../core/maybe ../../../core/screenUtils ../../../core/libs/gl-matrix-2/mat3 ../../../core/libs/gl-matrix-2/mat3f64 ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f64 ../../../core/libs/gl-matrix-2/vec2 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ../../../geometry/support/aaBoundingRect ../../../layers/graphics/dehydratedFeatures ../../3d/support/ElevationProvider ../../3d/support/geometryUtils ../../3d/support/projectionUtils ../../3d/support/stack ../../3d/webgl-engine/lib/Camera ../../3d/webgl-engine/lib/Layer ../../3d/webgl-engine/lib/Object3D".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f,F,A,H){function u(a){return 0!==a[12]||0!==a[13]||0!==a[14]}Object.defineProperty(b,"__esModule",{value:!0});y=function(){function b(f){this.camera=new F.default;this._elevation={offset:0,override:0};this._hideOnGrab=!1;this.collisionType={type:"point"};this.collisionPriority=0;this.renderObjects=[];this._visible=this.autoScaleRenderObjects=!0;this._radius=10;this._worldSized=!1;this.focusMultiplier=2;this.touchMultiplier=2.5;this.worldOriented=
!1;this._modelTransform=r.mat4f64.create();this._worldFrame=null;this._renderLocation=p.vec3f64.create();this._renderLocationDirty=!0;this._elevationAlignedLocation=new t.Point;this.interactive=this._elevationAlignedLocationDirty=!0;this.selectable=!1;this.cursor=null;this._selected=this._hovering=this.dragging=this._grabbing=!1;this._state=0;this._focused=!1;this.events=new c({target:this});this._screenLocation={screenPointArray:a.createScreenPointArray(),renderScreenPointArray:a.createRenderScreenPointArray3(),
pixelSize:0};this._screenLocationDirty=!0;this._engineResourcesAddedToStage=!1;this._engineResources=null;this._attached=!1;this._materialIdReferences=this._engineLayerId=null;this._location=new t.Point({x:0,y:0,z:0,spatialReference:f.view.spatialReference});for(var e in f)this[e]=f[e];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}b.prototype.destroy=function(){this._removeResourcesFromStage();this.camera=this.view=this._engineResources=null};Object.defineProperty(b.prototype,
"elevationInfo",{get:function(){return this._elevationInfo},set:function(a){this._elevationInfo=a;this._elevationAlignedLocationDirty=!0;this._updateEngineObject()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hideOnGrab",{get:function(){return this._hideOnGrab},set:function(a){this._hideOnGrab!==a&&(this._hideOnGrab=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){a!==
this._visible&&(this._visible=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"radius",{get:function(){return this._radius},set:function(a){a!==this._radius&&(this._radius=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"worldSized",{get:function(){return this._worldSized},set:function(a){a!==this._worldSized&&(this._worldSized=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"modelTransform",{get:function(){return this._modelTransform},set:function(a){u(a)&&(this._screenLocationDirty=!0);h.mat4.copy(this._modelTransform,a);this._updateEngineObject()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderLocation",{get:function(){this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=r.mat4f64.create()),
e.computeLinearTransformation(this.view.renderSpatialReference,this._renderLocation,this._worldFrame,this.view.renderSpatialReference),this._worldFrame[12]=0,this._worldFrame[13]=0,this._worldFrame[14]=0):this._worldFrame&&(this._worldFrame=null));return this._renderLocation},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"location",{get:function(){return this._location},set:function(a){q.clonePoint(a,this._location);this._elevationAlignedLocationDirty=this._screenLocationDirty=
this._renderLocationDirty=!0;this._updateEngineObject()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"elevationAlignedLocation",{get:function(){if(!this._elevationAlignedLocationDirty)return this.elevationAlignedLocation;this._evaluateElevationAlignment();this._updateElevationAlignedLocation();return this._elevationAlignedLocation},set:function(a){q.clonePoint(a,this._location);this._evaluateElevationAlignment();this._location.z-=this._elevation.offset;this._updateElevationAlignedLocation();
this._updateEngineObject()},enumerable:!0,configurable:!0});b.prototype._updateElevationAlignedLocation=function(){this._elevationAlignedLocation.x=this.location.x;this._elevationAlignedLocation.y=this.location.y;var a=x.isSome(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=a+this._elevation.offset;this._elevationAlignedLocation.spatialReference=this.location.spatialReference;this._screenLocationDirty=this._renderLocationDirty=!0};Object.defineProperty(b.prototype,
"grabbing",{get:function(){return this._grabbing},set:function(a){a!==this._grabbing&&(this._grabbing=a,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hovering",{get:function(){return this._hovering},set:function(a){a!==this._hovering&&(this._hovering=a,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selected",
{get:function(){return this._selected},set:function(a){a!==this._selected&&(this._selected=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this._state},set:function(a){a!==this._state&&(this._state=a,this._updateEngineObject())},enumerable:!0,configurable:!0});b.prototype._setFocused=function(a){a!==this._focused&&(this._focused=a,this.events.emit("focus",{action:!0===a?"focus":"unfocus"}))};Object.defineProperty(b.prototype,
"focused",{get:function(){return this._focused},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"screenLocation",{get:function(){this.ensureScreenLocation();return this._screenLocation},enumerable:!0,configurable:!0});b.prototype.ensureScreenLocation=function(){if(this._screenLocationDirty){this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation);this._screenLocationDirty=!1;var a;u(this._modelTransform)?(a=this._calculateModelTransformOffset(R),a=
B.vec3.add(a,a,this.renderLocation)):a=this.renderLocation;this.camera.projectPoint(a,this._screenLocation.renderScreenPointArray);this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}};b.prototype.intersectionDistance=function(e,b){if(!this.visible)return null;var c=a.screenPointObjectToArray(e,m),u=this._getCollisionRadius(b);b=-1*this.collisionPriority;switch(this.collisionType.type){case "point":if(d.vec2.squaredDistance(this.screenLocation.screenPointArray,
c)<u*u)return this.screenLocation.renderScreenPointArray[2]+b;break;case "line":var q=this.collisionType.paths;e=this._getWorldToScreenObjectScale();e=this._calculateObjectTransform(e,I);for(var u=u*this.screenLocation.pixelSize,c=v.ray.fromScreen(this.camera,c,G),p=0,x=q;p<x.length;p++)if(q=x[p],0!==q.length)for(var h=B.vec3.transformMat4(N,q[0],e),k=1;k<q.length;k++){var P=B.vec3.transformMat4(O,q[k],e),z=v.lineSegment.closestRayDistance2(v.lineSegment.fromPoints(h,P,D),c);if(null!=z&&z<u*u)return e=
B.vec3.add(f.sv3d.get(),h,P),B.vec3.scale(e,e,.5),u=a.castRenderScreenPointArray(f.sv3d.get()),this.camera.projectPoint(e,u),u[2]+b;B.vec3.copy(h,P)}break;case "disc":h=this.collisionType.direction;e=this._getWorldToScreenObjectScale();e=this._calculateObjectTransform(e,I);u*=this.screenLocation.pixelSize;c=v.ray.fromScreen(this.camera,c,G);k=g.mat3.fromMat4(K,e);k=B.vec3.transformMat3(Q,h,k);h=this._calculateModelTransformPosition(S);v.plane.fromPositionAndNormal(h,k,J);p=E;if(v.plane.intersectRay(J,
c,p)&&B.vec3.squaredDistance(p,h)<u*u)return this.screenLocation.renderScreenPointArray[2]+b;break;case "ribbon":e=this.collisionType;q=e.paths;h=e.direction;e=this._getWorldToScreenObjectScale();e=this._calculateObjectTransform(e,I);u*=this.camera.computeScreenPixelSizeAt(this.renderLocation);c=v.ray.fromScreen(this.camera,c,G);k=g.mat3.fromMat4(K,e);k=B.vec3.transformMat3(Q,h,k);h=this._calculateModelTransformPosition(S);v.plane.fromPositionAndNormal(h,k,J);p=E;if(!v.plane.intersectRay(J,c,p))break;
c=0;for(x=q;c<x.length;c++)if(q=x[c],0!==q.length)for(h=B.vec3.transformMat4(N,q[0],e),k=1;k<q.length;k++){P=B.vec3.transformMat4(O,q[k],e);z=v.lineSegment.distance2(v.lineSegment.fromPoints(h,P,D),p);if(null!=z&&z<u*u)return e=B.vec3.add(f.sv3d.get(),h,P),B.vec3.scale(e,e,.5),u=a.castRenderScreenPointArray(f.sv3d.get()),this.camera.projectPoint(e,u),u[2]+b;B.vec3.copy(h,P)}break;default:n.neverReached(this.collisionType)}return null};b.prototype.attach=function(a){void 0===a&&(a={manipulator3D:{}});
if(this.view._stage){a=a.manipulator3D;this._engineLayerId=a.engineLayerId;if(x.isNone(this._engineLayerId)){var f=new A("manipulator-3d",{isPickable:!1});this.view._stage.add(0,f);this.view._stage.addToViewContent([f.id]);this._engineLayerId=f.id;a.engineLayerId=f.id}a.engineLayerReferences=(a.engineLayerReferences||0)+1;this._materialIdReferences=a.materialIdReferences;x.isNone(this._materialIdReferences)&&(this._materialIdReferences=new Map,a.materialIdReferences=this._materialIdReferences);this.camera.copyFrom(this.view.state.camera);
this._attached=!0;this._updateEngineObject();e.canProject(this._location.spatialReference,this.view.spatialReference)||(this.location=new t.Point({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}};b.prototype.detach=function(a){void 0===a&&(a={manipulator3D:{}});a=a.manipulator3D;a.engineLayerReferences--;var e=0===a.engineLayerReferences;e&&(a.engineLayerId=null);this._removeResourcesFromStage(e);this._materialIdReferences=this._engineLayerId=this._engineResources=null;this._attached=
!1};b.prototype.onViewChange=function(){this.camera.copyFrom(this.view.state.camera);this._screenLocationDirty=!0;this._updateEngineObject()};b.prototype.onElevationChange=function(a){C.containsPointObject(a.extent,this.location)&&(this._elevationAlignedLocationDirty=!0,this._updateEngineObject())};b.prototype._evaluateElevationAlignment=function(a){void 0===a&&(a=this.location);if(x.isNone(this.elevationInfo))return!1;var e=null,f=0;switch(this.elevationInfo.mode){case "on-the-ground":e=z.getElevationAtPoint(this.view.elevationProvider,
a,"ground")||0;break;case "relative-to-ground":f=(z.getElevationAtPoint(this.view.elevationProvider,a,"ground")||0)+(this.elevationInfo.offset||0);break;case "relative-to-scene":f=(z.getElevationAtPoint(this.view.elevationProvider,a,"scene")||0)+(this.elevationInfo.offset||0);break;case "absolute-height":f=this.elevationInfo.offset||0}return f!==this._elevation.offset||e!==this._elevation.override?(this._elevation.offset=f,this._elevation.override=e,!0):!1};b.prototype._updateEngineObject=function(){if(this._attached)if(!1===
this.visible)this._removeResourcesFromStage();else{var a=this._getWorldToScreenObjectScale(),e=I;!0===this.autoScaleRenderObjects&&(a*=this._getFocusedSize(this._radius,this.focused));this._calculateObjectTransform(a,e);for(var a=this._ensureEngineResources().objectsByState,f=(this.focused?2:1)|(this.selected?8:4),m=this.hideOnGrab&&this.grabbing,c=0;c<a.length;c++){var b=a[c],u=b.stateMask,b=b.objects;if(m)for(var u=0,g=b;u<g.length;u++)b=g[u],b.hideAllComponents();else if(g=0===(u&65520)||(this.state&
u)===(u&65520),0!==(u&15)&&(f&u)!==(u&15)||!g)for(u=0,g=b;u<g.length;u++)b=g[u],b.hideAllComponents();else for(u=0,g=b;u<g.length;u++)b=g[u],b.unhideAllComponents(),b.objectTransformation=e}}};b.prototype._ensureEngineResources=function(){if(x.isNone(this._engineResources)){var a=this.view._stage.getContent(0,x.expect(this._engineLayerId)),e=[],f=new Set;this.renderObjects.forEach(function(a){a=a.material;f.has(a)||(e.push(a),f.add(a))});var b=function(a,e){var f=e.geometry,b=e.material,c=e.transform;
Array.isArray(f)?f.forEach(function(e){return a.addGeometry(e,b,c)}):a.addGeometry(f,b,c)},c=new Map;this.renderObjects.forEach(function(a){var e=new H({idHint:"manipulator"});b(e,a);a=a.stateMask||0;var f=c.get(a)||[];f.push(e);c.set(a,f)});var m=[];c.forEach(function(a,e){m.push({stateMask:e,objects:a})});this._engineResources={objectsByState:m,layer:a,materials:e}}this._addResourcesToStage();return this._engineResources};b.prototype._addResourcesToStage=function(){var a=this;if(!this._engineResourcesAddedToStage&&
!x.isNone(this._engineResources)){var e=this._engineResources,f=e.objectsByState,b=e.layer;e.materials.forEach(function(e){var f=x.expect(a._materialIdReferences),b=f.get(e.id)||0;0===b&&a.view._stage.add(3,e);f.set(e.id,b+1)});f.forEach(function(e){e.objects.forEach(function(e){b.addObject(e);a.view._stage.add(1,e)})});this._engineResourcesAddedToStage=!0}};b.prototype._removeResourcesFromStage=function(a){var e=this;void 0===a&&(a=!1);if(this._engineResourcesAddedToStage&&!x.isNone(this._engineResources)){var f=
this._engineResources,b=f.layer,c=f.materials;f.objectsByState.forEach(function(a){a.objects.forEach(function(a){b.removeObject(a);e.view._stage.remove(1,a.id)})});c.forEach(function(a){var f=x.expect(e._materialIdReferences),b=f.get(a.id);1===b?(e.view._stage.remove(3,a.id),f.delete(a.id)):f.set(a.id,b-1)});a&&this.view._stage.remove(0,b.id);this._engineResourcesAddedToStage=!1}};b.prototype._getCollisionRadius=function(a){return this._getFocusedSize(this.radius,!0)*("touch"===a?this.touchMultiplier:
1)};b.prototype._getFocusedSize=function(a,e){return a*(e?this.focusMultiplier:1)};b.prototype._getWorldToScreenObjectScale=function(){return this._worldSized?1:this.screenLocation.pixelSize};b.prototype._calculateModelTransformPosition=function(a){var e=this._getWorldToScreenObjectScale(),e=this._calculateObjectTransform(e,M);return B.vec3.set(a,e[12],e[13],e[14])};b.prototype._calculateModelTransformOffset=function(a){var e=this._calculateModelTransformPosition(a);return B.vec3.subtract(a,e,this.renderLocation)};
b.prototype._calculateObjectTransform=function(a,e){h.mat4.set(e,a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1);h.mat4.multiply(e,e,this._modelTransform);this._worldFrame&&h.mat4.multiply(e,e,this._worldFrame);e[12]+=this.renderLocation[0];e[13]+=this.renderLocation[1];e[14]+=this.renderLocation[2];e[15]=1;return e};return b}();b.Manipulator3D=y;var m=a.createScreenPointArray(),D=v.lineSegment.create(),G=v.ray.create(),K=k.mat3f64.create(),M=r.mat4f64.create(),I=r.mat4f64.create(),J=v.plane.create(),N=p.vec3f64.create(),
O=p.vec3f64.create(),E=p.vec3f64.create(),Q=p.vec3f64.create(),S=p.vec3f64.create(),R=p.vec3f64.create()})},"esri/views/3d/interactive/manipulatorUtils":function(){define("require exports ../../../core/maybe ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../layers/graphics/dehydratedFeatures ../layers/graphics/graphicUtils ../support/stack ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryUtil ../webgl-engine/materials/DefaultMaterial ../../interactive/Manipulator3D".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h){function r(a,b){var c=1!==b;a=new k({diffuse:a,transparent:c,writeDepth:!c,cullFace:2,opacity:b,castShadows:!1,softwareInstanced:!0},"manipulator");a.renderOccluded=4;return a}function d(a,b,c,g){a=t.vec3.normalize(x.sv3d.get(),a);b=t.vec3.normalize(x.sv3d.get(),b);var d=t.vec3.cross(x.sv3d.get(),a,b);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=0;g[4]=b[0];g[5]=b[1];g[6]=b[2];g[7]=0;g[8]=d[0];g[9]=d[1];g[10]=d[2];g[11]=0;g[12]=c[0];g[13]=c[1];g[14]=c[2];g[15]=1;return g}Object.defineProperty(b,
"__esModule",{value:!0});b.createManipulatorMaterial=r;b.createSphereManipulator=function(b,c,d){return new h.Manipulator3D({view:b,renderObjects:[{geometry:new a(g.createSphereGeometry(1,32,32),"manipulator"),material:r(c,d)}]})};b.calculateInputRotationTransform=function(a,b,c,g){a=t.vec3.subtract(x.sv3d.get(),a,c);g=t.vec3.cross(x.sv3d.get(),g,a);c=d(a,g,c,x.sm4d.get());w.mat4.invert(c,c);b=t.vec3.transformMat4(x.sv3d.get(),b,c);return Math.atan2(b[1],b[0])};b.calculateTranslateRotateFromBases=
d;b.placeManipulatorAtGraphic=function(a,b){var g=a.view.getViewForGraphic(b),g=l.isSome(g)&&"computeAttachmentOrigin"in g?g.computeAttachmentOrigin(b,a.view.spatialReference):null;l.isSome(g)?a.elevationAlignedLocation=g:(b=b.geometry,l.isNone(b)||(b=c.computeCentroid(b),l.isNone(b)||(a.location=n.hydrateGeometry(b))))}})},"esri/views/interactive/Manipulator3D":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/assignHelper ../../core/Accessor ../../core/compilerUtils ../../core/Evented ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f64 ../../core/libs/gl-matrix-2/mat4 ../../core/libs/gl-matrix-2/mat4f64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ../../geometry/support/aaBoundingRect ../../layers/graphics/dehydratedFeatures ../3d/support/ElevationProvider ../3d/support/geometryUtils ../3d/support/projectionUtils ../3d/support/stack ../3d/webgl-engine/lib/Intersector ../3d/webgl-engine/lib/intersectorUtils ../3d/webgl-engine/lib/Layer ../3d/webgl-engine/lib/Object3D".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f,F,A,H,u,m,D,G,K){function M(a){return 0!==a[12]||0!==a[13]||0!==a[14]}Object.defineProperty(b,"__esModule",{value:!0});y=function(b){function d(a){a=b.call(this,a)||this;a.hideOnGrab=!1;a.moveOnDrag=!0;a.snapToPointer=!0;a.collisionType={type:"point"};a.collisionPriority=0;a.renderObjects=[];a.autoScaleRenderObjects=!0;a._radius=10;a._worldSized=!1;a._focusMultiplier=2;a._touchMultiplier=2.5;a.interactive=!0;a.selectable=!1;a.cursor=null;a.dragging=
!1;a._areAnyEngineObjectsVisible=!1;a.events=new x({target:a});a._position=v.vec3f64.create();a._modelTransform=p.mat4f64.create();a._dragOffset=null;a._dirtyScreenPoint=g.createScreenPoint();a._dirtyScreenPointArray=g.createScreenPointArray();a._dirtyRenderScreenPointArray=g.createRenderScreenPointArray3();a._dirtyOriginScreenPointArray=g.createScreenPointArray();a._dirtyScreenPixelSize=1;a._screenPositionDirty=!0;a._engineResourcesAddedToStage=!1;a._engineResources=null;a._attached=!1;a._engineLayerId=
null;a._materialIdReferences=null;a._hitResult={onSurface:!1,surfaceType:"ground"};return a}w(d,b);d.prototype.initialize=function(){var a=this;this._intersector=new m(this.view.viewingMode);this._mapPoint=f.makeDehydratedPoint(0,0,0,this.view.spatialReference);this.events.on("drag",function(e){return a.drag(e)})};d.prototype.destroy=function(){this._removeResourcesFromStage();this._engineResources=null;this._set("view",null);this._camera=null};Object.defineProperty(d.prototype,"alignment",{get:function(){return this._get("alignment")},
set:function(a){this._set("alignment",a);this.constructed&&this._refreshMapPoint()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){a!==this._get("visible")&&(this._set("visible",a),this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"radius",{get:function(){return this._radius},set:function(a){a!==this._radius&&(this._radius=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"worldSized",{get:function(){return this._worldSized},set:function(a){a!==this._worldSized&&(this._worldSized=a,this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"focusMultiplier",{get:function(){return this._focusMultiplier},set:function(a){this._focusMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"touchMultiplier",{get:function(){return this._touchMultiplier},set:function(a){this._touchMultiplier=a},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"modelTransform",{get:function(){return this._modelTransform},set:function(a){M(a)&&(this._screenPositionDirty=!0);B.mat4.copy(this._modelTransform,a);this._updateEngineObject()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"position",{get:function(){return this._position},set:function(a){this.view.renderCoordsHelper.fromRenderCoords(a,this._mapPoint,this._mapPoint.spatialReference);this._refreshMapPoint()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"mapPoint",{get:function(){return this._mapPoint},set:function(a){f.clonePoint(a,this._mapPoint);this._refreshMapPoint()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"grabbing",{set:function(a){a!==this._get("grabbing")&&(this._set("grabbing",a),this._updateEngineObject());a||(this._dragOffset=null)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hovering",{set:function(a){a!==this._get("hovering")&&(this._set("hovering",a),this._updateEngineObject())},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"selected",{set:function(a){a!==this._get("selected")&&(this._set("selected",a),this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"state",{set:function(a){a!==this._get("state")&&(this._set("state",a),this._updateEngineObject())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"areAnyEngineObjectsVisible",{get:function(){return this._areAnyEngineObjectsVisible},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"surfaceType",{get:function(){return this._hitResult.onSurface?this._hitResult.surfaceType:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"focused",{get:function(){return this._focused},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_focused",{get:function(){return this._get("hovering")||this._get("grabbing")},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"screenPoint",{get:function(){this._updateScreenSpaceProperties();
return this._dirtyScreenPoint},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_screenPointArray",{get:function(){this._updateScreenSpaceProperties();return this._dirtyScreenPointArray},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_renderScreenPointArray",{get:function(){this._updateScreenSpaceProperties();return this._dirtyRenderScreenPointArray},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_originScreenPointArray",{get:function(){this._updateScreenSpaceProperties();
return this._dirtyOriginScreenPointArray},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_screenPixelSize",{get:function(){this._updateScreenSpaceProperties();return this._dirtyScreenPixelSize},enumerable:!0,configurable:!0});d.prototype._updateScreenSpaceProperties=function(){if(this._screenPositionDirty){this._screenPositionDirty=!1;this._dirtyScreenPixelSize=this._camera.computeScreenPixelSizeAt(this._position);var a=M(this._modelTransform),e;a?(e=this._calculateModelTransformOffset(Z),
e=z.vec3.add(e,e,this._position)):e=this._position;this._camera.projectPoint(e,this._dirtyRenderScreenPointArray);this._camera.renderToScreen(this._dirtyRenderScreenPointArray,this._dirtyScreenPointArray);g.screenPointArrayToObject(this._dirtyScreenPointArray,this._dirtyScreenPoint);a?(this._camera.projectPoint(this._position,N),this._camera.renderToScreen(N,this._dirtyOriginScreenPointArray)):C.vec2.copy(this._dirtyOriginScreenPointArray,this._dirtyScreenPointArray)}};d.prototype.intersectionDistance=
function(a,e){if(!this._get("visible"))return null;var b=g.screenPointObjectToArray(a,J),f=this._getCollisionRadius(e);e=-1*this._get("collisionPriority");switch(this.collisionType.type){case "point":if(C.vec2.squaredDistance(this._screenPointArray,b)<f*f)return this._renderScreenPointArray[2]+e;break;case "line":var d=this.collisionType.paths;a=this._getWorldToScreenObjectScale();a=this._calculateObjectTransform(a,R);for(var f=f*this._screenPixelSize,b=A.ray.fromScreen(this._camera,b,E),m=0,v=d;m<
v.length;m++)if(d=v[m],0!==d.length)for(var q=z.vec3.transformMat4(U,d[0],a),h=1;h<d.length;h++){var k=z.vec3.transformMat4(V,d[h],a),D=A.lineSegment.closestRayDistance2(A.lineSegment.fromPoints(q,k,O),b);if(null!=D&&D<f*f)return a=z.vec3.add(u.sv3d.get(),q,k),z.vec3.scale(a,a,.5),f=g.castRenderScreenPointArray(u.sv3d.get()),this._camera.projectPoint(a,f),f[2]+e;z.vec3.copy(q,k)}break;case "disc":q=this.collisionType.direction;a=this._getWorldToScreenObjectScale();a=this._calculateObjectTransform(a,
R);f*=this._screenPixelSize;b=A.ray.fromScreen(this._camera,b,E);h=r.mat3.fromMat4(Q,a);h=z.vec3.transformMat3(W,q,h);q=this._calculateModelTransformPosition(X);A.plane.fromPositionAndNormal(q,h,L);m=T;if(A.plane.intersectRay(L,b,m)&&z.vec3.squaredDistance(m,q)<f*f)return this._renderScreenPointArray[2]+e;break;case "ribbon":a=this.collisionType;d=a.paths;q=a.direction;a=this._getWorldToScreenObjectScale();a=this._calculateObjectTransform(a,R);f*=this._camera.computeScreenPixelSizeAt(this._position);
b=A.ray.fromScreen(this._camera,b,E);h=r.mat3.fromMat4(Q,a);h=z.vec3.transformMat3(W,q,h);q=this._calculateModelTransformPosition(X);A.plane.fromPositionAndNormal(q,h,L);m=T;if(!A.plane.intersectRay(L,b,m))break;b=0;for(v=d;b<v.length;b++)if(d=v[b],0!==d.length)for(q=z.vec3.transformMat4(U,d[0],a),h=1;h<d.length;h++){k=z.vec3.transformMat4(V,d[h],a);D=A.lineSegment.distance2(A.lineSegment.fromPoints(q,k,O),m);if(null!=D&&D<f*f)return a=z.vec3.add(u.sv3d.get(),q,k),z.vec3.scale(a,a,.5),f=g.castRenderScreenPointArray(u.sv3d.get()),
this._camera.projectPoint(a,f),f[2]+e;z.vec3.copy(q,k)}break;default:c.neverReached(this.collisionType)}return null};d.prototype.drag=function(e){if(this.moveOnDrag){e=g.screenPointObjectToArray(e.screenPoint,J);a.isNone(this._dragOffset)&&this.grabbing&&!this.snapToPointer&&(this._dragOffset=C.vec2.subtract(q.vec2f32.create(),e,this._originScreenPointArray));a.isSome(this._dragOffset)&&C.vec2.subtract(e,e,this._dragOffset);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(e,this._intersector,
"on-the-ground"===this.alignment?I:null);e=this._intersector.results.min;var b=T;e.getIntersectionPoint(b)?(this.position=b,this._hitResult.onSurface=!0,this._hitResult.surfaceType="TerrainRenderer"===e.intersector?"ground":"feature"):this._hitResult.onSurface=!1}};d.prototype.attach=function(e){void 0===e&&(e={manipulator3D:{}});if(this.view._stage){e=e.manipulator3D;this._engineLayerId=e.engineLayerId;if(a.isNone(this._engineLayerId)){var b=new G("manipulator-3d",{isPickable:!1});this.view._stage.add(0,
b);this.view._stage.addToViewContent([b.id]);this._engineLayerId=b.id;e.engineLayerId=b.id}e.engineLayerReferences=(e.engineLayerReferences||0)+1;this._materialIdReferences=e.materialIdReferences;a.isNone(this._materialIdReferences)&&(this._materialIdReferences=new Map,e.materialIdReferences=this._materialIdReferences);this._camera=this.view.state.camera;this._attached=!0;this._updateEngineObject();H.canProject(this._mapPoint.spatialReference,this.view.spatialReference)||(this.mapPoint=f.makeDehydratedPoint(0,
0,0,this.view.spatialReference))}};d.prototype.detach=function(a){void 0===a&&(a={manipulator3D:{}});a=a.manipulator3D;a.engineLayerReferences--;var e=0===a.engineLayerReferences;e&&(a.engineLayerId=null);this._removeResourcesFromStage(e);this._camera=this._materialIdReferences=this._engineLayerId=this._engineResources=null;this._attached=!1};d.prototype.onViewChange=function(){this._camera=this.view.state.camera;this._screenPositionDirty=!0;this._updateEngineObject()};d.prototype.onElevationChange=
function(a){this.view.renderCoordsHelper.fromRenderCoords(this.position,Y,a.spatialReference)&&e.containsPoint(a.extent,Y)&&this._refreshMapPoint(!0)};d.prototype._refreshMapPoint=function(a){void 0===a&&(a=!1);switch(this.alignment){case "none":break;case "on-the-ground":var e=F.getElevationAtPoint(this.view.elevationProvider,this.mapPoint,"ground");if(e===this._mapPoint.z&&a)return;this._mapPoint.z=e;break;default:c.neverReached(this.alignment)}this._screenPositionDirty=!0;this._hitResult.onSurface=
!1;this.view.renderCoordsHelper.toRenderCoords(this._mapPoint,this._position);this._updateEngineObject()};d.prototype._updateEngineObject=function(){this._areAnyEngineObjectsVisible=!1;if(this._attached)if(!1===this._get("visible"))this._removeResourcesFromStage();else{var a=this._getWorldToScreenObjectScale(),e=R;!0===this._get("autoScaleRenderObjects")&&(a*=this._getFocusedSize(this._radius,this._focused));this._calculateObjectTransform(a,e);for(var a=this._ensureEngineResources().objectsByState,
b=(this._focused?2:1)|(this._get("selected")?8:4),f=this._get("hideOnGrab")&&this._get("grabbing"),d=0;d<a.length;d++){var c=a[d],m=c.stateMask,c=c.objects;if(f)for(var m=0,g=c;m<g.length;m++)c=g[m],c.hideAllComponents();else if(g=0===(m&15)||(b&m)===(m&15),m=0===(m&65520)||(this._get("state")&m)===(m&65520),g&&m)for(m=0,g=c;m<g.length;m++)c=g[m],c.unhideAllComponents(),c.objectTransformation=e,this._areAnyEngineObjectsVisible=!0;else for(m=0,g=c;m<g.length;m++)c=g[m],c.hideAllComponents()}}};d.prototype._ensureEngineResources=
function(){if(a.isNone(this._engineResources)){var e=this.view._stage.getContent(0,a.expect(this._engineLayerId)),b=[],f=new Set;this.renderObjects.forEach(function(a){a=a.material;f.has(a)||(b.push(a),f.add(a))});var d=function(a,e){var b=e.geometry,f=e.material,d=e.transform;Array.isArray(b)?b.forEach(function(e){return a.addGeometry(e,f,d)}):a.addGeometry(b,f,d)},c=new Map;this.renderObjects.forEach(function(a){var e=new K({idHint:"manipulator"});d(e,a);a=a.stateMask||0;var b=c.get(a)||[];b.push(e);
c.set(a,b)});var m=[];c.forEach(function(a,e){m.push({stateMask:e,objects:a})});this._engineResources={objectsByState:m,layer:e,materials:b}}this._addResourcesToStage();return this._engineResources};d.prototype._addResourcesToStage=function(){var e=this;if(!this._engineResourcesAddedToStage&&!a.isNone(this._engineResources)){var b=this._engineResources,f=b.objectsByState,d=b.layer;b.materials.forEach(function(b){var f=a.expect(e._materialIdReferences),d=f.get(b.id)||0;0===d&&e.view._stage.add(3,b);
f.set(b.id,d+1)});f.forEach(function(a){a.objects.forEach(function(a){d.addObject(a);e.view._stage.add(1,a)})});this._engineResourcesAddedToStage=!0}};d.prototype._removeResourcesFromStage=function(e){var b=this;void 0===e&&(e=!1);if(this._engineResourcesAddedToStage&&!a.isNone(this._engineResources)){var f=this._engineResources,d=f.layer,c=f.materials;f.objectsByState.forEach(function(a){a.objects.forEach(function(a){d.removeObject(a);b.view._stage.remove(1,a.id)})});c.forEach(function(e){var f=
a.expect(b._materialIdReferences),d=f.get(e.id);1===d?(b.view._stage.remove(3,e.id),f.delete(e.id)):f.set(e.id,d-1)});e&&this.view._stage.remove(0,d.id);this._engineResourcesAddedToStage=!1}};d.prototype._getCollisionRadius=function(a){return this._getFocusedSize(this._radius,!0)*("touch"===a?this._touchMultiplier:1)};d.prototype._getFocusedSize=function(a,e){return a*(e?this._focusMultiplier:1)};d.prototype._getWorldToScreenObjectScale=function(){return this._worldSized?1:this._screenPixelSize};
d.prototype._calculateModelTransformPosition=function(a){var e=this._getWorldToScreenObjectScale(),e=this._calculateObjectTransform(e,S);return z.vec3.set(a,e[12],e[13],e[14])};d.prototype._calculateModelTransformOffset=function(a){var e=this._calculateModelTransformPosition(a);return z.vec3.subtract(a,e,this._position)};d.prototype._calculateObjectTransform=function(a,e){B.mat4.set(e,a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1);B.mat4.multiply(e,e,this._modelTransform);e[12]+=this._position[0];e[13]+=this._position[1];
e[14]+=this._position[2];e[15]=1;return e};l([k.property({constructOnly:!0,nonNullable:!0})],d.prototype,"view",void 0);l([k.property({value:"none",nonNullable:!0})],d.prototype,"alignment",null);l([k.property()],d.prototype,"hideOnGrab",void 0);l([k.property()],d.prototype,"moveOnDrag",void 0);l([k.property()],d.prototype,"snapToPointer",void 0);l([k.property()],d.prototype,"collisionType",void 0);l([k.property({type:h.Integer})],d.prototype,"collisionPriority",void 0);l([k.property({constructOnly:!0})],
d.prototype,"renderObjects",void 0);l([k.property()],d.prototype,"autoScaleRenderObjects",void 0);l([k.property({value:!0})],d.prototype,"visible",null);l([k.property()],d.prototype,"radius",null);l([k.property()],d.prototype,"worldSized",null);l([k.property()],d.prototype,"focusMultiplier",null);l([k.property()],d.prototype,"touchMultiplier",null);l([k.property()],d.prototype,"interactive",void 0);l([k.property()],d.prototype,"selectable",void 0);l([k.property()],d.prototype,"cursor",void 0);l([k.property({value:!1})],
d.prototype,"grabbing",null);l([k.property()],d.prototype,"dragging",void 0);l([k.property({value:!1})],d.prototype,"hovering",null);l([k.property({value:!1})],d.prototype,"selected",null);l([k.property({value:0})],d.prototype,"state",null);l([k.property({dependsOn:["hovering","grabbing"]})],d.prototype,"focused",null);return d=l([k.subclass("esri.views.interactive.Manipulator3D")],d)}(k.declared(n));b.Manipulator3D=y;var I={include:new Set};I.include.add(D.TERRAIN_ID);var J=g.createScreenPointArray(),
N=g.createRenderScreenPointArray3(),O=A.lineSegment.create(),E=A.ray.create(),Q=d.mat3f64.create(),S=p.mat4f64.create(),R=p.mat4f64.create(),L=A.plane.create(),U=v.vec3f64.create(),V=v.vec3f64.create(),T=v.vec3f64.create(),W=v.vec3f64.create(),X=v.vec3f64.create(),Z=v.vec3f64.create(),Y=v.vec3f64.create()})},"esri/views/3d/interactive/editingTools/manipulatorDragUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../geometry ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../core/accessorSupport/utils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../geometry/support/webMercatorUtils ../../../../support/elevationInfoUtils ../../support/geometryUtils ../../support/geometryUtils ../../support/projectionUtils ../../support/stack ../../../draw/support/drawUtils".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q){function z(a,e){var b=null;return a.events.on("drag",function(f){var d={action:f.action,screenStart:f.start,screenEnd:f.screenPoint};"start"===f.action&&c.isNone(b)&&(b=new G,e(a,b,d));c.isSome(b)&&b.execute(d);"end"===f.action&&c.isSome(b)&&(b=null)})}function v(a,e){var b=k.vec3f64.create(),f=k.vec3f64.create(),d=!1;return function(c){if("start"===c.action){var m=x.screenPointObjectToArray(c.screenStart,x.castScreenPointArray(C.sv2d.get())),m=B.ray.fromScreen(a.state.camera,
m,I);d=B.plane.intersectRay(e,m,b)}if(!d)return null;m=x.screenPointObjectToArray(c.screenEnd,x.castScreenPointArray(C.sv2d.get()));m=B.ray.fromScreen(a.state.camera,m,I);return B.plane.intersectRay(e,m,f)?l({},c,{renderStart:b,renderEnd:f,plane:e}):null}}function e(a,e,b,f){void 0===f&&(f=null);var d=null;return function(m){if("start"===m.action&&(d=a.sceneIntersectionHelper.intersectElevationFromScreen(x.createScreenPointArray(m.screenStart.x,m.screenStart.y),e,b),c.isSome(d)&&c.isSome(f)&&!p.pointToPoint(d,
d,f))||c.isNone(d))return null;var g=a.sceneIntersectionHelper.intersectElevationFromScreen(x.createScreenPointArray(m.screenEnd.x,m.screenEnd.y),e,b);return c.isSome(g)?c.isSome(f)&&!p.pointToPoint(g,g,f)?null:l({},m,{mapStart:d,mapEnd:g}):null}}function f(a,b,f,d){void 0===d&&(d=null);b=r.getGraphicEffectiveElevationInfo(b);f=F(a,f,b);return e(a,b,f,d)}function F(a,e,b){if(!e.hasZ)return 0;switch(b.mode){case "absolute-height":return e.z;case "on-the-ground":return 0;case "relative-to-ground":return a=
(a.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground")||0)+b.offset,e.z-a;case "relative-to-scene":return a=(a.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene")||0)+b.offset,e.z-a}}function A(a,e){var b=K,f=M,d=B.plane.create();a.renderCoordsHelper.worldUpAtPosition(e,b);a=g.vec3.cross(d,b,g.vec3.subtract(f,e,a.state.camera.eye));g.vec3.cross(a,a,b);return B.plane.fromPositionAndNormal(e,a,d)}function H(a,e){var b=null,f=c.isSome(a[e])?a[e].spatialReference:
null;return function(d){if("start"===d.action&&c.isSome(a[e])){var m=a[e],g=d.mapStart.spatialReference;b=c.isNone(m)||"mesh"===m.type?null:m.spatialReference.equals(g)?m.clone():h.canProject(m,g)?h.project(m,g):null}if(c.isNone(b))return null;var m=d.mapEnd.x-d.mapStart.x,g=d.mapEnd.y-d.mapStart.y,u=d.mapEnd.z-d.mapStart.z,v=q.move(b.clone(),m,g,u);v.spatialReference.equals(f)?a[e]=v:a[e]=h.project(v,f);return l({},d,{translationX:m,translationY:g,translationZ:u})}}function u(a){return H(a,"geometry")}
function m(a,e){var b=k.vec3f64.create(),f=g.vec3.length(e);a.renderCoordsHelper.worldUpAtPosition(e,b);var m=k.vec3f64.create(),c=k.vec3f64.create(),u=function(m){g.vec3.subtract(m,m,e);d.vector.projectPoint(b,m,m);"global"===a.viewingMode&&g.vec3.length(m)*n.sign(g.vec3.dot(b,m))<-f+.001&&g.vec3.subtract(m,g.vec3.scale(m,b,.001),e);g.vec3.add(m,m,e);return m};return function(a){a.renderStart=u(g.vec3.copy(m,a.renderStart));a.renderEnd=u(g.vec3.copy(c,a.renderEnd));return a}}function D(a,e){var b=
a.renderCoordsHelper;return function(a){var f=b.fromRenderCoords(a.renderStart,new t.Point,e),d=b.fromRenderCoords(a.renderEnd,new t.Point,e);return c.isSome(f)&&c.isSome(d)?l({},a,{mapStart:f,mapEnd:d}):null}}Object.defineProperty(b,"__esModule",{value:!0});b.createManipulatorDragEventPipeline=z;b.createManipulatorDragEventPipelineMany=function(e,b){for(var f=[],d=0;d<e.length;d++)f.push(z(e[d],b));return a.handlesGroup(f)};b.createManipulatorDragEventPipelineManyOneOf=function(e,b){for(var f=[],
d=null,m=function(a,e,f){c.isNone(d)&&(d=a,b(a,e.next(function(a){"end"===a.action&&(d=null);return a}),f))},g=0;g<e.length;g++)f.push(z(e[g],m));return a.handlesGroup(f)};b.screenToRenderPlane=v;b.screenToMapXY=e;b.screenToMapXYForGraphicAtLocation=f;b.screenToMapXYForGraphic=function(a,e,b,d){a=e.toMap(a.screenStart,{include:[b]});return c.isSome(a)?f(e,b,a,d):null};b.screenToZConstrained=function(a,e,b){var f=null,d=new G;d.next(v(a,A(a,e))).next(m(a,e)).next(D(a,b)).next(function(a){a.mapEnd.x=
a.mapStart.x;a.mapEnd.y=a.mapStart.y;f=a});return function(a){f=null;d.execute(a);return f}};b.constrainToMapAxis=function(a,e){var b=[a.x,a.y,a.z],f=[Math.cos(e),Math.sin(e)];a=Math.sqrt(f[0]*f[0]+f[1]*f[1]);if(0===a)return null;f[0]/=a;f[1]/=a;var d=function(a){var e=(a.x-b[0])*f[0]+(a.y-b[1])*f[1];a.x=b[0]+e*f[0];a.y=b[1]+e*f[1]};return function(a){d(a.mapStart);d(a.mapEnd);return a}};b.dragGeometry=H;b.dragGraphic=u;b.dragGraphicMany=function(a){var e=a.map(function(a){return c.unwrap(u(a))}).filter(function(a){return c.isSome(a)});
return function(a){var b=a.mapEnd.x-a.mapStart.x,f=a.mapEnd.y-a.mapStart.y,d=a.mapEnd.z-a.mapStart.z;e.forEach(function(e){return e(a)});return l({},a,{translationX:b,translationY:f,translationZ:d})}};b.horizontalDegreesOfFreedom=3;b.verticalDegreesOfFreedom=4;b.allDegreesOfFreedom=7;b.addMapDelta=function(a){void 0===a&&(a=b.allDegreesOfFreedom);var e=0,f=0,d=0;return function(b){"start"===b.action&&(e=b.mapStart.x,f=b.mapStart.y,d=b.mapStart.z);var m=a&1?b.mapEnd.x-e:0,c=a&2?b.mapEnd.y-f:0,g=a&
4?b.mapEnd.z-d:0;e=b.mapEnd.x;f=b.mapEnd.y;d=b.mapEnd.z;return l({},b,{mapDeltaX:m,mapDeltaY:c,mapDeltaZ:g,mapDeltaSpatialReference:b.mapStart.spatialReference})}};b.addScreenDelta=function(a){void 0===a&&(a=b.allDegreesOfFreedom);var e=0,f=0;return function(b){"start"===b.action&&(e=b.screenStart.x,f=b.screenStart.y);var d=a&1?b.screenEnd.x-e:0,m=a&2?b.screenEnd.y-f:0;e=b.screenEnd.x;f=b.screenEnd.y;return l({},b,{screenDeltaX:d,screenDeltaY:m})}};b.projectToWorldUp=m;b.convertToMapCoordinates=D;
var G=function(){function a(){this.execute=function(){}}a.prototype.next=function(e){var b=new a;c.isSome(e)&&(this.execute=function(a){a=e(a);c.isSome(a)&&b.execute(a)});return b};return a}();b.EventPipeline=G;var K=k.vec3f64.create(),M=k.vec3f64.create(),I=B.ray.create()})},"esri/support/elevationInfoUtils":function(){define(["require","exports","../core/maybe","../symbols/support/unitConversionUtils"],function(y,b,l,w){function t(b,a){var c=l.isSome(b)?b.hasZ:!1;return l.isNone(a)?c?"absolute-height":
"on-the-ground":"relative-to-ground"!==a.mode||!l.isNone(a.offset)&&0!==a.offset||!l.isSome(b)||"point"!==b.type||c&&0!==b.z?a.mode:"on-the-ground"}function n(b){var a=c(b);return t(b.geometry,a)}function c(b){return b.layer&&"elevationInfo"in b.layer?b.layer.elevationInfo:null}Object.defineProperty(b,"__esModule",{value:!0});b.getGeometryEffectiveElevationMode=t;b.getGraphicEffectiveElevationMode=n;b.getGraphicEffectiveElevationInfo=function(b){var a=c(b);b=t(b.geometry,a);var g=l.isSome(a)&&"on-the-ground"!==
b?a.offset*w.getMetersPerUnit(a.unit):0,a=l.isSome(a)&&"on-the-ground"!==b?a.featureExpressionInfo:null;return{mode:b,offset:g,featureExpressionInfo:a}};b.hasGraphicFeatureExpressionInfo=function(b){if("on-the-ground"===n(b))return!1;b=c(b);b=l.isSome(b)&&b.featureExpressionInfo?b.featureExpressionInfo.expression:null;return!(!b||"0"===b)}})},"esri/views/draw/support/drawUtils":function(){define(["require","exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils",
"../../../geometry/support/coordsUtils"],function(y,b,l,w,t){function n(a,b,k,h){null==h||a.hasZ||(h=void 0);if("point"===a.type)return a.x+=b,a.y+=k,a.hasZ&&null!=h&&(a.z+=h),a;if("multipoint"===a.type){for(var g=a.points,d=0;d<g.length;d++)g[d]=c(g[d],b,k,h);return a}if("extent"===a.type)return a.xmin+=b,a.xmax+=b,a.ymin+=k,a.ymax+=k,null!=h&&(a.zmin+=h,a.zmax+=h),a;for(var g=t.geometryToCoordinates(a),x="polyline"===a.type?a.paths:a.rings,p=0;p<g.length;p++)for(var n=g[p],d=0;d<n.length;d++)n[d]=
c(n[d],b,k,h);"paths"in a?a.paths=x:a.rings=x;return a}function c(a,b,c,h){return x(a,a[0]+b,a[1]+c,null!=a[2]&&null!=h?a[2]+h:void 0)}function x(a,b,c,h){b=[b,c];2<a.length&&b.push(null!=h?h:a[2]);3<a.length&&b.push(a[3]);return b}Object.defineProperty(b,"__esModule",{value:!0});b.move=n;b.cloneMove=function(a,b,c,h,r){a=a.clone();var d=h.resolution;if("point"===a.type){if(r)n(a,b*d,-c*d);else{r=h.state.transform;h=h.state.inverseTransform;var g=r[0]*a.x+r[2]*a.y+r[4],p=r[1]*a.x+r[3]*a.y+r[5];a.x=
h[0]*(g+b)+h[2]*(p+c)+h[4];a.y=h[1]*(g+b)+h[3]*(p+c)+h[5]}return a}if("multipoint"===a.type){if(r)n(a,b*d,-c*d);else{d=a.points;r=h.state.transform;h=h.state.inverseTransform;for(var k=0;k<d.length;k++){var q=d[k],p=r[0]*q[0]+r[2]*q[1]+r[4],z=r[1]*q[0]+r[3]*q[1]+r[5],g=h[0]*(p+b)+h[2]*(z+c)+h[4],p=h[1]*(p+b)+h[3]*(z+c)+h[5];d[k]=x(q,g,p,void 0)}}return a}if("extent"===a.type){if(r)n(a,b*d,-c*d);else{r=h.state.transform;h=h.state.inverseTransform;var d=r[0]*a.xmin+r[2]*a.ymin+r[4],v=r[1]*a.xmin+r[3]*
a.ymin+r[5],g=r[0]*a.xmax+r[2]*a.ymax+r[4];r=r[1]*a.xmax+r[3]*a.ymax+r[5];a.xmin=h[0]*(d+b)+h[2]*(v+c)+h[4];a.ymin=h[1]*(d+b)+h[3]*(v+c)+h[5];a.xmax=h[0]*(g+b)+h[2]*(r+c)+h[4];a.ymax=h[1]*(g+b)+h[3]*(r+c)+h[5]}return a}if(r)n(a,b*d,-c*d);else{v=t.geometryToCoordinates(a);d="polyline"===a.type?a.paths:a.rings;r=h.state.transform;h=h.state.inverseTransform;for(var e=0;e<v.length;e++)for(var f=v[e],k=0;k<f.length;k++)q=f[k],p=r[0]*q[0]+r[2]*q[1]+r[4],z=r[1]*q[0]+r[3]*q[1]+r[5],g=h[0]*(p+b)+h[2]*(z+c)+
h[4],p=h[1]*(p+b)+h[3]*(z+c)+h[5],f[k]=x(q,g,p,void 0);"paths"in a?a.paths=d:a.rings=d}return a};b.scale=function(a,b,c,h){if("point"===a.type){var g=a.x,d=a.y,k=h?h[0]:g;h=h?h[1]:d;a=a.clone();a.x=(g-k)*b+k;a.y=(d-h)*c+h;return a}if("multipoint"===a.type){var d=t.geometryToCoordinates(a),k=l.create(),p=w.getRingsOrPathsBounds(k,[d]),k=p[0],d=p[1],g=p[2],p=p[3],k=h?h[0]:(k+g)/2,p=h?h[1]:(p+d)/2,n=a.clone(),q=n.points;for(a=0;a<q.length;a++)h=q[a],g=h[0],d=h[1],g=(g-k)*b+k,d=(d-p)*c+p,q[a]=x(h,g,d,
void 0);return n}if("extent"===a.type)return d=a.xmin,k=a.xmax,g=a.ymin,p=a.ymax,n=h?h[0]:(d+k)/2,h=h?h[1]:(p+g)/2,a=a.clone(),a.xmin=(d-n)*b+n,a.ymax=(p-h)*c+h,a.xmax=(k-n)*b+n,a.ymin=(g-h)*c+h,a.xmin>a.xmax&&(b=a.xmin,a.xmin=a.xmax,a.xmax=b),a.ymin>a.ymax&&(b=a.ymin,a.ymin=a.ymax,a.ymax=b),a;for(var k=t.geometryToCoordinates(a),d=l.create(),n=w.getRingsOrPathsBounds(d,k),g=n[0],d=n[1],p=n[2],n=n[3],p=h?h[0]:(g+p)/2,n=h?h[1]:(n+d)/2,q=a.clone(),z="polyline"===q.type?q.paths:q.rings,v=0;v<k.length;v++){var e=
k[v];for(a=0;a<e.length;a++)h=e[a],g=h[0],d=h[1],g=(g-p)*b+p,d=(d-n)*c+n,z[v][a]=x(h,g,d,void 0)}"paths"in q?q.paths=z:q.rings=z;return q};b.getScaleRatio=function(a,b,c,h,n,d){return Math.sqrt((n-a)*(n-a)+(d-b)*(d-b))/Math.sqrt((c-a)*(c-a)+(h-b)*(h-b))};b.getRotationAngle=function(a,b,c,h,n,d){return 180*Math.atan2(b-d,a-n)/Math.PI-180*Math.atan2(b-h,a-c)/Math.PI}})},"esri/views/3d/interactive/editingTools/manipulatorUtils":function(){define("require exports ../../../../core/maybe ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4f64 ../../../../support/elevationInfoUtils ../Manipulator3D ../manipulatorUtils ../dragUtils/dragAtLocation ../dragUtils/projectScreenToMap ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/materials/RibbonLineMaterial ../../../interactive/GraphicManipulator ../../../interactive/dragUtils/screenDragToMap".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q){function z(a,e){return"on-the-ground"===e.mode||l.isNone(a.geometry)||!a.geometry.hasZ?!1:!0}Object.defineProperty(b,"__esModule",{value:!0});b.createGraphicMoveXYManipulator=function(a,e){return new C.GraphicManipulator({graphic:e,view:a,selectable:!0,cursor:"move"})};b.createGraphicMoveXYScreenDragToMap=function(a,e,b){return q.createXYConstrainedFromProject(h.createForGraphic(a,e.graphic,b.start),l.expect(e.graphic.geometry).spatialReference)};b.canMoveZ=
z;b.createGraphicMoveZManipulator=function(b){var e=b.graphic,f=b.view,v=x.getGraphicEffectiveElevationInfo(e);if(!z(e,v))return null;var q=[n.vec3f64.fromValues(0,0,0),n.vec3f64.fromValues(0,0,90)],q=new r(d.createPolylineGeometry(q),"move-z"),h=d.createConeGeometry(20,5,16,!1),h=new r(h),u=[n.vec3f64.fromValues(0,0,0),n.vec3f64.fromValues(0,0,110)],m=t.mat4f64.create();w.mat4.translate(m,m,[0,0,90]);w.mat4.rotateX(m,m,Math.PI/2);var k=t.mat4f64.create();w.mat4.translate(k,k,[0,0,90]);w.mat4.rotateX(k,
k,Math.PI/2);w.mat4.scale(k,k,[1.2,1.2,1]);var G=n.vec3f64.fromValues(0,.5,.9),K=c.vec4f64.fromValues(G[0],G[1],G[2],1);return new a.Manipulator3D({view:f,renderObjects:[{geometry:q,material:function(){var a=new B({color:K},"move-z");a.renderOccluded=4;return a}(),stateMask:1},{geometry:h,transform:m,material:g.createManipulatorMaterial(G,1),stateMask:1},{geometry:q,material:function(a){a=new p({color:K,width:a},"move-z");a.renderOccluded=4;return a}(2),stateMask:2},{geometry:h,transform:k,material:g.createManipulatorMaterial(G,
1),stateMask:2}],collisionType:{type:"line",paths:[u]},autoScaleRenderObjects:!1,worldSized:!1,radius:4,selectable:!1,cursor:"ns-resize",elevationInfo:v,worldOriented:null!=b.worldOriented?b.worldOriented:!0,visible:!!e.visible})};b.createGraphicMoveZScreenDragToMap=function(a,e){var b=q.createZConstrainedFromProject(h.createCameraAlignedWorldUp(a,e.elevationAlignedLocation),e.location.spatialReference);return k.dragAtLocation(a,b,e.elevationAlignedLocation)}})},"esri/views/3d/interactive/dragUtils/dragAtLocation":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils".split(" "),
function(y,b,l,w,t,n){Object.defineProperty(b,"__esModule",{value:!0});b.dragAtLocation=function(b,x,a){if(t.isNone(x))return null;var c=null,k=0,h=0;return function(g){"start"===g.action&&(c=b.toScreen(a),0>c.x||c.x>b.width||0>c.y||c.y>b.height?c=null:(k=g.start.x-c.x,h=g.start.y-c.y));if(null==c)return null;var d=w.clamp(g.screenPoint.x-k,0,b.width),B=w.clamp(g.screenPoint.y-h,0,b.height),d=n.createScreenPoint(d,B);return x(l({},g,{start:c,screenPoint:d}))}}})},"esri/views/3d/interactive/dragUtils/projectScreenToMap":function(){define("require exports ../../../../geometry ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../layers/graphics/dehydratedFeatures ../../../../support/elevationInfoUtils ../../support/geometryUtils ../../support/projectionUtils ../../support/geometryUtils/plane ../../support/geometryUtils/ray".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d){function B(a,b,d){return function(e,f){e=a.sceneIntersectionHelper.intersectElevationFromScreen(n.createScreenPointArray(e.x,e.y),b,d);return t.isSome(e)&&h.pointToPoint(e,e,f)?e:null}}function p(a){return function(b,d){return(b=a.toMap(b))&&h.pointToPoint(b,b,d)?b:null}}Object.defineProperty(b,"__esModule",{value:!0});b.createForGraphic=function(a,b,d){var e=g.getGraphicEffectiveElevationInfo(b);switch(e.mode){case "on-the-ground":return p(a);case "absolute-height":case "relative-to-ground":case "relative-to-scene":return b=
a.toMap(d,{include:[b]}),B(a,e,b.z);default:return null}};b.createForGraphicAtLocation=function(a,b,d){b=g.getGraphicEffectiveElevationInfo(b);h.pointToPoint(d,C,a.spatialReference);switch(b.mode){case "on-the-ground":return p(a);case "absolute-height":case "relative-to-ground":case "relative-to-scene":return B(a,b,C.z);default:return null}};b.createScreenToElevationSurface=B;b.createOnTheGround=p;b.createCameraAlignedWorldUp=function(a,b){var g=x.vec3f64.create();if(!a.renderCoordsHelper.toRenderCoords(b,
g))return null;var e=c.vec3.length(g),f=x.vec3f64.create();a.renderCoordsHelper.worldUpAtPosition(g,f);var h=r.create(),q=n.createScreenPointArray(),p=x.vec3f64.create(),u=d.create();return function(b,v){var m=a.state.camera,D=c.vec3.cross(h,f,c.vec3.subtract(p,g,m.eye));c.vec3.cross(D,D,f);r.fromPositionAndNormal(g,D,h);d.fromScreenAtEye(m,n.screenPointObjectToArray(b,q),u);if(!r.intersectRay(h,u,p))return null;c.vec3.subtract(p,p,g);k.vector.projectPoint(f,p,p);"global"===a.viewingMode&&c.vec3.length(p)*
w.sign(c.vec3.dot(f,p))<-e+.001&&c.vec3.subtract(p,c.vec3.scale(p,f,.001),g);c.vec3.add(p,p,g);return a.renderCoordsHelper.fromRenderCoords(p,new l.Point,v)}};var C=a.makeDehydratedPoint(0,0,null,null)})},"esri/views/interactive/GraphicManipulator":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/assignHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ../../geometry/support/webMercatorUtils ../../support/elevationInfoUtils ../../symbols/support/defaults ../../symbols/support/ElevationInfo ../../views/support/drapedUtils".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z){Object.defineProperty(b,"__esModule",{value:!0});var v=x.getLogger("esri.views.interactive.GraphicManipulator");y=function(b){function d(a){a=b.call(this,a)||this;a.layer=null;a.interactive=!0;a.selectable=!1;a.dragging=!1;a.cursor=null;a.events=new c({target:a});a._circleCollisionCache=null;a._originalSymbol=null;return a}w(d,b);Object.defineProperty(d.prototype,"graphic",{set:function(b){"mesh"===a.get(b.geometry,"type")?v.error("Mesh geometries are not supported"):
(this._circleCollisionCache=null,this._originalSymbol=b.symbol,this._set("graphic",b))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"elevationInfo",{get:function(){var a="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,b=p.getGraphicEffectiveElevationMode(this.graphic);return new q({mode:b,offset:a?a.offset:0})},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"focusedSymbol",{set:function(a){a!==this._get("focusedSymbol")&&(this._set("focusedSymbol",
a),this._updateGraphicSymbol(),this._circleCollisionCache=null)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"grabbing",{set:function(a){if(a!==this._get("grabbing")){var b=this._focused;this._set("grabbing",a);this._updateGraphicSymbol(b)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hovering",{set:function(a){if(a!==this._get("hovering")){var b=this._focused;this._set("hovering",a);this._updateGraphicSymbol(b)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"selected",{set:function(a){a!==this._get("selected")&&(this._set("selected",a),this._updateGraphicSymbol())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_focused",{get:function(){return this._get("hovering")||this._get("grabbing")},enumerable:!0,configurable:!0});d.prototype.destroy=function(){this._resetGraphicSymbol();this._set("view",null)};d.prototype.intersectionDistance=function(b){var e=this._get("graphic");if(!1===e.visible)return null;var d=this._get("focusedSymbol"),
d=a.isSome(d)?d:e.symbol,f=e.geometry;if(a.isNone(f))return null;var c=this._get("view");return"2d"===c.type?this._intersectDistance2D(b,c,f,d):this._intersectDistance3D(b,c,e)};d.prototype.attach=function(){a.isNone(this.layer)||this.layer.add(this.graphic)};d.prototype.detach=function(){this._resetGraphicSymbol();a.isNone(this.layer)||this.layer.remove(this.graphic)};d.prototype._updateGraphicSymbol=function(b){void 0===b&&(b=this._focused);b!==this._focused&&(b=this.graphic.symbol,b!==this._originalSymbol&&
b!==this.focusedSymbol&&(this._originalSymbol=b));this.graphic.symbol=this._focused&&a.isSome(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol};d.prototype._resetGraphicSymbol=function(){this.graphic.symbol=this._originalSymbol};d.prototype._intersectDistance2D=function(b,e,d,c){c=c||C.getDefaultSymbol2D(d);if(a.isNone(c))return null;var m=this._circleCollisionCache;if("point"!==d.type||"simple-marker"!==c.type)return m=z.intersectsDrapedGeometry(b,d,e),a.isSome(m)?1:null;if(a.isNone(m)||
!m.originalPoint.equals(d)){var u=e.spatialReference;B.canProject(d,u)&&(m=B.project(d,u),this._circleCollisionCache=m={originalPoint:d.clone(),mapPoint:m,radiusPx:g.pt2px(c.size)})}return a.isSome(m)?(b=g.screenPointObjectToArray(b,f),e=e.state.toScreen(F,m.mapPoint.x,m.mapPoint.y),m=m.radiusPx,h.vec2.squaredDistance(b,e)<m*m?1:null):null};d.prototype._intersectDistance3D=function(a,b,d){a=b.toMap(a,{include:[d]});if(!a)return null;d=e;return b.renderCoordsHelper.toRenderCoords(a,d)?r.vec3.distance(d,
b.state.camera.eye):null};l([k.property({constructOnly:!0,nonNullable:!0})],d.prototype,"graphic",null);l([k.property({readOnly:!0,dependsOn:["graphic"]})],d.prototype,"elevationInfo",null);l([k.property({constructOnly:!0,nonNullable:!0})],d.prototype,"view",void 0);l([k.property({value:null})],d.prototype,"focusedSymbol",null);l([k.property({constructOnly:!0})],d.prototype,"layer",void 0);l([k.property()],d.prototype,"interactive",void 0);l([k.property()],d.prototype,"selectable",void 0);l([k.property({value:!1})],
d.prototype,"grabbing",null);l([k.property()],d.prototype,"dragging",void 0);l([k.property()],d.prototype,"hovering",null);l([k.property({value:!1})],d.prototype,"selected",null);l([k.property()],d.prototype,"cursor",void 0);return d=l([k.subclass("esri.views.interactive.GraphicManipulator")],d)}(k.declared(n));b.GraphicManipulator=y;var e=d.vec3f64.create(),f=g.createScreenPointArray(),F=g.createScreenPointArray()})},"esri/views/support/drapedUtils":function(){define("require exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils".split(" "),
function(y,b,l,w,t,n){function c(a,b,c,h){void 0===h&&(h=new l.Extent);var g;if("2d"===c.type)g=b*c.resolution;else if("3d"===c.type){var d=c.basemapTerrain,k=d.overlayManager,k=k?k.overlayPixelSizeInMapUnits(a):1;g=d&&!d.spatialReference.equals(c.spatialReference)?t.getMetersPerUnitForSR(d.spatialReference)/t.getMetersPerUnitForSR(c.spatialReference):b*k}b=a.x-g;d=a.y-g;k=a.x+g;a=a.y+g;c=c.spatialReference;h.xmin=Math.min(b,k);h.ymin=Math.min(d,a);h.xmax=Math.max(b,k);h.ymax=Math.max(d,a);h.spatialReference=
c;return h}Object.defineProperty(b,"__esModule",{value:!0});b.createQueryGeometry=c;b.intersectsDrapedGeometry=function(a,b,k){a=k.toMap(a);if(w.isNone(a))return null;var g=n.calculateTolerance();return c(a,g,k,x).intersects(b)?a:null};var x=new l.Extent})},"esri/renderers/support/clickToleranceUtils":function(){define(["require","exports"],function(y,b){function l(b,c){return c&&c.xoffset?Math.max(b,Math.abs(c.xoffset)):c&&c.yoffset?Math.max(b,Math.abs(c.yoffset)):b}function w(b,c){if("number"===
typeof b)return b;if(b&&b.stops&&b.stops.length){b=b.stops;for(var n=c=0,a=0;a<b.length;a++){var g=b[a].size;"number"===typeof g&&(c+=g,n++)}return c/n}return c}function t(b,c){if(!c)return b;c=c.filter(function(a){return"size"===a.type}).map(function(a){var c=a.minSize;return(w(a.maxSize,b)+w(c,b))/2});var n=0,a=c.length;if(0===a)return b;for(var g=0;g<a;g++)n+=c[g];return Math.max(Math.floor(n/a),b)}Object.defineProperty(b,"__esModule",{value:!0});b.calculateTolerance=function(b){if(!b)return 6;
var c="visualVariables"in b?t(6,b.visualVariables):6;if("simple"===b.type)return l(c,b.symbol);if("unique-value"===b.type){var n=c;b.uniqueValueInfos.forEach(function(a){n=l(n,a.symbol)});return n}if("class-breaks"===b.type){var a=c;b.classBreakInfos.forEach(function(b){a=l(a,b.symbol)});return a}return c}})},"esri/views/interactive/dragUtils/screenDragToMap":function(){define(["require","exports","../../../core/tsSupport/assignHelper","../../../core/maybe"],function(y,b,l,w){function t(b,c,x){if(w.isNone(b))return null;
var a=null,g=0,k=0,h=0;return function(n){"start"===n.action&&(a=b(n.start,x),h=k=g=0);var d=g,l=k,p=h,r=b(n.screenPoint,x);w.isSome(a)&&w.isSome(r)&&(d=c&1?r.x-a.x:0,l=c&2?r.y-a.y:0,p=c&4?r.z-a.z:0);n={action:n.action,deltaX:d,deltaY:l,deltaZ:p,spatialReference:x};g=d;k=l;h=p;return n}}Object.defineProperty(b,"__esModule",{value:!0});b.createFromProject=t;b.createMapAxisConstrainedScreenToMapDrag=function(b,c,x){if(w.isNone(b))return null;var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);if(0===a)return null;
var g=c[0]/a,k=c[1]/a,h=c[2]/a,n=null,d=0,l=0,p=0;return function(a){"start"===a.action&&(n=b(a.start,x),p=l=d=0);var c=d,z=l,v=p,e=b(a.screenPoint,x);w.isSome(n)&&w.isSome(e)&&(c=e.x-n.x,z=e.y-n.y,v=e.z-n.z,v=c*g+z*k+v*h,c=v*g,z=v*k,v*=h);a={action:a.action,deltaX:c,deltaY:z,deltaZ:v,previousDeltaX:d,previousDeltaY:l,previousDeltaZ:p,spatialReference:x};d=c;l=z;p=v;return a}};b.createXYConstrainedFromProject=function(n,c){return t(n,b.horizontalDegreesOfFreedom,c)};b.createZConstrainedFromProject=
function(n,c){return t(n,b.verticalDegreesOfFreedom,c)};b.withHistoryInfo=function(b){if(w.isNone(b))return b;var c=0,n=0,a=0;return function(g){var k=b(g);if(w.isNone(k))return null;"start"===g.action&&(a=n=c=0);g=l({},k,{deltaDeltaX:k.deltaX-c,deltaDeltaY:k.deltaY-n,deltaDeltaZ:k.deltaZ-a});c=k.deltaX;n=k.deltaY;a=k.deltaZ;return g}};b.withScreenHistoryInfo=function(b){if(w.isNone(b))return b;var c=0,n=0;return function(a){var g=b(a);if(w.isNone(g))return null;"start"===a.action&&(c=a.start.x,n=
a.start.y);g=l({},g,{screenDeltaDeltaX:a.screenPoint.x-c,screenDeltaDeltaY:a.screenPoint.y-n});c=a.screenPoint.x;n=a.screenPoint.y;return g}};b.horizontalDegreesOfFreedom=3;b.verticalDegreesOfFreedom=4})},"esri/views/3d/interactive/editingTools/graphicMove3D/isSupportedGraphic":function(){define(["require","exports","../../../../../core/compilerUtils","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(y,b,l,w,t){Object.defineProperty(b,"__esModule",{value:!0});b.isSupportedGraphic=
function(b){if("graphics"!==b.layer.type)return 1;if(w.isNone(b.geometry))return 2;var c=b.geometry.type;switch(c){case "polygon":case "point":case "polyline":break;case "multipoint":case "extent":case "mesh":return 3;default:return l.neverReached(c),3}return"on-the-ground"!==t.getGraphicEffectiveElevationMode(b)&&t.hasGraphicFeatureExpressionInfo(b)?4:0}})},"esri/views/interactive/InteractiveToolBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/has ../../core/promiseUtils ../../core/scheduling ../../core/accessorSupport/decorators ./interactiveToolUtils ./ManipulatorCollection".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h){Object.defineProperty(b,"__esModule",{value:!0});y=function(b){function d(a){a=b.call(this,a)||this;a.attached=!1;a.created=!1;a.completed=!1;a.manipulators=new h.ManipulatorCollection;a.deferCreation=!1;a._editableFlags=[];a._manipulatorHandles=new n;a._creationResolver=x.createResolver();return a}l(d,b);Object.defineProperty(d.prototype,"active",{get:function(){return null!=this.view&&this.view.activeTool===this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"isSupported",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{set:function(a){this._set("visible",a);a||k.setActive(this,!1);this.attached&&(a?this._show():this._hide())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"editable",{get:function(){return this.hasEditableFlag(0)},set:function(a){this.setEditableFlag(0,a)},enumerable:!0,configurable:!0});d.prototype.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();
this.onAttach();if(this.visible)this.onShow();this._set("attached",!0)}};d.prototype.detach=function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._manipulatorHandles.removeAll(),this._set("attached",!1))};d.prototype.handleInputEvent=function(a){if(this.attached)this.onInputEvent(a)};d.prototype.destroy=function(){this.manipulators.destroy();this._manipulatorHandles&&(this._manipulatorHandles.destroy(),this._manipulatorHandles=null);this._set("view",null)};d.prototype.setEditableFlag=
function(a,b){this._editableFlags[a]=b;this.manipulators.isToolEditable=this._editableFlags.every(function(a){return null==a||a});this._updateManipulatorAttachment();0===a&&this.notifyChange("editable");this.onEditableChange()};d.prototype.hasEditableFlag=function(a){a=this._editableFlags[a];return null==a?!0:a};d.prototype.when=function(){return this._creationResolver.promise};d.prototype.rejectCreation=function(a){this._creationResolver.reject(a)};d.prototype.initialize=function(){this.deferCreation||
this.complete()};d.prototype.onAttach=function(){};d.prototype.onDetach=function(){};d.prototype.onShow=function(){};d.prototype.onHide=function(){};d.prototype.onEditableChange=function(){};d.prototype.onInputEvent=function(a){};Object.defineProperty(d.prototype,"internallyEditable",{get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)},enumerable:!0,configurable:!0});d.prototype.create=function(){var b=this;this.created||(this._set("created",!0),c("esri-native-promise")?this._creationResolver(this):
a.schedule(function(){return b._creationResolver(b)}))};d.prototype.complete=function(){this.create();this._set("completed",!0)};d.prototype._show=function(){this._updateManipulatorAttachment();this.onShow()};d.prototype._hide=function(){this._updateManipulatorAttachment();this.onHide()};d.prototype._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};w([g.property({constructOnly:!0})],d.prototype,"view",void 0);w([g.property({dependsOn:["view.activeTool"],
readOnly:!0})],d.prototype,"active",null);w([g.property({value:!0})],d.prototype,"visible",null);w([g.property({value:!0})],d.prototype,"editable",null);w([g.property({readOnly:!0})],d.prototype,"attached",void 0);w([g.property({readOnly:!0})],d.prototype,"created",void 0);w([g.property({readOnly:!0})],d.prototype,"completed",void 0);w([g.property({readOnly:!0})],d.prototype,"manipulators",void 0);w([g.property({constructOnly:!0})],d.prototype,"deferCreation",void 0);return d=w([g.subclass("esri.views.interactive.InteractiveToolBase")],
d)}(g.declared(t));b.InteractiveToolBase=y})},"esri/views/interactive/ManipulatorCollection":function(){define(["require","exports","../../core/tsSupport/decorateHelper","../../core/Collection","../../core/maybe"],function(y,b,l,w,t){Object.defineProperty(b,"__esModule",{value:!0});y=function(){function b(){this._isToolEditable=!0;this._manipulators=new w;this._nextManipulatorId=0;this._resourceContexts={manipulator3D:{}};this._attached=!1}Object.defineProperty(b.prototype,"isToolEditable",{set:function(b){this._isToolEditable=
b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"length",{get:function(){return this._manipulators.length},enumerable:!0,configurable:!0});b.prototype.add=function(b,n){void 0===n&&(n=0);return this.addMany([b],n)[0]};b.prototype.addMany=function(b,n){var a=this;void 0===n&&(n=0);return b.map(function(b){var c=a._nextManipulatorId++;b={id:c,manipulator:b,visibilityPredicate:n,attached:!1};a._manipulators.add(b);a._attached&&a._updateManipulatorAttachment(b);return c})};b.prototype.remove=
function(b){if("number"===typeof b){for(var c=0;c<this._manipulators.length;c++)if(this._manipulators.getItemAt(c).id===b)return b=this._manipulators.splice(c,1)[0],this._detachManipulator(b),b.id;return null}for(c=0;c<this._manipulators.length;c++)if(this._manipulators.getItemAt(c).manipulator===b)return b=this._manipulators.splice(c,1)[0],this._detachManipulator(b),b.id;return null};b.prototype.removeAll=function(){var b=this;this._manipulators.forEach(function(c){b._detachManipulator(c)});this._manipulators.removeAll()};
b.prototype.attach=function(){var b=this;this._manipulators.forEach(function(c){b._updateManipulatorAttachment(c)});this._attached=!0};b.prototype.detach=function(){var b=this;this._manipulators.forEach(function(c){b._detachManipulator(c)});this._attached=!1};b.prototype.destroy=function(){this._manipulators.forEach(function(b){b=b.manipulator;b.destroy&&b.destroy()});this._manipulators.destroy();this._resourceContexts=null};b.prototype.on=function(b,n){return this._manipulators.on(b,function(a){n(a)})};
b.prototype.forEach=function(b){for(var c=0,a=this._manipulators.items;c<a.length;c++)b(a[c])};b.prototype.intersect=function(b,n){var a=null,c=Number.MAX_VALUE;this._manipulators.forEach(function(g){var h=g.id,k=g.manipulator;g.attached&&k.interactive&&(g=k.intersectionDistance(b,n),t.isSome(g)&&g<c&&(c=g,a=h))});return a};b.prototype.findById=function(b){if(t.isNone(b))return null;for(var c=0,a=this._manipulators.items;c<a.length;c++){var g=a[c];if(b===g.id)return g.manipulator}return null};b.prototype._updateManipulatorAttachment=
function(b){this._isManipulatorItemVisible(b)?this._attachManipulator(b):this._detachManipulator(b)};b.prototype._attachManipulator=function(b){b.attached||(b.manipulator.attach(this._resourceContexts),b.attached=!0)};b.prototype._detachManipulator=function(b){if(b.attached){var c=b.manipulator;c.grabbing=!1;c.dragging=!1;c.hovering=!1;c.selected=!1;c.detach(this._resourceContexts);b.attached=!1}};b.prototype._isManipulatorItemVisible=function(b){return 2===b.visibilityPredicate?!0:this._isToolEditable?
0===b.visibilityPredicate:1===b.visibilityPredicate};return b}();b.ManipulatorCollection=y})},"esri/views/3d/interactive/editingTools/graphicReshape3D/GraphicReshape3DTool":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ./isSupportedGraphic ./ReshapeOperation ./reshapeUtils ../../../../interactive/InteractiveToolBase".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r){Object.defineProperty(b,"__esModule",{value:!0});y=function(b){function d(a){a=b.call(this,a)||this;a._handles=new n;a._reshapeOperation=null;a._internalGeometryUpdate=!1;a.type="reshape-3d";a._emitter.target=null;return a}w(d,b);d.prototype.destroy=function(){this._handles.removeAll();this._reshapeOperation&&(this._reshapeOperation.destroy(),this._reshapeOperation=null);this._set("view",null);this._set("graphic",null)};d.prototype._updateGeometry=function(){0===
g.isSupportedGraphic(this.graphic)&&h.isReshapeGeometry(this.graphic.geometry)?this._reshapeOperation.inputGeometry=this.graphic.geometry.clone():this._reshapeOperation.inputGeometry=null};d.prototype._updateGraphic=function(){var a=this;this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(0===g.isSupportedGraphic(this.graphic)){var b=this.watch("graphic.geometry",function(){!1===a._internalGeometryUpdate&&a._updateGeometry()},!0);this._handles.add(b,"onGraphicGeometryChange")}};
d.prototype.manipulatorSelectionChanged=function(){this._reshapeOperation&&this._reshapeOperation.manipulatorSelectionChanged()};d.prototype._onReshapeGeometryChanged=function(){c.isNone(this.graphic)||(this._internalGeometryUpdate=!0,this.graphic.geometry=this._reshapeOperation.outputGeometry.clone(),this._internalGeometryUpdate=!1)};d.prototype.initialize=function(){var a=this;this._reshapeOperation=new k.ReshapeOperation({view:this.view,graphic:this.graphic,manipulators:this.manipulators,enableZ:this.enableZ});
this._handles.add([this._reshapeOperation.on("reshape",function(b){"reshape"===b.type&&a._onReshapeGeometryChanged();a.emit("reshape",b)}),this._reshapeOperation.on("move",function(b){"move"===b.type&&a._onReshapeGeometryChanged();a.emit("move",b)}),this._reshapeOperation.on("vertex-add",function(b){a._onReshapeGeometryChanged();a.emit("vertex-add",b)}),this._reshapeOperation.on("vertex-remove",function(b){a._onReshapeGeometryChanged();a.emit("vertex-remove",b)}),this._reshapeOperation.on("immediate-click",
function(){return a.emit("immediate-click")}),x.init(this,"graphic",function(){a._updateGraphic()},!0)])};d.prototype.handleInputEvent=function(a){"key-down"!==a.type||"Delete"!==a.key&&"Backspace"!==a.key||this._reshapeOperation.removeSelectedVertices()};d.prototype.reset=function(){};l([a.property({constructOnly:!0,nonNullable:!0})],d.prototype,"view",void 0);l([a.property({constructOnly:!0})],d.prototype,"graphic",void 0);l([a.property({constructOnly:!0,nonNullable:!0,value:!0})],d.prototype,"enableZ",
void 0);l([a.property({readOnly:!0})],d.prototype,"type",void 0);return d=l([a.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshape3DTool")],d)}(a.declared(t.EventedMixin(r.InteractiveToolBase)));b.GraphicReshape3DTool=y})},"esri/views/3d/interactive/editingTools/graphicReshape3D/isSupportedGraphic":function(){define("require exports ../../../../../core/compilerUtils ../../../../../core/maybe ../../../../../geometry/Circle ../../../../../support/elevationInfoUtils".split(" "),
function(y,b,l,w,t,n){Object.defineProperty(b,"__esModule",{value:!0});b.isSupportedGraphic=function(b){if("graphics"!==b.layer.type)return 1;var c=b.geometry;if(w.isNone(c))return 2;var a=c.type;switch(a){case "polygon":if(c instanceof t)return 3;break;case "polyline":break;case "point":case "multipoint":case "extent":case "mesh":return 3;default:return l.neverReached(a),3}return"on-the-ground"!==n.getGraphicEffectiveElevationMode(b)&&n.hasGraphicFeatureExpressionInfo(b)?4:0}})},"esri/geometry/Circle":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/unitUtils ../core/accessorSupport/decorators ./Point ./Polygon ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h){return function(b){function d(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];a=b.apply(this,a)||this;a.center=null;a.geodesic=!1;a.numberOfPoints=60;a.radius=1E3;a.radiusUnit="meters";return a}w(d,b);r=d;d.prototype.normalizeCtorArgs=function(a,b){var d;if(a&&a.center)d=a;else{if(a&&a.rings)return this.inherited(arguments);d={center:a}}return l({},this.inherited(arguments,[]),d,b)};d.prototype.initialize=function(){var a=this.center,b=this.numberOfPoints;
this.hasZ=a&&a.hasZ;if(0===this.rings.length&&a){var d=n.convertUnit(this.radius,this.radiusUnit,"meters"),c=a.spatialReference,g="geographic";if(c.isWebMercator)g="webMercator";else if(null!=h[c.wkid]||c.wkt&&0===c.wkt.indexOf("PROJCS"))g="projected";if(this.geodesic){c=void 0;switch(g){case "webMercator":c=k.webMercatorToGeographic(a);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":c=
a}a=this._createGeodesicCircle(c,d,b);"webMercator"===g&&(a=k.geographicToWebMercator(a))}else c=void 0,"webMercator"===g||"projected"===g?c=d/this._convert2Meters(1,a.spatialReference):"geographic"===g&&(c=n.lengthToDegrees(d,"meters")),a=this._createPlanarCircle(a,c,b);this.spatialReference=a.spatialReference;this.addRing(a.rings[0])}};d.prototype.clone=function(){var a=this.numberOfPoints,b=this.radius,d=this.radiusUnit,c=this.geodesic;return new r({center:this.center.clone(),numberOfPoints:a,
radius:b,radiusUnit:d,geodesic:c})};d.prototype._createGeodesicCircle=function(b,d,c){for(var h=0,v=[];360>h;){var e=[0,0];g.directGeodeticSolver(e,[b.x,b.y],h,d);this.hasZ&&e.push(b.z);v.push(e);h+=360/c}v.push(v[0]);return new a(v)};d.prototype._createPlanarCircle=function(b,d,c){for(var g=0,h=[];g<2*Math.PI;){var e=[b.x+Math.cos(-g)*d,b.y+Math.sin(-g)*d];this.hasZ&&e.push(b.z);h.push(e);g+=Math.PI/(c/2)}h.push(h[0]);return new a({spatialReference:b.spatialReference,rings:[h]})};d.prototype._convert2Meters=
function(a,b){if(null!=h[b.wkid])b=h.values[h[b.wkid]];else{b=b.wkt;var d=b.lastIndexOf(",")+1,c=b.lastIndexOf("]]");b=parseFloat(b.substring(d,c))}return a*b};var r;t([c.property({type:x})],d.prototype,"center",void 0);t([c.property()],d.prototype,"geodesic",void 0);t([c.property()],d.prototype,"numberOfPoints",void 0);t([c.property()],d.prototype,"radius",void 0);t([c.property()],d.prototype,"radiusUnit",void 0);return d=r=t([c.subclass("esri.geometry.Circle")],d)}(c.declared(a))})},"esri/geometry/support/geodesicUtils":function(){define("require exports @dojo/framework/shim/object ../. ../../core/Error ../../core/unitUtils".split(" "),
function(y,b,l,w,t,n){function c(a){if(!a||!a.isGeographic)return null;if(a.wkid){var b=C[a.wkid];if(b)return b}if(a.wkt){a=p.exec(a.wkt);if(!a||2!==a.length)return null;b=a[1].split(",");if(!b||3!==b.length)return null;a=parseFloat(b[1]);b=parseFloat(b[2]);return isNaN(a)||isNaN(b)?null:{a:a,f:0===b?0:1/b}}return null}function x(a){a=c(a||B);if("b"in a&&"eSq"in a&&"radius"in a)return a;var b=a.a*(1-a.f);return l.assign(a,{b:b,eSq:1-Math.pow(b/a.a,2),radius:(2*a.a+b)/3})}function a(a,b,c){var e=x(c);
c=e.a;var e=e.eSq,f=Math.sqrt(e),g=Math.sin(b[1]*d);b=c*b[0]*d;c=0<e?c*(1-e)*(g/(1-e*g*g)-1/(2*f)*Math.log((1-f*g)/(1+f*g)))*.5:c*g;a[0]=b;a[1]=c;return a}function g(a){return null!==c(a)}function k(a,b){if("polyline"!==a.type&&"polygon"!==a.type)throw new t("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");var d=a.spatialReference;if(!g(d))throw new t("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var e=
x(d).radius/1E4;b<e&&(b=e);for(var e=[],f=[0,0],c={distance:null},k=0,n="polyline"===a.type?a.paths:a.rings;k<n.length;k++){var u=n[k],m=[];e.push(m);m.push([u[0][0],u[0][1]]);for(var D=u[0][0],q=u[0][1],l=void 0,p=void 0,z=0;z<u.length-1;z++)if(l=u[z+1][0],p=u[z+1][1],D!==l||q!==p){var y=[D,q];r(c,[D,q],[l,p],d);D=c.azimuth;q=c.distance;l=q/b;if(1<l){for(p=1;p<=l-1;p++)h(f,y,D,p*b,d),m.push(f.slice(0));h(f,y,D,(q+Math.floor(l-1)*b)/2,d);m.push(f.slice(0))}h(f,y,D,q,d);m.push(f.slice(0));D=f[0];q=
f[1]}}return"polyline"===a.type?new w.Polyline({paths:e,spatialReference:d}):new w.Polygon({rings:e,spatialReference:d})}function h(a,b,c,e,f){var g=b[0]*d,h=b[1]*d;b=c*d;f=x(f);var k=f.a,u=f.b;f=f.f;c=Math.sin(b);b=Math.cos(b);for(var m=(1-f)*Math.tan(h),h=1/Math.sqrt(1+m*m),D=m*h,v=Math.atan2(m,b),m=h*c,n=m*m,q=1-n,k=q*(k*k-u*u)/(u*u),l=1+k/16384*(4096+k*(-768+k*(320-175*k))),p=k/1024*(256+k*(-128+k*(74-47*k))),k=e/(u*l),z=2*Math.PI,r,t,w,y;1E-12<Math.abs(k-z);)w=Math.cos(2*v+k),r=Math.sin(k),t=
Math.cos(k),y=p*r*(w+p/4*(t*(-1+2*w*w)-p/6*w*(-3+4*r*r)*(-3+4*w*w))),z=k,k=e/(u*l)+y;e=D*r-h*t*b;u=f/16*q*(4+f*(4-3*q));e=Math.atan2(D*t+h*r*b,(1-f)*Math.sqrt(n+e*e))/d;g=(g+(Math.atan2(r*c,h*t-D*r*b)-(1-u)*f*m*(k+u*r*(w+u*t*(-1+2*w*w)))))/d;a.splice(0,a.length);a.push(g,e);return a}function r(a,b,c,e){var f=b[0]*d;b=b[1]*d;var g=c[0]*d;c=c[1]*d;var h=x(e),k=h.a;e=h.b;var u=h.f,m=h.radius,D=g-f,n=Math.atan((1-u)*Math.tan(b)),v=Math.atan((1-u)*Math.tan(c)),h=Math.sin(n),n=Math.cos(n),l=Math.sin(v),
v=Math.cos(v),q=1E3,p=D,r,w,z,t,y,B,L,C;do{t=Math.sin(p);y=Math.cos(p);z=Math.sqrt(v*t*v*t+(n*l-h*v*y)*(n*l-h*v*y));if(0===z)return{distance:0};y=h*l+n*v*y;B=Math.atan2(z,y);L=n*v*t/z;w=1-L*L;t=y-2*h*l/w;isNaN(t)&&(t=0);C=u/16*w*(4+u*(4-3*w));r=p;p=D+(1-C)*u*L*(B+C*z*(t+C*y*(-1+2*t*t)))}while(1E-12<Math.abs(p-r)&&0<--q);if(0===q)return a=g-f,{azimuth:Math.atan2(Math.sin(a)*Math.cos(c),Math.cos(b)*Math.sin(c)-Math.sin(b)*Math.cos(c)*Math.cos(a))/d,distance:Math.acos(Math.sin(b)*Math.sin(c)+Math.cos(b)*
Math.cos(c)*Math.cos(g-f))*m};f=w*(k*k-e*e)/(e*e);b=f/1024*(256+f*(-128+f*(74-47*f)));g=Math.atan2(n*Math.sin(p),n*l*Math.cos(p)-h*v);a.azimuth=Math.atan2(v*Math.sin(p),n*l-h*v*Math.cos(p))/d;a.distance=e*(1+f/16384*(4096+f*(-768+f*(320-175*f))))*(B-b*z*(t+b/4*(y*(-1+2*t*t)-b/6*t*(-3+4*z*z)*(-3+4*t*t))));a.reverseAzimuth=g/d;return a}Object.defineProperty(b,"__esModule",{value:!0});var d=Math.PI/180,B=w.SpatialReference.WGS84,p=/SPHEROID\[([^\]]+)]/i,C={4326:{a:6378137,f:1/298.257223563},104900:{a:2439700,
f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:1737400,f:0},104904:{a:3393400,f:.005207166853303471},104905:{a:3396190,f:.005886007555525457},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},
104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:3396190,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};b.isSupported=g;b.geodesicAreas=function(b,d){void 0===d&&(d="square-meters");if(b.some(function(a){return!g(a.spatialReference)}))throw new t("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var c=[],e=0;e<b.length;e++){var f=b[e],h=f.spatialReference,h=.0015696101447650193*x(h).radius;
c.push(k(f,h))}b=[];for(var e=[0,0],f=[0,0],l=0;l<c.length;l++){for(var h=c[l],p=h.rings,h=h.spatialReference,u=0,m=0;m<p.length;m++){var D=p[m];a(e,D[0],h);a(f,D[D.length-1],h);for(var q=f[0]*e[1]-e[0]*f[1],r=0;r<D.length-1;r++)a(e,D[r+1],h),a(f,D[r],h),q+=f[0]*e[1]-e[0]*f[1];u+=q}u=n.convertUnit(u,"square-meters",d);b.push(u/-2)}return b};b.geodesicLengths=function(a,b){void 0===b&&(b="meters");if(!a&&!a)throw new t("geodesic-lengths:invalid-geometries","the input geometries type is not supported");
if(a.some(function(a){return!g(a.spatialReference)}))throw new t("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var d=[],e=0;e<a.length;e++){for(var c=a[e],h=c.spatialReference,c="polyline"===c.type?c.paths:c.rings,k=0,l=0;l<c.length;l++){for(var u=c[l],m=0,D=1;D<u.length;D++){var p=u[D-1][0],q=u[D][0],x=u[D-1][1],w=u[D][1];if(x!==w||p!==q){var z={distance:null};r(z,[p,x],[q,w],h);m+=z.distance}}k+=m}k=n.convertUnit(k,"meters",b);d.push(k)}return d};
b.geodesicDensify=k;b.directGeodeticSolver=h;b.inverseGeodeticSolver=r;b.geodesicDistance=function(a,b,d){void 0===d&&(d="meters");if(!a||!b)throw new t("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!a.spatialReference||!b.spatialReference)throw new t("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!a.spatialReference.equals(b.spatialReference))throw new t("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");
var e=a.spatialReference;if(!g(e))throw new t("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(a.equals(b))return{distance:0,azimuth:0,reverseAzimuth:0};var c={distance:null};r(c,[a.x,a.y],[b.x,b.y],e);c.distance=n.convertUnit(c.distance,"meters",d);return c};b.pointFromDistance=function(a,b,d){if(!a||null==b||null==d)throw new t("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>d||360<d)throw new t("point-from-distance:-of-bounds",
"azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!a.spatialReference)throw new t("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");var e=a.spatialReference;if(!g(e))throw new t("geodesic-distance:not-supported","input geometry spatial reference is not supported");var c=[0,0];h(c,[a.x,a.y],d,b,e);return new w.Point({x:c[0],y:c[1],spatialReference:e})}})},"@dojo/framework/shim/object":function(){(function(y){"object"===
typeof module&&"object"===typeof module.exports?(y=y(require,exports),void 0!==y&&(module.exports=y)):"function"===typeof define&&define.amd&&define(["require","exports","./global","../has/has","./Symbol"],y)})(function(y,b){Object.defineProperty(b,"__esModule",{value:!0});var l=y("./global"),w=y("../has/has"),t=y("./Symbol");w.default("es6-object")?(y=l.default.Object,b.assign=y.assign,b.getOwnPropertyDescriptor=y.getOwnPropertyDescriptor,b.getOwnPropertyNames=y.getOwnPropertyNames,b.getOwnPropertySymbols=
y.getOwnPropertySymbols,b.is=y.is,b.keys=y.keys):(b.keys=function(b){return Object.keys(b).filter(function(b){return!b.match(/^@@.+/)})},b.assign=function(n){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];if(null==n)throw new TypeError("Cannot convert undefined or null to object");var a=Object(n);c.forEach(function(c){c&&b.keys(c).forEach(function(b){a[b]=c[b]})});return a},b.getOwnPropertyDescriptor=function(b,c){t.isSymbol(c);return Object.getOwnPropertyDescriptor(b,c)},b.getOwnPropertyNames=
function(b){return Object.getOwnPropertyNames(b).filter(function(b){return!b.match(/^@@.+/)})},b.getOwnPropertySymbols=function(b){return Object.getOwnPropertyNames(b).filter(function(b){return!!b.match(/^@@.+/)}).map(function(b){return Symbol.for(b.substring(2))})},b.is=function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c});w.default("es2017-object")?(y=l.default.Object,b.getOwnPropertyDescriptors=y.getOwnPropertyDescriptors,b.entries=y.entries,b.values=y.values):(b.getOwnPropertyDescriptors=
function(l){return b.getOwnPropertyNames(l).reduce(function(c,n){c[n]=b.getOwnPropertyDescriptor(l,n);return c},{})},b.entries=function(l){return b.keys(l).map(function(b){return[b,l[b]]})},b.values=function(l){return b.keys(l).map(function(b){return l[b]})})})},"esri/views/3d/interactive/editingTools/graphicReshape3D/ReshapeOperation":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/compilerUtils ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../layers/graphics/dehydratedFeatures ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../manipulatorDragUtils ../manipulatorUtils ./reshapeUtils ../../../support/stack ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryUtil".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f){Object.defineProperty(b,"__esModule",{value:!0});y=function(b){function c(a){a=b.call(this,a)||this;a._vertexManipulatorMaterial=p.createManipulatorMaterial([1,.5,0],1);a._edgeManipulatorMaterial=p.createManipulatorMaterial([.5,.5,.5],1);a._selectedManipulatorMaterial=p.createManipulatorMaterial([1,1,1],1);a._manipulatorGeometry=new e(f.createSphereGeometry(1,16,16),"reshape-manipulator");a._handles=new x;a._manipulatorHandles=new x;a._manipulatorInfos=
[];a._reshapeHelper=null;a._moveManipulator=null;a._moveZManipulator=null;a._numGrabbing=0;a._reshapeEventState=0;a.view=null;a.graphic=null;a.enableZ=!0;a.outputGeometry=null;a.manipulators=null;a._emitter.target=null;return a}w(c,b);c.prototype.initialize=function(){var b=this;this._handles.add(this.watch(["graphic.visible","graphic.layer.visible"],function(){for(var e=b.graphic.visible&&b.graphic.layer.visible,d=0,c=b._manipulatorInfos;d<c.length;d++)c[d].manipulator.visible=!!e;a.isSome(b._moveZManipulator)&&
(b._moveZManipulator.visible=!!e)}))};c.prototype.destroy=function(){this._clear();this._handles.destroy()};Object.defineProperty(c.prototype,"inputGeometry",{get:function(){return a.isSome(this._reshapeHelper)?this._reshapeHelper.geometry:null},set:function(a){this._recreateManipulators(a)},enumerable:!0,configurable:!0});c.prototype.removeSelectedVertices=function(){var a=this._manipulatorInfos.filter(function(a){return a.manipulator.selected&&"vertex"===a.handle.type});this._removeVertices(a)};
c.prototype.manipulatorSelectionChanged=function(){this._updateMoveZManipulatorPosition()};c.prototype._clear=function(){this._manipulatorHandles.removeAll();this.manipulators.removeAll();this._manipulatorInfos=[];this._reshapeHelper=this._moveManipulator=null;this._numGrabbing=0};c.prototype._recreateManipulators=function(b){this._clear();this._reshapeHelper=z.createReshapeHelper(b,"global"===this.view.viewingMode);if(!a.isNone(this._reshapeHelper)){b=d.getGraphicEffectiveElevationInfo(this.graphic);
for(var e=0,c=this._reshapeHelper.components;e<c.length;e++){for(var f=c[e],g=0,m=f.vertices;g<m.length;g++)this._createPerVertexManipulator(m[g],b);g=0;for(f=f.edges;g<f.length;g++)this._createPerVertexManipulator(f[g],b)}this._createGraphicMoveManipulators()}};c.prototype._perGraphicManipulatorDragAction=function(b,e){if("end"!==e.action){var d=[],c=this._manipulatorInfos.some(function(a){return"vertex"===a.handle.type&&a.manipulator.selected}),f=1===b&&c;b=a.expect(this._reshapeHelper);for(var g=
0,m=this._manipulatorInfos;g<m.length;g++)c=m[g],"vertex"!==c.handle.type||c.manipulator.grabbing||f&&!c.manipulator.selected||(a.expect(b).addDelta(c.handle,e.mapDeltaX,e.mapDeltaY,e.mapDeltaZ),d.push(c.handle.pos),this._updateManipulatorPosition(c));if(0!==d.length){f=0;for(g=this._manipulatorInfos;f<g.length;f++)c=g[f],"vertex"!==c.handle.type&&this._updateManipulatorPosition(c);this.outputGeometry=b.commit();d.length===this._manipulatorInfos.length?(this._updateEventState(1),this.emit("move",
{type:"move",dx:e.screenDeltaX,dy:e.screenDeltaY,mover:this.graphic})):(this._updateEventState(2),this.emit("reshape",{type:"reshape",mover:this.graphic}))}}};c.prototype._perVertexManipulatorDragAction=function(b,e){var d="edge"===b.handle.type?this._splitEdgeManipulator(b):b;this._updateEventState(2);!1===b.manipulator.selected&&(this._clearManipulatorSelection(),this._updateMoveZManipulatorPosition());b=e.mapDeltaX;var c=e.mapDeltaY,f=e.mapDeltaZ;if(b||c||f){e=[];for(var g=0,m=this._manipulatorInfos;g<
m.length;g++){var h=m[g];"vertex"===h.handle.type&&(h.manipulator.selected&&!h.manipulator.grabbing||h===d)&&e.push(h)}m=a.expect(this._reshapeHelper);for(h=0;h<e.length;h++)d=e[h],g=d.handle,m.addDelta(g,b,c,f),this._updateManipulatorPosition(d);this.outputGeometry=m.commit();for(b=0;b<e.length;b++)d=e[b],g=d.handle,this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(g.left)),this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(g.right));this.emit("reshape",{type:"reshape",
mover:this.graphic})}};c.prototype._updateEventState=function(a){if(a===this._reshapeEventState)return!1;switch(a){case 0:if(0!==this._numGrabbing)return!1;switch(this._reshapeEventState){case 1:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic});break;case 2:this.emit("reshape",{type:"reshape-stop",mover:this.graphic})}break;case 1:switch(this._reshapeEventState){case 0:this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic});break;case 2:this.emit("reshape",{type:"reshape-stop",
mover:this.graphic}),this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic})}break;case 2:switch(this._reshapeEventState){case 0:this.emit("reshape",{type:"reshape-start",mover:this.graphic});break;case 1:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic}),this.emit("reshape",{type:"reshape-start",mover:this.graphic})}}var b=this._reshapeEventState!==a;this._reshapeEventState=a;return b};c.prototype._createGraphicMoveManipulators=function(){var b=this;this._moveManipulator=
q.createGraphicMoveXYManipulator(this.view,this.graphic);var e=C.createManipulatorDragEventPipeline(this._moveManipulator,function(e,d,c){var f=a.isSome(e.graphic.geometry)?e.graphic.geometry.spatialReference:null;d.next(C.screenToMapXYForGraphic(c,b.view,e.graphic,f)).next(C.addMapDelta()).next(C.addScreenDelta()).next(function(a){b._perGraphicManipulatorDragAction(0,a)})});this._manipulatorHandles.add(e);this._manipulatorHandles.add(this._watchAndUpdateGrabState(this._moveManipulator));this._moveManipulator.events.on("immediate-click",
function(a){b.emit("immediate-click");a.stopPropagation()});this.manipulators.add(this._moveManipulator);this._moveZManipulator=this.enableZ?q.createGraphicMoveZManipulator({view:this.view,graphic:this.graphic}):null;a.isSome(this._moveZManipulator)&&(e=C.createManipulatorDragEventPipeline(this._moveZManipulator,function(a,e){e.next(C.screenToZConstrained(b.view,a.renderLocation,a.location.spatialReference)).next(C.addMapDelta()).next(C.addScreenDelta()).next(function(a){b._perGraphicManipulatorDragAction(1,
a)})}),this._manipulatorHandles.add(e),this._manipulatorHandles.add(this._watchAndUpdateGrabState(this._moveZManipulator)),this.manipulators.add(this._moveZManipulator),this._manipulatorHandles.add(g.init(this.graphic,"geometry",function(){return b._updateMoveZManipulatorPosition()})))};c.prototype._clearManipulatorSelection=function(){for(var a=0,b=this._manipulatorInfos;a<b.length;a++)b[a].manipulator.selected=!1;this._updateMoveZManipulatorPosition()};c.prototype._createPerVertexManipulator=function(a,
b){var e=this;void 0===b&&(b=d.getGraphicEffectiveElevationInfo(this.graphic));b=new B.Manipulator3D({view:this.view,renderObjects:[{geometry:this._manipulatorGeometry,material:this._vertexManipulatorMaterial,stateMask:A.Vertex|4},{geometry:this._manipulatorGeometry,material:this._edgeManipulatorMaterial,stateMask:A.Edge|4},{geometry:this._manipulatorGeometry,material:this._selectedManipulatorMaterial,stateMask:8}],radius:5,elevationInfo:b,visible:!(!this.graphic.visible||!this.graphic.layer.visible)});
this._setTypeSpecificManipulatorSettings(b,a);var c={manipulator:b,handle:a};this._manipulatorInfos.push(c);this.manipulators.add(b);this._updateManipulatorPosition(c);this._manipulatorHandles.add(this._watchAndUpdateGrabState(b),b);a=C.createManipulatorDragEventPipeline(b,function(a,b){b.next(C.screenToMapXYForGraphicAtLocation(e.view,e.graphic,a.elevationAlignedLocation,a.location.spatialReference)).next(C.addMapDelta()).next(function(a){e._perVertexManipulatorDragAction(c,a)})});this._manipulatorHandles.add(a);
b.events.on("immediate-click",function(a){return e._manipulatorClickCallback(a,c)});return b};c.prototype._setTypeSpecificManipulatorSettings=function(a,b){switch(b.type){case "vertex":a.state=A.Vertex;a.selectable=!0;a.cursor="move";a.collisionPriority=2;a.hideOnGrab=!0;break;case "edge":a.state=A.Edge;a.selectable=!1;a.cursor="copy";a.collisionPriority=1;a.hideOnGrab=!1;break;default:n.neverReached(b)}};c.prototype._watchAndUpdateGrabState=function(a){var b=this;return a.events.on("grab",function(a){"start"===
a.action?b._numGrabbing++:(b._numGrabbing--,b._updateEventState(0))})};c.prototype._removeManipulator=function(a){a&&(this._manipulatorHandles.remove(a.manipulator),this._manipulatorInfos.splice(this._manipulatorInfos.indexOf(a),1),this.manipulators.remove(a.manipulator))};c.prototype._getManipulatorInfoFromHandle=function(a){if(a)for(var b=0,e=this._manipulatorInfos;b<e.length;b++){var d=e[b];if(a===d.handle)return d}return null};c.prototype._updateManipulatorPosition=function(b){if(b){var e=a.expect(this._reshapeHelper);
"vertex"===b.handle.type?b.manipulator.location=e.getVertexPositionAsPoint(b.handle,F):"edge"===b.handle.type&&(b.manipulator.location=e.getEdgePositionAsPoint(b.handle,.5,F))}};c.prototype._splitEdgeManipulator=function(b){var e=a.expect(this._reshapeHelper).splitEdge(b.handle,.5);b.handle=e;this._setTypeSpecificManipulatorSettings(b.manipulator,b.handle);e.left&&this._createPerVertexManipulator(e.left);e.right&&this._createPerVertexManipulator(e.right);return b};c.prototype._updateMoveZManipulatorPosition=
function(){if(!a.isNone(this._moveZManipulator)){var b=v.sv3d.get();h.vec3.set(b,0,0,0);for(var e=0,d=0,c=this._manipulatorInfos;d<c.length;d++){var f=c[d];"vertex"===f.handle.type&&f.manipulator.selected&&(e++,h.vec3.add(b,b,f.manipulator.renderLocation))}if(0!==e&&(h.vec3.scale(b,b,1/e),F.spatialReference=a.expect(this._reshapeHelper).geometry.spatialReference,this.view.renderCoordsHelper.fromRenderCoords(b,F))){this._moveZManipulator.elevationAlignedLocation=F;return}p.placeManipulatorAtGraphic(this._moveZManipulator,
this.graphic)}};c.prototype._removeVertices=function(b){for(var e=[],d=a.expect(this._reshapeHelper),c=0;c<b.length;c++){var f=b[c];"vertex"===f.handle.type&&d.canRemoveVertex(f.handle)&&(e.push(f.handle.unnormalizedPos),this._removeManipulator(f),this._removeManipulator(this._getManipulatorInfoFromHandle(f.handle.left)),this._removeManipulator(this._getManipulatorInfoFromHandle(f.handle.right)),(f=d.removeVertex(f.handle))&&this._createPerVertexManipulator(f))}0<e.length&&(this.outputGeometry=d.commit(),
b=this._updateEventState(2),this.emit("vertex-remove",{type:"vertex-remove",removed:e}),b&&this._updateEventState(0),this._updateMoveZManipulatorPosition())};c.prototype._manipulatorClickCallback=function(b,e){"vertex"===e.handle.type&&2===b.button&&this._removeVertices([e]);if("edge"===e.handle.type&&0===b.button){e=this._splitEdgeManipulator(e);this.outputGeometry=a.expect(this._reshapeHelper).commit();var d=this._updateEventState(2);this.emit("vertex-add",{type:"vertex-add",added:[e.handle.unnormalizedPos]});
d&&this._updateEventState(0)}b.stopPropagation()};l([k.property({constructOnly:!0})],c.prototype,"view",void 0);l([k.property({constructOnly:!0})],c.prototype,"graphic",void 0);l([k.property({constructOnly:!0})],c.prototype,"enableZ",void 0);l([k.property()],c.prototype,"inputGeometry",null);l([k.property()],c.prototype,"outputGeometry",void 0);l([k.property({constructOnly:!0})],c.prototype,"manipulators",void 0);return c=l([k.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.ReshapeOperation")],
c)}(k.declared(c.EventedAccessor));b.ReshapeOperation=y;var F=r.makeDehydratedPoint(0,0,null,null),A;(function(a){a.Vertex=16;a.Edge=32})(A||(A={}))})},"esri/views/3d/interactive/editingTools/graphicReshape3D/reshapeUtils":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/maybe ../../../../../core/libs/gl-matrix-2/vec2 ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/vec4 ../../../../../core/libs/gl-matrix-2/vec4f64 ../../../../../geometry/support/coordsUtils ../../../../../geometry/support/spatialReferenceUtils".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(){this.vertices=[];this.edges=[]}a.prototype.makeVertex=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);a={pos:a,unnormalizedPos:a,left:b,right:d,type:"vertex",component:this};this.vertices.push(a);return a};a.prototype.makeEdge=function(a,b){var e={v0:a,v1:b,type:"edge",component:this};a.right=e;b.left=e;this.edges.push(e);return e};a.prototype.removeVertex=function(a){this.vertices.splice(this.vertices.indexOf(a),
1);a.left&&this.removeEdge(a.left);a.right&&this.removeEdge(a.right)};a.prototype.removeEdge=function(a){this.edges.splice(this.edges.indexOf(a),1);a.v0.right=null;a.v1.left=null};return a}();b.Component=d;var B=function(){function a(){}a.prototype.createNew=function(){return c.vec2f64.create()};a.prototype.fromArray=function(a){return c.vec2f64.fromValues(a[0],a[1])};a.prototype.toArray=function(a){return[a[0],a[1]]};a.prototype.toPoint=function(a,b){b.x=a[0];b.y=a[1];b.hasZ=!1;b.hasM=!1;return b};
a.prototype.lerp=function(a,b,d,c){return n.vec2.lerp(c,a,b,d)};a.prototype.addDelta=function(a,b,d){a[0]+=b;a[1]+=d};return a}();b.CoordinateHelper2D=B;var p=function(){function b(a){this.ztype=a}b.prototype.createNew=function(){return a.vec3f64.create()};b.prototype.fromArray=function(b){return a.vec3f64.fromValues(b[0],b[1],b[2]||0)};b.prototype.toArray=function(a){return[a[0],a[1],a[2]]};b.prototype.toPoint=function(a,b){b.x=a[0];b.y=a[1];0===this.ztype?(b.z=a[2],b.hasZ=!0,b.hasM=!1):(b.m=a[2],
b.hasZ=!1,b.hasM=!0);return b};b.prototype.lerp=function(a,b,d,c){return x.vec3.lerp(c,a,b,d)};b.prototype.addDelta=function(a,b,d,c){a[0]+=b;a[1]+=d;0===this.ztype&&(a[2]+=c)};return b}();b.CoordinateHelper3D=p;var C=function(){function a(){}a.prototype.createNew=function(){return k.vec4f64.create()};a.prototype.fromArray=function(a){return k.vec4f64.fromValues(a[0],a[1],a[2]||0,a[3]||0)};a.prototype.toArray=function(a){return[a[0],a[1],a[2],a[3]]};a.prototype.toPoint=function(a,b){b.x=a[0];b.y=
a[1];b.z=a[2];b.m=a[3];b.hasZ=!0;b.hasM=!0;return b};a.prototype.lerp=function(a,b,d,c){return g.vec4.lerp(c,a,b,d)};a.prototype.addDelta=function(a,b,d,c){a[0]+=b;a[1]+=d;a[2]+=c};return a}();b.CoordinateHelper4D=C;y=function(){function a(a,b,d){this.geometry=a;this.doUnnormalization=b;this.coordinateHelper=d;this.components=[];a=r.getInfo(this.geometry.spatialReference);this._tmpMapPoint=d.createNew();a?(this._spanMin=a.valid[0],this._spanMax=a.valid[1],this._span=this._spanMax-this._spanMin):this.doUnnormalization=
!1}a.prototype.addDelta=function(a,b,d,c){this.coordinateHelper.addDelta(a.pos,b,d,c)};a.prototype.getVertexPositionAsPoint=function(a,b){this.coordinateHelper.toPoint(a.pos,b);b.spatialReference=this.geometry.spatialReference;return b};a.prototype.getEdgePosition=function(a,b,d){void 0===d&&(d=this.coordinateHelper.createNew());return this.coordinateHelper.lerp(a.v0.unnormalizedPos,a.v1.unnormalizedPos,b,d)};a.prototype.getEdgePositionAsPoint=function(a,b,d){a=this.getEdgePosition(a,b,this._tmpMapPoint);
this.coordinateHelper.toPoint(a,d);d.spatialReference=this.geometry.spatialReference;return d};a.prototype.canRemoveVertex=function(a){return!0};a.prototype.removeVertex=function(a){var b=a.component,d=a.left,e=a.right;b.removeVertex(a);return d&&e?b.makeEdge(d.v0,e.v1):null};a.prototype.splitEdge=function(a,b){var d=a.component;b=d.makeVertex(this.getEdgePosition(a,b));var c=a.v0,e=a.v1;d.removeEdge(a);d.makeEdge(c,b);d.makeEdge(b,e);return b};return a}();b.ReshapeHelper=y;var q=function(a){function b(b,
c,e){c=a.call(this,b,c,e)||this;c.geometry=b;b=c.geometry.rings;for(var f=0;f<b.length;++f){for(var g=b[f],k=new d,l=g.length-1,n=0;n<l;++n){var p=e.fromArray(g[n]);k.makeVertex(p)}g=k.vertices.length-1;for(l=0;l<g;++l)k.makeEdge(k.vertices[l],k.vertices[l+1]);k.makeEdge(k.vertices[k.vertices.length-1],k.vertices[0]);c.doUnnormalization&&h.computeUnnormalizedVertexPositionsOnDateLineCrossing(k.vertices,c._spanMin,c._spanMax,c._span);c.components.push(k)}return c}w(b,a);b.prototype.canRemoveVertex=
function(a){return 3<a.component.vertices.length};b.prototype.commit=function(){var a=this,b=[],d=this.coordinateHelper.toArray;this.components.forEach(function(c){var e=[];a.doUnnormalization&&h.computeUnnormalizedVertexPositionsOnDateLineCrossing(c.vertices,a._spanMin,a._spanMax,a._span);var f=c.vertices[0],g=f;do e.push(d(f.unnormalizedPos)),f=f.right.v1;while(f&&f!==g);e.push(d(c.vertices[0].unnormalizedPos));b.push(e)});this.geometry.rings=b;return this.geometry};return b}(y),z=function(a){function b(b,
c,e){c=a.call(this,b,c,e)||this;c.geometry=b;b=c.geometry.paths;for(var f=0;f<b.length;++f){for(var g=b[f],k=new d,l=g.length,n=0;n<l;++n){var p=e.fromArray(g[n]);k.makeVertex(p)}g=k.vertices.length-1;for(l=0;l<g;++l)k.makeEdge(k.vertices[l],k.vertices[l+1]);c.doUnnormalization&&h.computeUnnormalizedVertexPositionsOnDateLineCrossing(k.vertices,c._spanMin,c._spanMax,c._span);c.components.push(k)}return c}w(b,a);b.prototype.canRemoveVertex=function(a){return 2<a.component.vertices.length};b.prototype.commit=
function(){var a=this,b=[],d=this.coordinateHelper.toArray;this.components.forEach(function(c){var e=[];a.doUnnormalization&&h.computeUnnormalizedVertexPositionsOnDateLineCrossing(c.vertices,a._spanMin,a._spanMax,a._span);var f=c=c.vertices[0];do e.push(d(c.unnormalizedPos)),c=c.right?c.right.v1:null;while(c&&c!==f);b.push(e)});this.geometry.paths=b;return this.geometry};return b}(y);b.isReshapeGeometry=function(a){return t.isSome(a)&&("polygon"===a.type||"polyline"===a.type)};b.createReshapeHelper=
function(a,b){if(t.isNone(a))return null;var d;d=a.hasZ&&a.hasM?new C:a.hasM?new p(1):a.hasZ?new p(0):new B;return"polygon"===a.type?new q(a,b,d):new z(a,b,d)}})},"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicTransform3DTool":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/math/common ../../../../../support/elevationInfoUtils ../isSupportedGraphicUtils ../manipulatorUtils ./GraphicScaleRotateTransform ./GraphicXYAxisTransform ./GraphicXYTransform ./GraphicZTransform ./isSupportedGraphic ../../../support/stack ../../../../interactive/InteractiveToolBase".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f,F,A,H){Object.defineProperty(b,"__esModule",{value:!0});var u=a.getLogger("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransform3DTool");y=function(a){function b(b){b=a.call(this,b)||this;b.enableZ=!0;b.enableRotation=!0;b.enableScaling=!0;b.type="transform-3d";b.handles=new x;b.zTransform=null;b.scaleRotate=null;return b}w(b,a);b.prototype.initialize=function(){this.xyTransform=new e.GraphicXYTransform({tool:this});this.xyAxisTransform=
new v.GraphicXYAxisTransform({tool:this});if(this.enableScaling||this.enableRotation)this.scaleRotate=new z.GraphicScaleRotateTransform({tool:this,mode:this.enableScaling&&this.enableRotation?null:this.enableScaling?"scale":"rotate"});q.canMoveZ(this.graphic,p.getGraphicEffectiveElevationInfo(this.graphic))&&this.enableZ&&(this.zTransform=new f.GraphicZTransform({tool:this}));this._recreateManipulators()};b.prototype.destroy=function(){this._clear();this.xyTransform.destroy();this.xyTransform=null;
this.xyAxisTransform.destroy();this.xyAxisTransform=null;g.isSome(this.scaleRotate)&&(this.scaleRotate.destroy(),this.scaleRotate=null);g.isSome(this.zTransform)&&(this.zTransform.destroy(),this.zTransform=null);this._set("view",null);this._set("graphic",null)};Object.defineProperty(b.prototype,"graphic",{set:function(a){if(null==a)u.error("invalid graphic");else{var b=F.isSupportedGraphic(a);0!==b?(u.error("Transform tool not supported for graphic ("+C.isSupportedGraphicResultMessage(b)+")."),this._set("graphic",
null)):this._set("graphic",a)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbolRotationAngle",{get:function(){var a=this.graphic.symbol;return a?(a=a.symbolLayers.find(function(a){return"object"===a.type}),B.toRadian(-(a&&a.heading||0))):0},enumerable:!0,configurable:!0});b.prototype.reset=function(){};b.prototype.onDetach=function(){g.isSome(this.scaleRotate)&&this.scaleRotate.cancelActiveAnimation()};b.prototype.onHide=function(){g.isSome(this.scaleRotate)&&this.scaleRotate.cancelActiveAnimation()};
b.prototype._clear=function(){this.handles.removeAll()};b.prototype._recreateManipulators=function(){var a=this;this._clear();var b=g.unwrap(this.graphic);this.xyTransform.recreateManipulators();this.xyAxisTransform.recreateManipulators();g.isSome(this.scaleRotate)&&this.scaleRotate.recreateManipulators();g.isSome(this.zTransform)&&this.zTransform.recreateManipulators();this.handles.add([k.watch(b,"geometry",function(){return a.updateManipulators()})]);this.updateManipulators()};b.prototype.updateManipulators=
function(){var a=this.view.renderCoordsHelper.basisMatrixAtPosition(this.xyTransform.renderLocation,A.sm4d.get()),b="none";this.xyTransform.focused?b="xy":this.xyAxisTransform.focused?b="xy-axis":g.isSome(this.scaleRotate)&&this.scaleRotate.getFocused()&&(b="scale-rotate");g.isSome(this.zTransform)&&this.zTransform.dragging&&(b="z");g.isSome(this.scaleRotate)&&this.scaleRotate.dragging&&(b="scale-rotate");this.xyAxisTransform.dragging&&(b="xy-axis");this.xyTransform.dragging&&(b="xy");var c=a;g.isSome(this.scaleRotate)&&
(this.scaleRotate.updateManipulators(a,"scale-rotate"===b),c=this.scaleRotate.getScale(),c=r.mat4.fromScaling(A.sm4d.get(),d.vec3.set(A.sv3d.get(),c,c,c)),c=r.mat4.multiply(A.sm4d.get(),a,c));this.xyTransform.updateManipulators(c,"none"===b||"xy"===b);this.xyAxisTransform.updateManipulators(c,"xy"===b||"xy-axis"===b,"xy-axis"===b);g.isSome(this.zTransform)&&this.zTransform.updateManipulators(c)};l([h.property({constructOnly:!0,nonNullable:!0})],b.prototype,"view",void 0);l([h.property({value:null})],
b.prototype,"graphic",null);l([h.property({constructOnly:!0,nonNullable:!0})],b.prototype,"enableZ",void 0);l([h.property()],b.prototype,"enableRotation",void 0);l([h.property()],b.prototype,"enableScaling",void 0);l([h.property({readOnly:!0})],b.prototype,"type",void 0);return b=l([h.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransform3DTool")],b)}(h.declared(c.EventedMixin(H.InteractiveToolBase)));b.GraphicTransform3DTool=y})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["require",
"exports","../../../../core/compilerUtils"],function(y,b,l){Object.defineProperty(b,"__esModule",{value:!0});b.isSupportedGraphicResultMessage=function(b){switch(b){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported";default:l.neverReached(b)}return""}})},"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicScaleRotateTransform":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/assignHelper ../../../../../core/Handles ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/scheduling ../../../../../core/screenUtils ../../../../../core/watchUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../core/libs/gl-matrix-2/math/common ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../../manipulatorUtils ../manipulatorDragUtils ./graphicTransform3DToolConfig ../../../support/geometryUtils ../../../support/mathUtils ../../../support/stack ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/materials/ColorMaterial".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f,F,A,H,u,m,D,G,K){function M(a,b){var d=a.allLayerViews.find(function(a){return a.layer===b.layer});if(g.isNone(b.symbol))return null;var c=b.symbol;return{symbolLayers:c.symbolLayers.map(function(a){var b=null,e=null;"object"===a.type&&(b=a.heading);e=d.getSymbolLayerSize(c,a);return{heading:b,size:e}}).toArray()}}function I(a,b,d,c){a.symbolLayers.forEach(function(a,e){var f=b.symbolLayers[e];e=f.heading;f=f.size;"object"===a.type&&(a.heading=
(g.isSome(e)?e:0)-q.toDegree(d),g.isSome(f)&&"width"in f&&(a.width=f.width*c,a.depth=f.depth*c,a.height=f.height*c))})}function J(a,b,d){a=b.projectPoint(a,h.castRenderScreenPointArray(Q));b=b.renderToScreen(a,S);return p.vec3.set(d,b[0],b[1],0)}function N(a){var b=null,d=1,c=function(){return d};return{start:function(){d=a.getScale();b=a.getScale;a.getScale=c},update:function(b){d+=((d+1)/2-d)*Math.min(b*A.RING_RESET_ANIMATION_SPEED_FACTOR,1);a.tool.updateManipulators();return.01>Math.abs(d-1)?1:
0},destroy:function(){a.getScale=b;a.tool.updateManipulators()}}}function O(a){var b=0,d=null,c=function(){return!1};return{start:function(){d=a.getFocused;a.getFocused=c;b=0},update:function(d){b+=d;return!a.ringManipulator.focused||b>A.RING_INDICATOR_DELAY_MS?1:0},destroy:function(){a.getFocused=d;a.tool.updateManipulators()}}}Object.defineProperty(b,"__esModule",{value:!0});var E;(function(a){a.ScaleIn=32;a.ScaleOut=64;a.RotateLeft=128;a.RotateRight=256;a.Highlighted=512;a.Unlocked=1024;a.TouchInput=
32768})(E||(E={}));y=function(){function b(a){var b=this;this.mode=null;this._handles=new x;this._activeAnimation=this._scaleRotateDragData=null;this.getFocused=function(){return b.ringManipulator.focused};this.getScale=function(){return g.isSome(b._scaleRotateDragData)&&"scale"===b._scaleRotateDragData.mode?b._scaleRotateDragData.scale:1};this.tool=a.tool;this.mode=a.mode}b.prototype.destroy=function(){this._clear()};b.prototype._clear=function(){g.isSome(this._activeAnimation)&&(this._activeAnimation.frameTask.remove(),
this._activeAnimation=null);this._handles.removeAll();this.tool.manipulators.remove(this.ringManipulator);this.ringManipulator=null};Object.defineProperty(b.prototype,"dragging",{get:function(){return this.ringManipulator.dragging},enumerable:!0,configurable:!0});b.prototype.startAnimation=function(a){var b=this;this.cancelActiveAnimation();a.start();var d=k.addFrameTask({update:function(d){a.update(d.deltaTime)&&b.cancelActiveAnimation()}});this._activeAnimation=c({},a,{frameTask:d})};b.prototype.cancelActiveAnimation=
function(){g.isSome(this._activeAnimation)&&(this._activeAnimation.frameTask.remove(),this._activeAnimation.destroy(),this._activeAnimation=null)};b.prototype.recreateManipulators=function(){var b=this;this._clear();this.ringManipulator=this.createRingManipulator();this.tool.manipulators.add(this.ringManipulator);var d=F.createManipulatorDragEventPipeline(this.ringManipulator,function(d,c){b._scaleRotateDragData=null;var f=M(b.tool.view,b.tool.graphic);if(g.isNone(f))return null;var h={mode:"none",
origin:C.vec3f64.clone(d.renderLocation),angle:0,startAngle:b.tool.symbolRotationAngle,angleDir:0,scale:1,scaleDir:0,startSymbolData:f};b._scaleRotateDragData=h;c.next(F.screenToRenderPlane(b.tool.view,H.plane.fromPositionAndNormal(d.renderLocation,C.vec3f64.fromValues(d.modelTransform[8],d.modelTransform[9],d.modelTransform[10])))).next(function(d){var c=e.calculateInputRotationTransform(d.renderStart,d.renderEnd,h.origin,d.plane),f=u.cyclicalPI.shortestSignedDiff(h.angle,c);h.angleDir=a.clamp(h.angleDir+
f,-A.ROTATE_INDICATOR_DIRECTION_BUFFER,A.ROTATE_INDICATOR_DIRECTION_BUFFER);h.angle=c;f=p.vec3.subtract(m.sv3d.get(),d.renderStart,h.origin);c=p.vec3.subtract(m.sv3d.get(),d.renderEnd,h.origin);f=p.vec3.length(f);c=p.vec3.length(c);c=0===f?0:c/f;h.scaleDir=a.clamp(h.scaleDir+(c-h.scale),-A.SCALE_INDICATOR_DIRECTION_BUFFER,A.SCALE_INDICATOR_DIRECTION_BUFFER);h.scale=c;if("none"===h.mode){if(!(c=b.mode)){var k=d.plane,l=h.origin,n=b.tool.view.state.camera,q=d.renderStart,c=d.renderEnd,f=J(q,n,m.sv3d.get()),
c=J(c,n,m.sv3d.get());if(p.vec3.squaredDistance(f,c)<A.DRAG_THRESHOLD_PX*A.DRAG_THRESHOLD_PX)c=null;else var r=p.vec3.subtract(m.sv3d.get(),q,l),k=p.vec3.cross(m.sv3d.get(),r,k),q=p.vec3.add(m.sv3d.get(),q,k),l=J(l,n,m.sv3d.get()),n=J(q,n,m.sv3d.get()),q=p.vec3.subtract(m.sv3d.get(),n,f),n=p.vec3.subtract(m.sv3d.get(),f,l),f=H.ray.wrap(f,q),n=H.ray.wrap(l,n),c=H.ray.distance2(f,c)<H.ray.distance2(n,c)?"rotate":"scale"}if(g.isSome(c)){switch(c){case "rotate":b.tool.emit("graphic-rotate-start",{graphic:b.tool.graphic});
break;case "scale":b.tool.emit("graphic-scale-start",{graphic:b.tool.graphic})}h.mode=c}}if(g.isSome(b.tool.graphic.symbol)){c=b.tool.graphic.symbol.clone();f=0;n=1;switch(h.mode){default:case "none":break;case "scale":n=h.scale;break;case "rotate":f=h.angle}I(c,h.startSymbolData,f,n);b.tool.graphic.symbol=c}switch(d.action){case "start":case "update":switch(h.mode){case "rotate":b.tool.emit("graphic-rotate",{graphic:b.tool.graphic,angle:h.angle,type:"rotate"});break;case "scale":b.tool.emit("graphic-scale",
{graphic:b.tool.graphic,scale:h.scale,type:"scale"})}break;case "end":switch(h.mode){case "rotate":b.tool.emit("graphic-rotate-stop",{graphic:b.tool.graphic});break;case "scale":b.tool.emit("graphic-scale-stop",{graphic:b.tool.graphic})}}"end"===d.action&&(b.startAnimation(N(b)),b._scaleRotateDragData=null);b.tool.updateManipulators()})});this._handles.add(d);this._handles.add([r.init(this.tool.graphic,"geometry",function(){f.placeManipulatorAtGraphic(b.ringManipulator,b.tool.graphic)}),this.ringManipulator.events.on("focus",
function(a){"focus"===a.action?b.startAnimation(O(b)):b.tool.updateManipulators()}),this.ringManipulator.events.on("immediate-click",function(a){a.stopPropagation()}),r.init(this.tool.graphic,["visible","layer.visible"],function(){b.ringManipulator.visible=b.tool.graphic.visible&&b.tool.graphic.layer.visible})])};b.prototype.updateManipulators=function(a,b){var c=d.mat4.identity(m.sm4d.get()),e=this.tool.symbolRotationAngle;0!==e&&d.mat4.rotate(c,c,e,C.vec3f64.fromValues(0,0,1));var e=this.getScale(),
e=d.mat4.fromScaling(m.sm4d.get(),p.vec3.set(m.sv3d.get(),e,e,e)),f=d.mat4.identity(m.sm4d.get());d.mat4.multiply(f,a,e);d.mat4.multiply(f,f,c);this.ringManipulator.modelTransform=f;this.ringManipulator.state=0;this.ringManipulator.state|=!0===b?E.Highlighted:0;this.ringManipulator.state|=g.isSome(this._scaleRotateDragData)&&"none"!==this._scaleRotateDragData.mode?0:E.Unlocked;if(g.isSome(this._scaleRotateDragData))switch(this._scaleRotateDragData.mode){case "rotate":this.ringManipulator.state|=0>
this._scaleRotateDragData.angleDir?E.RotateLeft:E.RotateRight;break;case "scale":this.ringManipulator.state|=0>this._scaleRotateDragData.scaleDir?E.ScaleIn:E.ScaleOut}};b.prototype.createRingManipulator=function(){for(var a=function(a,b,d){for(var c=[],e=Math.ceil(A.GEOMETRY_SEGMENTS*(b-a)/(2*Math.PI)),f=0;f<e+1;f++){var g=a+f*(b-a)/e;c.push(C.vec3f64.fromValues(d*Math.cos(g),d*Math.sin(g),0))}return c},b=function(b){return a(0,2*Math.PI,b)},c=function(a,b){return new D(G.createPathExtrusionGeometry([[-b/
2,0],[b/2,0],[b/2,A.RING_HEIGHT/2],[-b/2,A.RING_HEIGHT/2]],a,[],[],!1),"graphic-transform-ring")},e=b(A.RING_RADIUS),f=c(e,A.RING_THICKNESS),g=[],h=[],k=[],l=0;2>l;l++){var m=l*Math.PI-Math.PI/4,n=Math.PI/2-A.ROTATE_INDICATOR_ARC_LENGTH,u=m+n,m=m+Math.PI/2-n,n=a(u,m,A.INNER_INDICATOR_RADIUS),p=c(n,A.INDICATOR_THICKNESS);k.push(n);g.push(p);h.push(p);for(p=0;2>p;p++){var q=0===p,r=B.mat4f64.create();if(q){d.mat4.scale(r,r,[1,-1,1]);d.mat4.rotate(r,r,-u,[0,0,1]);var t=Math.round(A.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE*
(n.length-1))}else d.mat4.rotate(r,r,m,[0,0,1]),t=Math.round((1-A.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE)*(n.length-1));r[12]=n[t][0];r[13]=n[t][1];r[14]=n[t][2];t=G.createExtrudedTriangle(A.ROTATE_INDICATOR_ARROW_TIP_LENGTH,0,A.ROTATE_INDICATOR_ARROW_TIP_RADIUS,A.RING_HEIGHT);G.transformInPlace(t,r);r=new D(t,"graphic-transform-ring-rotate");(q?g:h).push(r)}}p=[];for(l=0;2>l;l++)m=l*Math.PI-Math.PI/4,n=Math.PI/2-A.SCALE_INDICATOR_ARC_LENGTH,u=m+n,m=m+Math.PI/2-n,n=a(u,m,A.OUTER_INDICATOR_RADIUS),
p.push(c(n,A.INDICATOR_THICKNESS));l=b(A.RING_RADIUS+A.SCALE_INDICATOR_OFFSET1);u=b(A.RING_RADIUS+A.SCALE_INDICATOR_OFFSET2);l=c(l,A.INDICATOR_THICKNESS);u=c(u,A.INDICATOR_THICKNESS);m=b(A.RING_RADIUS-A.SCALE_INDICATOR_OFFSET1);n=b(A.RING_RADIUS-A.SCALE_INDICATOR_OFFSET2);b=c(m,A.INDICATOR_THICKNESS);c=c(n,A.INDICATOR_THICKNESS);m=this.createMaterial();n=this.createMaterial(.66);r=this.createMaterial(.5);q=this.createMaterial(.33);f=[{geometry:f,material:m,stateMask:E.Highlighted},{geometry:f,material:r}];
this.mode&&"scale"!==this.mode||(f=f.concat([{geometry:p,material:m,stateMask:E.Highlighted|E.Unlocked},{geometry:l,material:n,stateMask:E.Highlighted|E.ScaleIn},{geometry:u,material:q,stateMask:E.Highlighted|E.ScaleIn},{geometry:b,material:n,stateMask:E.Highlighted|E.ScaleOut},{geometry:c,material:q,stateMask:E.Highlighted|E.ScaleOut}]));this.mode&&"rotate"!==this.mode||(f=f.concat([{geometry:h,material:m,stateMask:E.Highlighted|E.Unlocked},{geometry:g,material:m,stateMask:E.Highlighted|E.RotateLeft},
{geometry:h,material:m,stateMask:E.Highlighted|E.RotateRight}]));e=[e].concat(k);return new v.Manipulator3D({view:this.tool.view,renderObjects:f,autoScaleRenderObjects:!1,radius:A.RING_THICKNESS,focusMultiplier:1,touchMultiplier:1.5,elevationInfo:z.getGraphicEffectiveElevationInfo(this.tool.graphic),collisionType:{type:"ribbon",paths:e,direction:C.vec3f64.fromValues(0,0,1)}})};b.prototype.createMaterial=function(a){void 0===a&&(a=1);var b=A.HANDLE_COLOR.concat([a]);a=new K({color:b,transparent:1!==
a,cullFace:2},"graphic-transform");a.renderOccluded=2;return a};return b}();b.GraphicScaleRotateTransform=y;var Q=C.vec3f64.create(),S=h.createScreenPointArray()})},"esri/views/3d/interactive/editingTools/graphicTransform3D/graphicTransform3DToolConfig":function(){define(["require","exports"],function(y,b){Object.defineProperty(b,"__esModule",{value:!0});b.HANDLE_COLOR=[1,.5,0];b.GEOMETRY_SEGMENTS=128;b.DISC_RADIUS=70;b.DISC_COLLISION_RADIUS=80;b.DISC_HEIGHT=.02;b.DISC_TRANSLATE_ARROW_SIZE=54;b.DISC_TRANSLATE_ARROW_OFFSET=
100;b.RING_RADIUS=160;b.RING_HEIGHT=.5;b.RING_THICKNESS=24;b.INDICATOR_THICKNESS=9;b.INNER_INDICATOR_RADIUS=b.RING_RADIUS+30;b.OUTER_INDICATOR_RADIUS=b.RING_RADIUS+53;b.ROTATE_INDICATOR_ARROW_TIP_LENGTH=60;b.ROTATE_INDICATOR_ARROW_TIP_RADIUS=23;b.ROTATE_INDICATOR_ARC_LENGTH=5*Math.PI/12;b.SCALE_INDICATOR_ARC_LENGTH=1*Math.PI/3;b.DRAG_THRESHOLD_PX=10;b.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE=.2;b.SCALE_INDICATOR_OFFSET1=30;b.SCALE_INDICATOR_OFFSET2=53;b.SCALE_INDICATOR_DIRECTION_BUFFER=.2;b.ROTATE_INDICATOR_DIRECTION_BUFFER=
.3;b.RING_INDICATOR_DELAY_MS=200;b.RING_RESET_ANIMATION_SPEED_FACTOR=3;b.ALIGN_ARROWS_SCALE_THRESHOLD=1E6})},"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicXYAxisTransform":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Handles ../../../../../core/has ../../../../../core/watchUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../manipulatorDragUtils ./graphicTransform3DToolConfig ../../../support/stack ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/materials/ColorMaterial".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z,v,e,f){function F(a){return"local"===a.viewingMode?!0:a.scale<q.ALIGN_ARROWS_SCALE_THRESHOLD}Object.defineProperty(b,"__esModule",{value:!0});var A;(function(a){a.Highlighted=512;a.Visible=1024})(A||(A={}));y=function(){function b(a){this._handles=new c;this.arrowManipulatorInfos=[];this.tool=a.tool}b.prototype.destroy=function(){this._clear()};b.prototype._clear=function(){var a=this;this._handles.removeAll();this.arrowManipulatorInfos.forEach(function(b){a.tool.manipulators.remove(b.manipulator)});
this.arrowManipulatorInfos=[]};Object.defineProperty(b.prototype,"focused",{get:function(){return this.arrowManipulatorInfos.some(function(a){return a.manipulator.focused})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dragging",{get:function(){return this.arrowManipulatorInfos.some(function(a){return a.manipulator.dragging})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"arrowRotationAngle",{get:function(){return"local"===this.tool.view.viewingMode||this.tool.view.scale<
q.ALIGN_ARROWS_SCALE_THRESHOLD?this.tool.symbolRotationAngle:0},enumerable:!0,configurable:!0});b.prototype.recreateManipulators=function(){var b=this;this._clear();for(var d=[],c=function(a){var c=e.createArrowManipulator(a);d.push(c);e.tool.manipulators.add(c.manipulator);var f=C.createManipulatorDragEventPipeline(c.manipulator,function(d,c){c.next(C.screenToMapXYForGraphicAtLocation(b.tool.view,b.tool.graphic,d.elevationAlignedLocation)).next(C.constrainToMapAxis(d.location,b.arrowRotationAngle+
(a+1)*Math.PI*.5)).next(function(a){"start"===a.action&&b.tool.emit("graphic-translate-start",{graphic:b.tool.graphic});return a}).next(C.dragGraphic(b.tool.graphic)).next(function(a){switch(a.action){case "start":case "update":(a.translationX||a.translationY||a.translationZ)&&b.tool.emit("graphic-translate",{graphic:b.tool.graphic,dx:a.translationX,dy:a.translationY,dz:a.translationZ,type:"translate"});break;case "end":b.tool.emit("graphic-translate-stop",{graphic:b.tool.graphic})}return a})});e._handles.add(f);
e._handles.add([c.manipulator.events.on("focus",function(){b.tool.updateManipulators()}),c.manipulator.events.on("immediate-click",function(a){a.stopPropagation()})])},e=this,f=0;4>f;f++)c(f);this.arrowManipulatorInfos=d;this.arrowManipulatorInfos.forEach(function(a){p.placeManipulatorAtGraphic(a.manipulator,b.tool.graphic)});this._handles.add([a.init(this.tool.graphic,"geometry",function(){b.arrowManipulatorInfos.forEach(function(a){p.placeManipulatorAtGraphic(a.manipulator,b.tool.graphic)})}),a.init(this.tool.graphic,
["visible","layer.visible"],function(){var a=b.tool.graphic.visible&&b.tool.graphic.layer.visible;b.arrowManipulatorInfos.forEach(function(b){b.manipulator.visible=a})})])};b.prototype.updateManipulators=function(a,b,d){var c=this.tool.symbolRotationAngle,e=g.mat4.identity(z.sm4d.get());0!==c&&g.mat4.rotate(e,e,c,r.vec3f64.fromValues(0,0,1));var c=g.mat4.multiply(z.sm4d.get(),a,e),f=F(this.tool.view)?c:a,h=this.dragging,k=b||x("esri-mobile")?A.Visible:0;this.arrowManipulatorInfos.forEach(function(a){var b=
g.mat4.multiply(z.sm4d.get(),f,a.transform);a.manipulator.state=h?k|(a.manipulator.dragging?A.Highlighted:0):k|(a.manipulator.focused&&d?A.Highlighted:0);a.manipulator.modelTransform=b})};b.prototype.createArrowManipulator=function(a){var b=Math.sqrt(q.DISC_TRANSLATE_ARROW_SIZE*q.DISC_TRANSLATE_ARROW_SIZE*3/4),c=e.createExtrudedTriangle(b,q.DISC_TRANSLATE_ARROW_SIZE/2,q.DISC_TRANSLATE_ARROW_SIZE/2,q.DISC_HEIGHT);e.transformInPlace(c,g.mat4.fromTranslation(z.sm4d.get(),h.vec3.set(z.sv3d.get(),0,-b/
3,0)));var c=new v(c,"graphic-transform-disc-arrow"+a),f=this.createMaterial(),l=this.createMaterial(.5),n=this.createMaterial(0),b=new B.Manipulator3D({view:this.tool.view,renderObjects:[{geometry:c,material:f,stateMask:A.Visible|A.Highlighted},{geometry:c,material:l,stateMask:A.Visible},{geometry:c,material:n,stateMask:0}],autoScaleRenderObjects:!1,radius:b,focusMultiplier:1,touchMultiplier:1,elevationInfo:d.getGraphicEffectiveElevationInfo(this.tool.graphic),collisionType:{type:"disc",direction:r.vec3f64.fromValues(0,
0,1)}}),c=g.mat4.identity(z.sm4d.get());g.mat4.fromZRotation(c,a*Math.PI/2);a=g.mat4.identity(z.sm4d.get());g.mat4.fromTranslation(a,h.vec3.set(z.sv3d.get(),0,q.DISC_TRANSLATE_ARROW_OFFSET,0));f=k.mat4f64.create();g.mat4.multiply(f,c,a);return{manipulator:b,transform:f}};b.prototype.createMaterial=function(a){void 0===a&&(a=1);var b=q.HANDLE_COLOR.concat([a]);a=new f({color:b,transparent:1!==a,cullFace:2},"graphic-transform");a.renderOccluded=2;return a};return b}();b.GraphicXYAxisTransform=y})},
"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicXYTransform":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Handles ../../../../../core/watchUtils ../../../../../core/libs/gl-matrix-2/mat4 ../../../../../core/libs/gl-matrix-2/mat4f64 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../manipulatorDragUtils ./graphicTransform3DToolConfig ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/materials/ColorMaterial".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h,r,d,B,p,C,q,z){Object.defineProperty(b,"__esModule",{value:!0});var v;(v||(v={})).Highlighted=512;y=function(){function b(a){this._handles=new c;this.tool=a.tool}b.prototype.destroy=function(){this._clear()};b.prototype._clear=function(){this._handles.removeAll();this.tool.manipulators.remove(this.discManipulator);this.discManipulator=null};Object.defineProperty(b.prototype,"focused",{get:function(){return this.discManipulator.focused},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"dragging",{get:function(){return this.discManipulator.dragging},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderLocation",{get:function(){return this.discManipulator.renderLocation},enumerable:!0,configurable:!0});b.prototype.recreateManipulators=function(){var a=this;this._clear();this.discManipulator=this.createDiscManipulator();this.tool.manipulators.add(this.discManipulator);var b=B.createManipulatorDragEventPipeline(this.discManipulator,
function(b,c){c.next(B.screenToMapXYForGraphicAtLocation(a.tool.view,a.tool.graphic,b.elevationAlignedLocation)).next(function(b){"start"===b.action&&a.tool.emit("graphic-translate-start",{graphic:a.tool.graphic});return b}).next(B.dragGraphic(a.tool.graphic)).next(function(b){switch(b.action){case "start":case "update":(b.translationX||b.translationY||b.translationZ)&&a.tool.emit("graphic-translate",{graphic:a.tool.graphic,dx:b.translationX,dy:b.translationY,dz:b.translationZ,type:"translate"});
break;case "end":a.tool.emit("graphic-translate-stop",{graphic:a.tool.graphic})}return b})});this._handles.add(b);this._handles.add([x.init(this.tool.graphic,"geometry",function(){d.placeManipulatorAtGraphic(a.discManipulator,a.tool.graphic)}),this.discManipulator.events.on("immediate-click",function(a){a.stopPropagation()}),x.init(this.tool.graphic,["visible","layer.visible"],function(){a.discManipulator.visible=a.tool.graphic.visible&&a.tool.graphic.layer.visible})]);this._handles.add([this.discManipulator.events.on("focus",
function(){a.tool.updateManipulators()})])};b.prototype.updateManipulators=function(a,b){this.discManipulator.modelTransform=a;this.discManipulator.state=b?v.Highlighted:0};b.prototype.createDiscManipulator=function(){var b=this.tool.view,c=new C(q.createCylinderGeometry(p.DISC_HEIGHT,1,p.GEOMETRY_SEGMENTS,k.vec3f64.fromValues(0,0,1),k.vec3f64.fromValues(0,0,0)),"graphic-transform-disc"),d=a.mat4.fromScaling(g.mat4f64.create(),k.vec3f64.fromValues(p.DISC_RADIUS,p.DISC_RADIUS,p.DISC_RADIUS)),e=this.createMaterial(),
l=this.createMaterial(.5);return new r.Manipulator3D({view:b,renderObjects:[{geometry:c,material:e,transform:d,stateMask:v.Highlighted},{geometry:c,material:l,transform:d}],worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,radius:p.DISC_COLLISION_RADIUS,elevationInfo:h.getGraphicEffectiveElevationInfo(this.tool.graphic),collisionType:{type:"disc",direction:k.vec3f64.fromValues(0,0,1)}})};b.prototype.createMaterial=function(a){void 0===a&&(a=1);var b=p.HANDLE_COLOR.concat([a]);
a=new z({color:b,transparent:1!==a,cullFace:2},"graphic-transform");a.renderOccluded=2;return a};return b}();b.GraphicXYTransform=y})},"esri/views/3d/interactive/editingTools/graphicTransform3D/GraphicZTransform":function(){define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../manipulatorUtils ../manipulatorDragUtils ../manipulatorUtils".split(" "),
function(y,b,l,w,t,n,c,x,a,g,k,h){Object.defineProperty(b,"__esModule",{value:!0});y=function(){function b(a){this._handles=new c;this.zManipulator=null;this.tool=a.tool}b.prototype.destroy=function(){this._clear()};b.prototype._clear=function(){this._handles.removeAll();x.isSome(this.zManipulator)&&this.tool.manipulators.remove(this.zManipulator);this.zManipulator=null};Object.defineProperty(b.prototype,"dragging",{get:function(){return x.isSome(this.zManipulator)&&this.zManipulator.dragging},enumerable:!0,
configurable:!0});b.prototype.recreateManipulators=function(){var b=this;this._clear();this.zManipulator=h.createGraphicMoveZManipulator({view:this.tool.view,graphic:this.tool.graphic,worldOriented:!1});if(x.isSome(this.zManipulator)){this.tool.manipulators.add(this.zManipulator);var c=k.createManipulatorDragEventPipeline(this.zManipulator,function(a,c){c.next(k.screenToZConstrained(b.tool.view,a.renderLocation,a.location.spatialReference)).next(function(a){"start"===a.action&&b.tool.emit("graphic-translate-start",
{graphic:b.tool.graphic});return a}).next(k.dragGraphic(b.tool.graphic)).next(function(a){switch(a.action){case "start":case "update":(a.translationX||a.translationY||a.translationZ)&&b.tool.emit("graphic-translate",{graphic:b.tool.graphic,dx:a.translationX,dy:a.translationY,dz:a.translationZ});break;case "end":b.tool.emit("graphic-translate-stop",{graphic:b.tool.graphic})}return a})});this._handles.add(c);this._handles.add([a.init(this.tool.graphic,"geometry",function(){x.isSome(b.zManipulator)&&
g.placeManipulatorAtGraphic(b.zManipulator,b.tool.graphic)}),this.zManipulator.events.on("immediate-click",function(a){a.stopPropagation()}),a.init(this.tool.graphic,["visible","layer.visible"],function(){x.isSome(b.zManipulator)&&(b.zManipulator.visible=b.tool.graphic.visible&&b.tool.graphic.layer.visible)})])}};b.prototype.updateManipulators=function(a){x.isSome(this.zManipulator)&&(this.zManipulator.modelTransform=a)};return b}();b.GraphicZTransform=y})},"esri/views/3d/interactive/editingTools/graphicTransform3D/isSupportedGraphic":function(){define(["require",
"exports","../../../../../core/compilerUtils","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(y,b,l,w,t){Object.defineProperty(b,"__esModule",{value:!0});b.isSupportedGraphic=function(b){if("graphics"!==b.layer.type)return 1;if(w.isNone(b.geometry))return 2;var c=b.geometry.type;switch(c){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 3;default:return l.neverReached(c),3}return(c=w.isSome(b.symbol)&&"point-3d"===
b.symbol.type&&b.symbol.symbolLayers)&&0<c.length&&c.some(function(b){return"object"===b.type})?"on-the-ground"!==t.getGraphicEffectiveElevationMode(b)&&t.hasGraphicFeatureExpressionInfo(b)?4:0:5}})},"*noref":1}});
define(["require","exports","./editingTools/graphicMove3D/GraphicMove3DTool","./editingTools/graphicReshape3D/GraphicReshape3DTool","./editingTools/graphicTransform3D/GraphicTransform3DTool"],function(y,b,l,w,t){Object.defineProperty(b,"__esModule",{value:!0});b.GraphicMove3DTool=l.GraphicMove3DTool;b.GraphicReshape3DTool=w.GraphicReshape3DTool;b.GraphicTransform3DTool=t.GraphicTransform3DTool});