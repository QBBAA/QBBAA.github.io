// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/watchUtils ../../manipulatorUtils ../manipulatorDragUtils ../manipulatorUtils".split(" "),function(e,f,m,n,p,q,h,c,g,k,d,l){Object.defineProperty(f,"__esModule",{value:!0});e=function(){function a(b){this._handles=new h;
this.zManipulator=null;this.tool=b.tool}a.prototype.destroy=function(){this._clear()};a.prototype._clear=function(){this._handles.removeAll();c.isSome(this.zManipulator)&&this.tool.manipulators.remove(this.zManipulator);this.zManipulator=null};Object.defineProperty(a.prototype,"dragging",{get:function(){return c.isSome(this.zManipulator)&&this.zManipulator.dragging},enumerable:!0,configurable:!0});a.prototype.recreateManipulators=function(){var b=this;this._clear();this.zManipulator=l.createGraphicMoveZManipulator({view:this.tool.view,
graphic:this.tool.graphic,worldOriented:!1});if(c.isSome(this.zManipulator)){this.tool.manipulators.add(this.zManipulator);var a=d.createManipulatorDragEventPipeline(this.zManipulator,function(a,c){c.next(d.screenToZConstrained(b.tool.view,a.renderLocation,a.location.spatialReference)).next(function(a){"start"===a.action&&b.tool.emit("graphic-translate-start",{graphic:b.tool.graphic});return a}).next(d.dragGraphic(b.tool.graphic)).next(function(a){switch(a.action){case "start":case "update":(a.translationX||
a.translationY||a.translationZ)&&b.tool.emit("graphic-translate",{graphic:b.tool.graphic,dx:a.translationX,dy:a.translationY,dz:a.translationZ});break;case "end":b.tool.emit("graphic-translate-stop",{graphic:b.tool.graphic})}return a})});this._handles.add(a);this._handles.add([g.init(this.tool.graphic,"geometry",function(){c.isSome(b.zManipulator)&&k.placeManipulatorAtGraphic(b.zManipulator,b.tool.graphic)}),this.zManipulator.events.on("immediate-click",function(a){a.stopPropagation()}),g.init(this.tool.graphic,
["visible","layer.visible"],function(){c.isSome(b.zManipulator)&&(b.zManipulator.visible=b.tool.graphic.visible&&b.tool.graphic.layer.visible)})])}};a.prototype.updateManipulators=function(a){c.isSome(this.zManipulator)&&(this.zManipulator.modelTransform=a)};return a}();f.GraphicZTransform=e});