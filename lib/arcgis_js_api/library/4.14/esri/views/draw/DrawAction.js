// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.15/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators".split(" "),function(l,m,h,d,k,e,g,c){return function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a.history=[];a.redoHistory=[];a.view=null;a.elevationInfo=null;a.zOffset=0;return a}h(b,f);Object.defineProperty(b.prototype,"zEnabled",{get:function(){return"3d"===this.view.type&&e.isSome(this.elevationInfo)&&
"on-the-ground"!==this.elevationInfo.mode},enumerable:!0,configurable:!0});b.prototype.canUndo=function(){return 0<this.history.length};b.prototype.canRedo=function(){return 0<this.redoHistory.length};b.prototype.undo=function(){if(this.canUndo()){var a=this.history.pop();a.undo();this.redoHistory.push(a)}};b.prototype.redo=function(){if(this.canRedo()){var a=this.redoHistory.pop();a.redo();this.history.push(a)}};b.prototype.getCoordsFromScreenPoint=function(a){if("3d"===this.view.type&&this.zEnabled&&
e.isSome(this.elevationInfo)){var b=this.view.sceneIntersectionHelper.intersectElevationFromScreen(g.createScreenPointArray(a.x,a.y),this.elevationInfo,this.zOffset||0);if(e.isSome(b))return[b.x,b.y,b.z]}a=this.view.toMap(a);return e.isSome(a)?[a.x,a.y]:null};b.prototype.getMappedScreenPoint=function(a){if("3d"===this.view.type&&this.zEnabled&&e.isSome(this.elevationInfo)){var b=this.view.sceneIntersectionHelper.intersectElevationFromScreen(g.createScreenPointArray(a.x,a.y),this.elevationInfo,this.zOffset||
0);if(e.isSome(b))return{vertex:[b.x,b.y,b.z],mapPoint:b}}a=this.view.toMap(a);return e.isSome(a)?{vertex:[a.x,a.y],mapPoint:a}:null};b.prototype.isDuplicateVertex=function(a,b){if(a.length){a=a[a.length-1];var c=a[1];return a[0]===b[0]&&c===b[1]}return!1};d([c.property({readOnly:!0})],b.prototype,"history",void 0);d([c.property({readOnly:!0})],b.prototype,"redoHistory",void 0);d([c.property()],b.prototype,"view",void 0);d([c.property()],b.prototype,"elevationInfo",void 0);d([c.property()],b.prototype,
"zOffset",void 0);d([c.property()],b.prototype,"zEnabled",null);return b=d([c.subclass("esri.views.draw.DrawAction")],b)}(c.declared(k.EventedAccessor))});